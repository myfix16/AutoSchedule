!function(e){var t={};function s(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(i,a,function(t){return e[t]}.bind(null,a));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s="./bundles/uploader.js")}({"./bundles/uploader.js":function(e,t,s){"use strict";s.r(t);s("./modules/uploader.js");s.p="_content/Syncfusion.Blazor.Inputs/scripts/"},"./modules/uploader.js":function(e,t){function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sf=window.sf||{};sf.inputs=sf.base.extend({},sf.inputs,function(e){"use strict";var t,i=(t=function(e,s){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(e,s)},function(e,s){function i(){this.constructor=e}t(e,s),e.prototype=null===s?Object.create(s):(i.prototype=s.prototype,new i)}),a=function(e,t,i,a){var r,l=arguments.length,n=l<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"===("undefined"==typeof Reflect?"undefined":s(Reflect))&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(n=(l<3?r(n):l>3?r(t,i,n):r(t,i))||n);return l>3&&n&&Object.defineProperty(t,i,n),n},r="e-upload-file-list",l="e-file-status",n="e-file-remove-btn",o="e-file-delete-btn",u="e-file-abort-btn",d="e-file-reload-btn",p="e-upload-progress-wrap",h="e-upload-progress-bar",c="e-upload-success",f="e-upload-fails",m="e-file-pause-btn",b=["title","style","class"],v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),a([sf.base.Property("")],t.prototype,"name",void 0),a([sf.base.Property(null)],t.prototype,"size",void 0),a([sf.base.Property("")],t.prototype,"type",void 0),t}(sf.base.ChildProperty),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),a([sf.base.Property("Browse...")],t.prototype,"browse",void 0),a([sf.base.Property("Upload")],t.prototype,"upload",void 0),a([sf.base.Property("Clear")],t.prototype,"clear",void 0),t}(sf.base.ChildProperty),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),a([sf.base.Property("")],t.prototype,"saveUrl",void 0),a([sf.base.Property("")],t.prototype,"removeUrl",void 0),a([sf.base.Property(0)],t.prototype,"chunkSize",void 0),a([sf.base.Property(3)],t.prototype,"retryCount",void 0),a([sf.base.Property(500)],t.prototype,"retryAfterDelay",void 0),t}(sf.base.ChildProperty),S=function(e){function t(t,s){var i=e.call(this,t,s)||this;return i.initialAttr={accept:null,multiple:!1,disabled:!1},i.uploadedFilesData=[],i.base64String=[],i.isForm=!1,i.allTypes=!1,i.pausedData=[],i.uploadMetaData=[],i.tabIndex="0",i.btnTabIndex="0",i.disableKeyboardNavigation=!1,i.count=-1,i.actionCompleteCount=0,i.flag=!0,i.selectedFiles=[],i.uploaderName="UploadFiles",i.fileStreams=[],i.newFileRef=0,i.isFirstFileOnSelection=!1,i.fileList=[],i.filesData=[],i.uploaderOptions=t,i}return i(t,e),t.prototype.onPropertyChanged=function(e,t){for(var s=0,i=Object.keys(e);s<i.length;s++){switch(i[s]){case"allowedExtensions":this.setExtensions(this.allowedExtensions),this.clearAll();break;case"enabled":this.setControlStatus();break;case"multiple":this.setMultipleSelection();break;case"enableRtl":this.setRTL(),this.reRenderFileList();break;case"buttons":this.buttons.browse=sf.base.isNullOrUndefined(this.buttons.browse)?"":this.buttons.browse,this.buttons.clear=sf.base.isNullOrUndefined(this.buttons.clear)?"":this.buttons.clear,this.buttons.upload=sf.base.isNullOrUndefined(this.buttons.upload)?"":this.buttons.upload,this.renderButtonTemplates();break;case"dropArea":this.unBindDropEvents(),this.updateDropArea();break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.checkHTMLAttributes(!0);break;case"files":this.renderPreLoadFiles();break;case"directoryUpload":this.updateDirectoryAttributes();break;case"template":this.isServerBlazor||this.clearAll();break;case"minFileSize":case"maxFileSize":case"autoUpload":case"sequentialUpload":this.clearAll();break;case"locale":this.l10n.setLocale(this.locale),this.setLocalizedTexts(),this.preLocaleObj=sf.base.getValue("currentLocale",this.l10n);break;case"cssClass":this.setCSSClass(t.cssClass)}}},t.prototype.setLocalizedTexts=function(){sf.base.isNullOrUndefined(this.template)&&("string"==typeof this.buttons.browse&&(this.browseButton.innerText="Browse..."===this.buttons.browse?this.localizedTexts("Browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.innerText),this.uploadWrapper&&!sf.base.isNullOrUndefined(this.uploadWrapper.querySelector(".e-file-drop"))&&(this.uploadWrapper.querySelector(".e-file-drop").innerHTML=this.localizedTexts("dropFilesHint"))),this.updateFileList())},t.prototype.getKeyValue=function(e){for(var t,s=0,i=Object.keys(this.preLocaleObj);s<i.length;s++){var a=i[s];this.preLocaleObj[a]===e&&(t=a)}return t},t.prototype.updateFileList=function(){if(this.fileList.length>0&&!sf.base.isNullOrUndefined(this.uploadWrapper.querySelector(".e-upload-files")))for(var e=0;e<this.fileList.length;e++)this.fileList[e].querySelector(".e-file-status").innerHTML=this.localizedTexts(this.getKeyValue(this.filesData[e].status)),this.filesData[e].status=this.localizedTexts(this.getKeyValue(this.filesData[e].status)),this.fileList[e].classList.contains(c)&&this.fileList[e].querySelector(".e-icons").setAttribute("title",this.localizedTexts("delete")),this.fileList[e].querySelector(".e-file-play-btn")&&this.fileList[e].querySelector(".e-icons").setAttribute("title",this.localizedTexts("resume")),this.fileList[e].querySelector(".e-file-remove-btn")&&this.fileList[e].querySelector(".e-icons").setAttribute("title",this.localizedTexts("remove")),this.fileList[e].querySelector(".e-file-reload-btn")&&this.fileList[e].querySelector(".e-icons").setAttribute("title",this.localizedTexts("retry")),this.autoUpload||(this.uploadButton.innerText="Upload"===this.buttons.upload?this.localizedTexts("Upload"):this.buttons.upload,this.uploadButton.setAttribute("title",this.localizedTexts("Upload")),this.clearButton.innerText="Clear"===this.buttons.clear?this.localizedTexts("Clear"):this.buttons.clear,this.clearButton.setAttribute("title",this.localizedTexts("Clear")))},t.prototype.reRenderFileList=function(){this.listParent&&(sf.base.detach(this.listParent),this.listParent=null,this.fileList=[],this.createFileList(this.filesData),this.actionButtons&&(this.removeActionButtons(),this.renderActionButtons(),this.checkActionButtonStatus()))},t.prototype.preRender=function(){if(this.localeText={Browse:"Browse...",Clear:"Clear",Upload:"Upload",dropFilesHint:"Or drop files here",invalidMaxFileSize:"File size is too large",invalidMinFileSize:"File size is too small",invalidFileType:"File type is not allowed",uploadFailedMessage:"File failed to upload",uploadSuccessMessage:"File uploaded successfully",removedSuccessMessage:"File removed successfully",removedFailedMessage:"Unable to remove file",inProgress:"Uploading",readyToUploadMessage:"Ready to upload",abort:"Abort",remove:"Remove",cancel:"Cancel",delete:"Delete file",pauseUpload:"File upload paused",pause:"Pause",resume:"Resume",retry:"Retry",fileUploadCancel:"File upload canceled",invalidFileSelection:"Invalid files selected",totalFiles:"Total files",size:"Size"},this.l10n=new sf.base.L10n("uploader",this.localeText,this.locale),this.preLocaleObj=sf.base.getValue("currentLocale",this.l10n),this.isServerBlazor=!(!sf.base.isBlazor()||!this.isServerRendered),this.isBlazorTemplate=!(!this.isServerBlazor||""===this.template||sf.base.isNullOrUndefined(this.template)),this.isBlazorSaveUrl=!(!this.isServerRendered||""!==this.asyncSettings.saveUrl&&!sf.base.isNullOrUndefined(this.asyncSettings.saveUrl)),this.isBlazorSaveUrl&&this.sequentialUpload&&(this.sequentialUpload=!1),this.isBlazorSaveUrl||this.formRendered(),!this.isServerBlazor){this.updateHTMLAttrToElement(),this.checkHTMLAttributes(!1);var e=sf.base.getValue("ej2_instances",this.element);if("EJS-UPLOADER"===this.element.tagName){for(var t=this.createElement("input",{attrs:{type:"file"}}),s=0;s<this.element.attributes.length;s++)t.setAttribute(this.element.attributes[s].nodeName,this.element.attributes[s].nodeValue),t.innerHTML=this.element.innerHTML;t.hasAttribute("name")||t.setAttribute("name","UploadFiles"),this.element.appendChild(t),this.element=t,sf.base.setValue("ej2_instances",e,this.element)}e[0].isPureReactComponent&&(sf.base.isNullOrUndefined(e[0].props.name)?!sf.base.isNullOrUndefined(e[0].props.id)&&sf.base.isNullOrUndefined(e[0].props.name)?this.element.setAttribute("name",e[0].props.id):this.element.setAttribute("name","UploadFiles"):this.element.setAttribute("name",e[0].props.name)),sf.base.isNullOrUndefined(this.element.getAttribute("name"))&&this.element.setAttribute("name",this.element.getAttribute("id")),this.element.hasAttribute("type")||this.element.setAttribute("type","file"),this.updateDirectoryAttributes()}this.keyConfigs={enter:"enter"},this.element.hasAttribute("tabindex")&&(this.tabIndex=this.element.getAttribute("tabindex")),this.browserName=sf.base.Browser.info.name,this.uploaderName=this.element.getAttribute("name")},t.prototype.formRendered=function(){var e=sf.base.closest(this.element,"form");if(!sf.base.isNullOrUndefined(e))for(;e&&e!==document.documentElement;e=e.parentElement)"FORM"===e.tagName&&(this.isForm=!0,this.formElement=e,e.setAttribute("enctype","multipart/form-data"),e.setAttribute("encoding","multipart/form-data"))},t.prototype.getPersistData=function(){return this.addOnPersist(["filesData"])},t.prototype.getModuleName=function(){return"uploader"},t.prototype.updateDirectoryAttributes=function(){this.directoryUpload?(this.element.setAttribute("directory","true"),this.element.setAttribute("webkitdirectory","true")):(this.element.removeAttribute("directory"),this.element.removeAttribute("webkitdirectory"))},t.prototype.render=function(){this.isServerBlazor?(this.dropAreaWrapper=sf.base.closest(this.element,".e-file-select-wrap"),this.uploadWrapper=sf.base.closest(this.element,".e-upload.e-control-wrapper"),this.browseButton=this.dropAreaWrapper.querySelector("button.e-upload-browse-btn"),this.setDropArea(),this.renderPreLoadFiles(),this.wireEvents()):(this.renderBrowseButton(),this.initializeUpload(),this.updateHTMLAttrToWrapper(),this.wireEvents(),this.setMultipleSelection(),this.setExtensions(this.allowedExtensions),this.setRTL(),this.renderPreLoadFiles(),this.setControlStatus(),this.setCSSClass()),this.isServerBlazor&&this.renderComplete()},t.prototype.renderBrowseButton=function(){this.browseButton=this.createElement("button",{className:"e-css e-btn",attrs:{type:"button"}}),this.browseButton.setAttribute("tabindex",this.tabIndex),"string"==typeof this.buttons.browse?(this.browseButton.textContent="Browse..."===this.buttons.browse?this.localizedTexts("Browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.innerText)):this.browseButton.appendChild(this.buttons.browse),this.element.setAttribute("aria-label","Uploader")},t.prototype.renderActionButtons=function(){this.element.setAttribute("tabindex","-1"),this.isBlazorSaveUrl||this.isBlazorTemplate||(this.actionButtons=this.createElement("div",{className:"e-upload-actions"}),this.uploadButton=this.createElement("button",{className:"e-file-upload-btn e-css e-btn e-flat e-primary",attrs:{type:"button",tabindex:this.btnTabIndex}}),this.clearButton=this.createElement("button",{className:"e-file-clear-btn e-css e-btn e-flat",attrs:{type:"button",tabindex:this.btnTabIndex}}),this.actionButtons.appendChild(this.clearButton),this.actionButtons.appendChild(this.uploadButton),this.renderButtonTemplates(),this.uploadWrapper.appendChild(this.actionButtons),this.browseButton.blur(),this.uploadButton.focus(),this.wireActionButtonEvents())},t.prototype.serverActionButtonsEventBind=function(e){e&&!this.isForm&&(this.browseButton.blur(),this.actionButtons=e,this.uploadButton=this.actionButtons.querySelector(".e-file-upload-btn"),this.clearButton=this.actionButtons.querySelector(".e-file-clear-btn"),this.uploadButton.focus(),this.unwireActionButtonEvents(),this.wireActionButtonEvents(),this.checkActionButtonStatus())},t.prototype.serverUlElement=function(e){e&&(this.isBlazorSaveUrl||this.isBlazorTemplate)&&(this.listParent=e,this.fileList=[].slice.call(this.listParent.querySelectorAll("li")),this.serverRemoveIconBindEvent(),this.isForm||this.checkAutoUpload(this.filesData))},t.prototype.wireActionButtonEvents=function(){sf.base.EventHandler.add(this.uploadButton,"click",this.uploadButtonClick,this),sf.base.EventHandler.add(this.clearButton,"click",this.clearButtonClick,this)},t.prototype.unwireActionButtonEvents=function(){sf.base.EventHandler.remove(this.uploadButton,"click",this.uploadButtonClick),sf.base.EventHandler.remove(this.clearButton,"click",this.clearButtonClick)},t.prototype.removeActionButtons=function(){this.actionButtons&&(this.unwireActionButtonEvents(),this.isBlazorSaveUrl||this.isBlazorTemplate||sf.base.detach(this.actionButtons),this.actionButtons=null)},t.prototype.renderButtonTemplates=function(){if("string"==typeof this.buttons.browse?(this.browseButton.textContent="Browse..."===this.buttons.browse?this.localizedTexts("Browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.textContent)):(this.browseButton.innerHTML="",this.browseButton.appendChild(this.buttons.browse)),this.uploadButton){var e;e=sf.base.isNullOrUndefined(this.buttons.upload)?"Upload":this.buttons.upload,this.buttons.upload=e,"string"==typeof this.buttons.upload?(this.uploadButton.textContent="Upload"===this.buttons.upload?this.localizedTexts("Upload"):this.buttons.upload,this.uploadButton.setAttribute("title",this.uploadButton.textContent)):(this.uploadButton.innerHTML="",this.uploadButton.appendChild(this.buttons.upload))}if(this.clearButton){var t;t=sf.base.isNullOrUndefined(this.buttons.clear)?"Clear":this.buttons.clear,this.buttons.clear=t,"string"==typeof this.buttons.clear?(this.clearButton.textContent="Clear"===this.buttons.clear?this.localizedTexts("Clear"):this.buttons.clear,this.clearButton.setAttribute("title",this.clearButton.textContent)):(this.clearButton.innerHTML="",this.clearButton.appendChild(this.buttons.clear))}},t.prototype.initializeUpload=function(){this.element.setAttribute("tabindex","-1");var e=this.createElement("span",{className:"e-file-select"});this.element.parentElement.insertBefore(e,this.element),this.dropAreaWrapper=this.createElement("div",{className:"e-file-select-wrap"}),this.element.parentElement.insertBefore(this.dropAreaWrapper,this.element),e.appendChild(this.element),this.dropAreaWrapper.appendChild(this.browseButton),this.dropAreaWrapper.appendChild(e),this.uploadWrapper=this.createElement("div",{className:"e-upload e-control-wrapper"}),this.dropAreaWrapper.parentElement.insertBefore(this.uploadWrapper,this.dropAreaWrapper),this.uploadWrapper.appendChild(this.dropAreaWrapper),this.setDropArea()},t.prototype.renderPreLoadFiles=function(){if(this.files.length){if(this.enablePersistence&&this.filesData.length)return void this.createFileList(this.filesData);if(sf.base.isNullOrUndefined(this.files[0].size))return;var e=[].slice.call(this.files),t=[];this.multiple||(this.clearData(),e=[e[0]]);for(var s=0,i=e;s<i.length;s++){var a=i[s],r={name:a.name+"."+a.type.split(".")[a.type.split(".").length-1],rawFile:"",size:a.size,status:this.localizedTexts("uploadSuccessMessage"),type:a.type,validationMessages:{minSize:"",maxSize:""},statusCode:"2"};t.push(r),this.filesData.push(r)}this.createFileList(t),this.autoUpload||!this.listParent||this.actionButtons||this.isForm&&!this.allowUpload()||!this.showFileList||this.renderActionButtons(),this.checkActionButtonStatus(),this.sequentialUpload&&(this.count=this.filesData.length-1)}},t.prototype.checkActionButtonStatus=function(){if(this.actionButtons){var e=this.uploadWrapper.querySelectorAll(".e-validation-fails").length+this.uploadWrapper.querySelectorAll(".e-upload-fails:not(.e-upload-progress)").length+this.uploadWrapper.querySelectorAll("span."+c).length+this.uploadWrapper.querySelectorAll("span.e-upload-progress").length;e>0&&e===this.uploadWrapper.querySelectorAll("li").length?this.uploadButton.setAttribute("disabled","disabled"):this.uploadButton.removeAttribute("disabled")}},t.prototype.setDropArea=function(){var e=this.dropAreaWrapper.querySelector(".e-file-drop");if(this.dropArea){this.dropZoneElement="string"!=typeof this.dropArea?this.dropArea:sf.base.select(this.dropArea,document);for(var t=this.element,s=!1;t.parentNode;)(t=t.parentNode)===this.dropZoneElement&&(s=!0,e?this.isServerBlazor||(e.innerHTML=this.localizedTexts("dropFilesHint")):this.createDropTextHint());!s&&e&&sf.base.remove(e)}else sf.base.isNullOrUndefined(this.uploaderOptions)||void 0!==this.uploaderOptions.dropArea||(this.createDropTextHint(),this.dropZoneElement=this.uploadWrapper,this.setProperties({dropArea:this.uploadWrapper},!0));this.bindDropEvents()},t.prototype.updateDropArea=function(){if(this.dropArea)this.setDropArea();else{this.dropZoneElement=null;var e=this.dropAreaWrapper.querySelector(".e-file-drop");e&&sf.base.remove(e)}},t.prototype.createDropTextHint=function(){if(!this.isServerBlazor){var e=this.createElement("span",{className:"e-file-drop"});e.innerHTML=this.localizedTexts("dropFilesHint"),this.dropAreaWrapper.appendChild(e)}},t.prototype.updateHTMLAttrToElement=function(){if(!sf.base.isNullOrUndefined(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var s=t[e];b.indexOf(s)<0&&this.element.setAttribute(s,this.htmlAttributes[s])}},t.prototype.updateHTMLAttrToWrapper=function(){if(!sf.base.isNullOrUndefined(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var s=t[e];if(b.indexOf(s)>-1)if("class"===s){var i=this.htmlAttributes[s].replace(/\s+/g," ").trim();""!==i&&sf.base.addClass([this.uploadWrapper],i.split(" "))}else if("style"===s){var a=this.uploadWrapper.getAttribute(s);a=sf.base.isNullOrUndefined(a)?this.htmlAttributes[s]:a+this.htmlAttributes[s],this.uploadWrapper.setAttribute(s,a)}else this.uploadWrapper.setAttribute(s,this.htmlAttributes[s])}},t.prototype.setMultipleSelection=function(){if(this.multiple&&!this.element.hasAttribute("multiple")){var e=document.createAttribute("multiple");e.value="multiple",this.element.setAttributeNode(e)}else this.multiple||this.element.removeAttribute("multiple")},t.prototype.checkAutoUpload=function(e){this.autoUpload?(this.sequentialUpload?this.sequenceUpload(e):this.upload(e),this.removeActionButtons()):this.actionButtons||this.renderActionButtons(),this.checkActionButtonStatus()},t.prototype.sequenceUpload=function(e){if(this.filesData.length-e.length==0||"1"!==this.filesData[this.filesData.length-e.length-1].statusCode){++this.count;var t=!this.showFileList;"object"===s(this.filesData[this.count])?(this.isFirstFileOnSelection=!1,this.upload(this.filesData[this.count],t),"0"===this.filesData[this.count].statusCode&&this.sequenceUpload(e)):--this.count}},t.prototype.setCSSClass=function(e){var t=this.cssClass;sf.base.isNullOrUndefined(this.cssClass)||""===this.cssClass||(t=this.cssClass.replace(/\s+/g," ").trim()),sf.base.isNullOrUndefined(this.cssClass)||""===t||sf.base.addClass([this.uploadWrapper],t.split(t.indexOf(",")>-1?",":" "));var s=e;sf.base.isNullOrUndefined(e)||(s=e.replace(/\s+/g," ").trim()),sf.base.isNullOrUndefined(e)||""===s||sf.base.removeClass([this.uploadWrapper],s.split(" "))},t.prototype.wireEvents=function(){sf.base.EventHandler.add(this.browseButton,"click",this.browseButtonClick,this),sf.base.EventHandler.add(this.element,"change",this.onSelectFiles,this),sf.base.EventHandler.add(document,"click",this.removeFocus,this),this.keyboardModule=new sf.base.KeyboardEvents(this.uploadWrapper,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.isForm&&sf.base.EventHandler.add(this.formElement,"reset",this.resetForm,this)},t.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.browseButton,"click",this.browseButtonClick),sf.base.EventHandler.remove(this.element,"change",this.onSelectFiles),sf.base.EventHandler.remove(document,"click",this.removeFocus),this.isForm&&sf.base.EventHandler.remove(this.formElement,"reset",this.resetForm),this.keyboardModule&&this.keyboardModule.destroy()},t.prototype.resetForm=function(){this.clearAll()},t.prototype.keyActionHandler=function(e){var t=e.target;switch(e.action){case"enter":if(e.target===this.clearButton)this.clearButtonClick();else if(e.target===this.uploadButton)this.uploadButtonClick();else if(e.target===this.browseButton)this.browseButtonClick();else if(t.classList.contains(m)){(s=this.getCurrentMetaData(null,e)).file.statusCode="4",s.file.status=this.localizedTexts("pauseUpload"),this.abortUpload(s,!1)}else if(t.classList.contains("e-file-play-btn"))this.resumeUpload(this.getCurrentMetaData(null,e),e);else if(t.classList.contains(d)){var s=this.getCurrentMetaData(null,e);if(sf.base.isNullOrUndefined(s)){var i=e.target.parentElement,a=this.filesData[this.fileList.indexOf(i)];this.retry(a)}else s.file.statusCode="1",s.file.status=this.localizedTexts("readyToUploadMessage"),this.chunkUpload(s.file)}else this.removeFiles(e),t.classList.contains(u)||this.browseButton.focus();e.preventDefault(),e.stopPropagation()}},t.prototype.getCurrentMetaData=function(e,t){var s,i;if(sf.base.isNullOrUndefined(e)){var a=t.target.parentElement;s=this.filesData[this.fileList.indexOf(a)]}else s=e;for(var r=0;r<this.uploadMetaData.length;r++)this.uploadMetaData[r].file.name===s.name&&(i=this.uploadMetaData[r]);return i},t.prototype.removeFocus=function(){this.uploadWrapper&&this.listParent&&this.listParent.querySelector(".e-clear-icon-focus")&&(document.activeElement.blur(),this.listParent.querySelector(".e-clear-icon-focus").classList.remove("e-clear-icon-focus"))},t.prototype.browseButtonClick=function(){this.element.click()},t.prototype.uploadButtonClick=function(){this.sequentialUpload?this.sequenceUpload(this.filesData):this.upload(this.filesData)},t.prototype.clearButtonClick=function(){this.clearAll(),this.sequentialUpload&&(this.count=-1),this.actionCompleteCount=0},t.prototype.bindDropEvents=function(){this.dropZoneElement&&(sf.base.EventHandler.add(this.dropZoneElement,"drop",this.dropElement,this),sf.base.EventHandler.add(this.dropZoneElement,"dragover",this.dragHover,this),sf.base.EventHandler.add(this.dropZoneElement,"dragleave",this.onDragLeave,this),sf.base.EventHandler.add(this.dropZoneElement,"paste",this.onPasteFile,this))},t.prototype.unBindDropEvents=function(){this.dropZoneElement&&(sf.base.EventHandler.remove(this.dropZoneElement,"drop",this.dropElement),sf.base.EventHandler.remove(this.dropZoneElement,"dragover",this.dragHover),sf.base.EventHandler.remove(this.dropZoneElement,"dragleave",this.onDragLeave))},t.prototype.onDragLeave=function(e){this.dropZoneElement.classList.remove("e-upload-drag-hover")},t.prototype.dragHover=function(e){this.enabled&&(this.dropZoneElement.classList.add("e-upload-drag-hover"),"Default"!==this.dropEffect&&(e.dataTransfer.dropEffect=this.dropEffect.toLowerCase()),e.preventDefault(),e.stopPropagation())},t.prototype.dropElement=function(e){this.dropZoneElement.classList.remove("e-upload-drag-hover"),this.onSelectFiles(e),e.preventDefault(),e.stopPropagation()},t.prototype.onPasteFile=function(e){var t=e.clipboardData.items;if(1===t.length){var s=[].slice.call(t)[0];"file"===s.kind&&s.type.match("^image/")&&this.renderSelectedFiles(e,[s.getAsFile()],!1,!0)}},t.prototype.getSelectedFiles=function(e){for(var t=[],s=this.fileList[e],i=this.getFilesData(),a=+s.getAttribute("data-files-count"),r=0,l=0;l<e;l++)r+=+this.fileList[l].getAttribute("data-files-count");for(var n=r;n<r+a;n++)t.push(i[n]);return t},t.prototype.removeFiles=function(e){if(this.enabled){var t=e.target.parentElement;this.isBlazorSaveUrl&&(this.fileList=[].slice.call(this.uploadWrapper.querySelectorAll("li")));var s=this.fileList.indexOf(t),i=this.fileList[s],a=this.isFormUpload(),r=a?this.getSelectedFiles(s):this.getFilesInArray(this.filesData[s]);if(!sf.base.isNullOrUndefined(r)){if(e.target.classList.contains(u)&&!a){if(r[0].statusCode="5",!sf.base.isNullOrUndefined(i)){var l=i.querySelector("."+u);sf.popups.createSpinner({target:l,width:"20px"}),sf.popups.showSpinner(l)}this.sequentialUpload&&this.uploadSequential(),i.classList.contains("e-restrict-retry")||this.checkActionComplete(!0)}else sf.base.closest(e.target,".e-spinner-pane")||this.remove(r,!1,!1,!0,e);this.element.value="",this.checkActionButtonStatus()}}},t.prototype.removeFilesData=function(e,t){var s;if(t)this.showFileList||(s=this.filesData.indexOf(e),this.filesData.splice(s,1));else{var i=this.getLiElement(e);sf.base.isNullOrUndefined(i)||(this.isBlazorSaveUrl||sf.base.detach(i),s=this.fileList.indexOf(i),this.fileList.splice(s,1),this.filesData.splice(s,1),this.isBlazorSaveUrl?this.interopAdaptor.invokeMethodAsync("removeFileData",s):(0!==this.fileList.length||sf.base.isNullOrUndefined(this.listParent)||(sf.base.detach(this.listParent),this.listParent=null,this.removeActionButtons()),this.sequentialUpload&&s<=this.count&&--this.count))}},t.prototype.removeUploadedFile=function(e,t,s,i){var a=this,r=e,l=new sf.base.Ajax(this.asyncSettings.removeUrl,"POST",!0,null);l.emitError=!1;var n=new FormData;if(l.beforeSend=function(i){t.currentRequest=l.httpRequest,sf.base.isBlazor()&&(a.currentRequestHeader&&a.updateCustomheader(l.httpRequest,a.currentRequestHeader),a.customFormDatas&&a.updateFormData(n,a.customFormDatas)),s?a.removingEventCallback(t,n,r,e):a.trigger("removing",t,(function(t){t.cancel?i.cancel=!0:a.removingEventCallback(t,n,r,e)}))},this.isServerBlazor){var o=this.element.getAttribute("name");sf.base.isNullOrUndefined(r.rawFile)||""===r.rawFile?n.append(o,r.name):n.append(o,r.rawFile,r.name)}l.onLoad=function(e){return a.removeCompleted(e,r,i),{}},l.onError=function(e){return a.removeFailed(e,r,i),{}},l.send(n)},t.prototype.removingEventCallback=function(e,t,s,i){var a=this.element.getAttribute("name"),r=this.getLiElement(i);if(!(sf.base.isNullOrUndefined(r)||sf.base.isNullOrUndefined(r.querySelector("."+o))&&sf.base.isNullOrUndefined(r.querySelector("."+n)))){var l;l=r.querySelector("."+o)?r.querySelector("."+o):r.querySelector("."+n),sf.popups.createSpinner({target:l,width:"20px"}),sf.popups.showSpinner(l)}this.isServerBlazor||(e.postRawFile&&!sf.base.isNullOrUndefined(s.rawFile)&&""!==s.rawFile?t.append(a,s.rawFile,s.name):t.append(a,s.name),this.updateFormData(t,e.customFormData))},t.prototype.updateFormData=function(e,t){if(t.length>0&&t[0])for(var s=function(s){var i=t[s],a=Object.keys(i).map((function(e){return i[e]}));e.append(Object.keys(i)[0],a)},i=0;i<t.length;i++)s(i)},t.prototype.updateCustomheader=function(e,t){if(t.length>0&&t[0])for(var s=function(s){var i=t[s],a=Object.keys(i).map((function(e){return i[e]}));e.setRequestHeader(Object.keys(i)[0],a)},i=0;i<t.length;i++)s(i)},t.prototype.removeCompleted=function(e,t,s){var i=e&&e.currentTarget?this.getResponse(e):null,a=e.target;if(4===a.readyState&&a.status>=200&&a.status<=299){var r={e:e,response:i,operation:"remove",file:this.updateStatus(t,this.localizedTexts("removedSuccessMessage"),"2")};this.trigger("success",r),this.removeFilesData(t,s);var l=this.uploadedFilesData.indexOf(t);this.uploadedFilesData.splice(l,1),this.trigger("change",{files:this.uploadedFilesData})}else this.removeFailed(e,t,s)},t.prototype.removeFailed=function(e,t,s){var i={e:e,response:e&&e.currentTarget?this.getResponse(e):null,operation:"remove",file:this.updateStatus(t,this.localizedTexts("removedFailedMessage"),"0")};if(!s){var a=this.filesData.indexOf(t),r=this.fileList[a];if(r){r.classList.remove(c),r.classList.add(f);var n=r.querySelector("."+l);n&&(n.classList.remove(c),n.classList.add(f))}this.checkActionButtonStatus()}this.trigger("failure",i);var u=this.getLiElement(t);if(!sf.base.isNullOrUndefined(u)&&!sf.base.isNullOrUndefined(u.querySelector("."+o))){var d=u.querySelector("."+o);sf.popups.hideSpinner(d),sf.base.detach(u.querySelector(".e-spinner-pane"))}},t.prototype.getFilesFromFolder=function(e){var t;if(this.filesEntries=[],t=this.multiple?e.dataTransfer.items:[e.dataTransfer.items[0]],this.checkDirectoryUpload(t))for(var s=function(s){var a=t[s].webkitGetAsEntry();if(a.isFile){var r=[];a.file((function(e){var t=a.fullPath;r.push({path:t,file:e})})),i.renderSelectedFiles(e,r,!0)}else a.isDirectory&&i.traverseFileTree(a,e)},i=this,a=0;a<t.length;a++)s(a)},t.prototype.checkDirectoryUpload=function(e){for(var t=0;e&&t<e.length;t++){if(e[t].webkitGetAsEntry().isDirectory)return!0}return!1},t.prototype.traverseFileTree=function(e,t){if(e.isFile)this.filesEntries.push(e);else if(e.isDirectory){var s=e.createReader();this.readFileFromDirectory(s,t)}},t.prototype.readFileFromDirectory=function(e,t){var s=this;e.readEntries((function(i){for(var a=0;a<i.length;a++)s.traverseFileTree(i[a]);s.pushFilesEntries(t),i.length&&s.readFileFromDirectory(e)}))},t.prototype.pushFilesEntries=function(e){for(var t=this,s=[],i=function(i){a.filesEntries[i].file((function(a){if(t.filesEntries.length){var r=t.filesEntries[i].fullPath;s.push({path:r,file:a}),i===t.filesEntries.length-1&&(t.filesEntries=[],t.renderSelectedFiles(e,s,!0))}}))},a=this,r=0;r<this.filesEntries.length;r++)i(r)},t.prototype.onSelectFiles=function(e){var t;if(this.enabled)if("drop"===e.type)if(this.directoryUpload)this.getFilesFromFolder(e);else{var s=this.sortFilesList=e.dataTransfer.files;"msie"!==this.browserName&&"edge"!==this.browserName&&(this.element.files=s),s.length>0&&(t=this.multiple?this.sortFileList(s):[s[0]],this.renderSelectedFiles(e,t))}else t=[].slice.call(e.target.files),this.renderSelectedFiles(e,t)},t.prototype.getBase64=function(e){return new Promise((function(t,s){var i=new FileReader;i.readAsDataURL(e),i.onload=function(){return t(i.result)},i.onerror=function(e){return s(e)}}))},t.prototype.renderSelectedFiles=function(e,t,s,i){var a=this;this.base64String=[];var r={event:e,cancel:!1,filesData:[],isModified:!1,modifiedFilesData:[],progressInterval:"",isCanceled:!1,currentRequest:null,customFormData:null};if(t.length<1)return r.isCanceled=!0,void this.trigger("selected",r);this.flag=!0;var l=[];this.multiple||(this.clearData(!0),t=[t[0]]);for(var n=0;n<t.length;n++){var o=s?t[n].file:t[n];this.updateInitialFileDetails(e,t,o,n,l,s,i)}r.filesData=l,this.allowedExtensions.indexOf("*")>-1&&(this.allTypes=!0),this.allTypes||(l=this.checkExtension(l)),this.trigger("selected",r,(function(e){a._internalRenderSelect(e,l)}))},t.prototype.updateInitialFileDetails=function(e,t,s,i,a,r,l){var n={name:r?t[i].path.substring(1,t[i].path.length):l?sf.base.getUniqueID(s.name.substring(0,s.name.lastIndexOf(".")))+"."+this.getFileType(s.name):this.directoryUpload?t[i].webkitRelativePath:s.name,rawFile:s,size:s.size,status:this.localizedTexts("readyToUploadMessage"),type:this.getFileType(s.name),validationMessages:this.validatedFileSize(s.size),statusCode:"1",id:sf.base.getUniqueID(s.name.substring(0,s.name.lastIndexOf(".")))+"."+this.getFileType(s.name)};l&&(n.fileSource="paste"),n.status=""!==n.validationMessages.minSize?this.localizedTexts("invalidMinFileSize"):""!==n.validationMessages.maxSize?this.localizedTexts("invalidMaxFileSize"):n.status,""===n.validationMessages.minSize&&""===n.validationMessages.maxSize||(n.statusCode="0"),a.push(n)},t.prototype._internalRenderSelect=function(e,t){if(!e.cancel){if(sf.base.isBlazor()&&(this.currentRequestHeader=e.currentRequest,this.customFormDatas=e.customFormData),this.selectedFiles=this.selectedFiles.concat(t),this.btnTabIndex=this.disableKeyboardNavigation?"-1":"0",this.showFileList){if(e.isModified&&e.modifiedFilesData.length>0){for(var s=0;s<e.modifiedFilesData.length;s++)for(var i=0;i<t.length;i++)e.modifiedFilesData[s].id===t[i].id&&(e.modifiedFilesData[s].rawFile=t[i].rawFile);var a=this.allTypes?e.modifiedFilesData:this.checkExtension(e.modifiedFilesData);this.updateSortedFileList(a),this.filesData=a,this.isForm&&!this.allowUpload()||this.checkAutoUpload(a)}else this.createFileList(t,!0),this.isBlazorSaveUrl||this.isBlazorTemplate||(this.filesData=this.filesData.concat(t)),this.isForm&&!this.allowUpload()||this.isBlazorSaveUrl||this.isBlazorTemplate||this.checkAutoUpload(t);sf.base.isNullOrUndefined(e.progressInterval)||""===e.progressInterval||(this.progressInterval=e.progressInterval)}else this.filesData=this.filesData.concat(t),this.isBlazorSaveUrl&&this.interopAdaptor.invokeMethodAsync("updateServerFileData",this.filesData,this.isForm),this.autoUpload&&this.upload(this.filesData,!0);this.raiseActionComplete(),this.isFirstFileOnSelection=!0}},t.prototype.allowUpload=function(){var e=!1;return this.isForm&&!sf.base.isNullOrUndefined(this.asyncSettings.saveUrl)&&""!==this.asyncSettings.saveUrl&&(e=!0),e},t.prototype.isFormUpload=function(){var e=!1;return!this.isForm||!sf.base.isNullOrUndefined(this.asyncSettings.saveUrl)&&""!==this.asyncSettings.saveUrl||!sf.base.isNullOrUndefined(this.asyncSettings.removeUrl)&&""!==this.asyncSettings.removeUrl||(e=!0),e},t.prototype.clearData=function(e){sf.base.isNullOrUndefined(this.listParent)||this.isBlazorSaveUrl||this.isBlazorTemplate||(sf.base.detach(this.listParent),this.listParent=null),"msie"===this.browserName||e||(this.element.value=""),this.fileList=[],this.filesData=[],this.isBlazorSaveUrl||this.isBlazorTemplate?this.interopAdaptor.invokeMethodAsync("clearAll"):this.removeActionButtons()},t.prototype.updateSortedFileList=function(e){var t=this.createElement("div",{id:"clonewrapper"}),s=-1;if(this.listParent){for(var i=0;i<this.listParent.querySelectorAll("li").length;i++){var a=this.listParent.querySelectorAll("li")[i];t.appendChild(a.cloneNode(!0))}for(var r=0,l=this.listParent.querySelectorAll("li");r<l.length;r++){var n=l[r];sf.base.detach(n)}this.removeActionButtons();var o=[].slice.call(t.childNodes);sf.base.detach(this.listParent),this.listParent=null,this.fileList=[],this.createParentUL();for(var u=0;u<e.length;u++){for(var d=0;d<this.filesData.length;d++)this.filesData[d].name===e[u].name&&(this.listParent.appendChild(o[d]),sf.base.EventHandler.add(o[d].querySelector(".e-icons"),"click",this.removeFiles,this),this.fileList.push(o[d]),s=u);s!==u&&this.createFileList([e[u]])}}else this.createFileList(e)},t.prototype.isBlank=function(e){return!e||/^\s*$/.test(e)},t.prototype.checkExtension=function(e){var t=e;if(!this.isBlank(this.allowedExtensions)){for(var s=[],i=0,a=this.allowedExtensions.split(",");i<a.length;i++){var r=a[i];s.push(r.trim().toLocaleLowerCase())}for(var l=0;l<e.length;l++)-1===s.indexOf(("."+e[l].type).toLocaleLowerCase())&&(e[l].status=this.localizedTexts("invalidFileType"),e[l].statusCode="0")}return t},t.prototype.validatedFileSize=function(e){var t="",s="";return e<this.minFileSize?t=this.localizedTexts("invalidMinFileSize"):e>this.maxFileSize?s=this.localizedTexts("invalidMaxFileSize"):(t="",s=""),{minSize:t,maxSize:s}},t.prototype.isPreLoadFile=function(e){for(var t=!1,s=0;s<this.files.length;s++)this.files[s].name===e.name.slice(0,e.name.lastIndexOf("."))&&this.files[s].type===e.type&&(t=!0);return t},t.prototype.createCustomfileList=function(e){this.createParentUL(),sf.base.resetBlazorTemplate(this.element.id+"Template","Template");for(var t=0,s=e;t<s.length;t++){var i=s[t],a=this.createElement("li",{className:r,attrs:{"data-file-name":i.name}});this.uploadTemplateFn=this.templateComplier(this.template);var l=this.uploadTemplateFn(i,this,"template",this.element.id+"Template",this.isStringTemplate,null,a);if(l){var n=[].slice.call(l);sf.base.append(n,a)}var o=e.indexOf(i),u={element:a,fileInfo:i,index:o,isPreload:this.isPreLoadFile(i)},d={element:a,fileInfo:i,index:o,isPreload:this.isPreLoadFile(i)};this.trigger("rendering",u),this.trigger("fileListRendering",d),this.listParent.appendChild(a),this.fileList.push(a)}this.renderReactTemplates(),sf.base.updateBlazorTemplate(this.element.id+"Template","Template",this,!1)},t.prototype.createParentUL=function(){sf.base.isNullOrUndefined(this.listParent)&&(this.listParent=this.createElement("ul",{className:"e-upload-files"}),this.uploadWrapper.appendChild(this.listParent))},t.prototype.formFileList=function(e,t){var s=this.createElement("li",{className:r});s.setAttribute("data-files-count",e.length+"");for(var i,a=this.createElement("span",{className:"e-file-container"}),o=0,u=e;o<u.length;o++){var d=u[o],p=this.createElement("span",{className:"e-file-name"});p.innerHTML=this.getFileNameOnly(d.name);var h=this.createElement("span",{className:"e-file-type"});if(h.innerHTML="."+this.getFileType(d.name),this.enableRtl){var c=this.createElement("span",{className:"e-rtl-container"});c.appendChild(h),c.appendChild(p),a.appendChild(c)}else a.appendChild(p),a.appendChild(h);this.truncateName(p),i=this.formValidateFileInfo(d,s)}s.appendChild(a),this.setListToFileInfo(e,s);var f=this.listParent.querySelectorAll("li").length,m=this.createElement("span");if(s.classList.contains("e-file-invalid")?(m.classList.add(l),m.classList.add("e-file-invalid"),m.innerText=e.length>1?this.localizedTexts("invalidFileSelection"):i):(m.classList.add(e.length>1?"e-file-information":"e-file-size"),m.innerText=e.length>1?this.localizedTexts("totalFiles")+": "+e.length+" , "+this.localizedTexts("size")+": "+this.bytesToSize(this.getFileSize(e)):this.bytesToSize(e[0].size),this.createFormInput(e)),a.appendChild(m),sf.base.isNullOrUndefined(s.querySelector(".e-icons"))){var b=this.createElement("span",{className:"e-icons",attrs:{tabindex:this.btnTabIndex}});"msie"===this.browserName&&b.classList.add("e-msie"),b.setAttribute("title",this.localizedTexts("remove")),s.appendChild(a),s.appendChild(b),sf.base.EventHandler.add(b,"click",this.removeFiles,this),b.classList.add(n)}var v={element:s,fileInfo:this.mergeFileInfo(e,s),index:f,isPreload:this.isPreLoadFile(this.mergeFileInfo(e,s))},y={element:s,fileInfo:this.mergeFileInfo(e,s),index:f,isPreload:this.isPreLoadFile(this.mergeFileInfo(e,s))};this.trigger("rendering",v),this.trigger("fileListRendering",y),this.listParent.appendChild(s),this.fileList.push(s)},t.prototype.formValidateFileInfo=function(e,t){var s=e.status,i=this.validatedFileSize(e.size);""===i.minSize&&""===i.maxSize||(this.addInvalidClass(t),s=""!==i.minSize?this.localizedTexts("invalidMinFileSize"):""!==i.maxSize?this.localizedTexts("invalidMaxFileSize"):s);var a=this.checkExtension(this.getFilesInArray(e))[0].status;return a===this.localizedTexts("invalidFileType")&&(this.addInvalidClass(t),s=a),s},t.prototype.addInvalidClass=function(e){e.classList.add("e-file-invalid")},t.prototype.createFormInput=function(e){var t=this.element.cloneNode(!0);t.classList.add("e-hidden-file-input");for(var s=0,i=e;s<i.length;s++){i[s].input=t}t.setAttribute("name",this.uploaderName),this.uploadWrapper.querySelector(".e-file-select").appendChild(t),"msie"!==this.browserName&&"edge"!==this.browserName&&(this.element.value="")},t.prototype.getFileSize=function(e){for(var t=0,s=0,i=e;s<i.length;s++){t+=i[s].size}return t},t.prototype.mergeFileInfo=function(e,t){for(var s={name:"",rawFile:"",size:0,status:"",type:"",validationMessages:{minSize:"",maxSize:""},statusCode:"1",list:t},i=[],a="",r=0,l=e;r<l.length;r++){var n=l[r];i.push(n.name),a=n.type}return s.name=i.join(", "),s.size=this.getFileSize(e),s.type=a,s.status=this.statusForFormUpload(e,t),s},t.prototype.statusForFormUpload=function(e,t){for(var s,i=!0,a=0,r=e;a<r.length;a++){var l=r[a];s=l.status;var n=this.validatedFileSize(l.size);""===n.minSize&&""===n.maxSize||(i=!1,s=""!==n.minSize?this.localizedTexts("invalidMinFileSize"):""!==n.maxSize?this.localizedTexts("invalidMaxFileSize"):s);var o=this.checkExtension(this.getFilesInArray(l))[0].status;o===this.localizedTexts("invalidFileType")&&(i=!1,s=o)}return i?s=this.localizedTexts("totalFiles")+": "+e.length+" , "+this.localizedTexts("size")+": "+this.bytesToSize(this.getFileSize(e)):(t.classList.add("e-file-invalid"),s=e.length>1?this.localizedTexts("invalidFileSelection"):s),s},t.prototype.formCustomFileList=function(e,t){this.createParentUL(),sf.base.resetBlazorTemplate(this.element.id+"Template","Template");var s=this.createElement("li",{className:r});s.setAttribute("data-files-count",e.length+""),this.setListToFileInfo(e,s);var i=this.mergeFileInfo(e,s);s.setAttribute("data-file-name",i.name),this.uploadTemplateFn=this.templateComplier(this.template);var a=this.uploadTemplateFn(i,this,"template",this.element.id+"Template",this.isStringTemplate,null,s);if(a){var l=[].slice.call(a);sf.base.append(l,s)}var n=this.listParent.querySelectorAll("li").length;s.classList.contains("e-file-invalid")||this.createFormInput(e);var o={element:s,fileInfo:i,index:n,isPreload:this.isPreLoadFile(i)},u={element:s,fileInfo:i,index:n,isPreload:this.isPreLoadFile(i)};this.trigger("rendering",o),this.trigger("fileListRendering",u),this.listParent.appendChild(s),this.fileList.push(s),this.renderReactTemplates(),sf.base.updateBlazorTemplate(this.element.id+"Template","Template",this,!1)},t.prototype.createFileList=function(e,t){if(this.isBlazorSaveUrl||this.isBlazorTemplate){var s=t?this.filesData=this.filesData.concat(e):e;this.interopAdaptor.invokeMethodAsync("createFileList",s,this.isForm)}else if(this.createParentUL(),""===this.template||sf.base.isNullOrUndefined(this.template))if(this.isFormUpload())this.uploadWrapper.classList.add("e-form-upload"),this.formFileList(e,this.element.files);else for(var i=0,a=e;i<a.length;i++){var u=a[i],d=this.createElement("li",{className:r,attrs:{"data-file-name":u.name,"data-files-count":"1"}}),p=this.createElement("span",{className:"e-file-container"}),h=this.createElement("span",{className:"e-file-name",attrs:{title:u.name}});h.innerHTML=this.getFileNameOnly(u.name);var f=this.createElement("span",{className:"e-file-type"});if(f.innerHTML="."+this.getFileType(u.name),this.enableRtl){var m=this.createElement("span",{className:"e-rtl-container"});m.appendChild(f),m.appendChild(h),p.appendChild(m)}else p.appendChild(h),p.appendChild(f);var b=this.createElement("span",{className:"e-file-size"});b.innerHTML=this.bytesToSize(u.size),p.appendChild(b);var v=this.createElement("span",{className:l});p.appendChild(v),v.innerHTML=u.status,d.appendChild(p);var y=this.createElement("span",{className:" e-icons",attrs:{tabindex:this.btnTabIndex}});"msie"===this.browserName&&y.classList.add("e-msie"),y.setAttribute("title",this.localizedTexts("remove")),d.appendChild(y),sf.base.EventHandler.add(y,"click",this.removeFiles,this),"2"===u.statusCode?(v.classList.add(c),y.classList.add(o),y.setAttribute("title",this.localizedTexts("delete"))):"1"!==u.statusCode&&(v.classList.remove(c),v.classList.add("e-validation-fails")),this.autoUpload&&"1"===u.statusCode&&""!==this.asyncSettings.saveUrl&&(v.innerHTML=""),y.classList.contains(o)||y.classList.add(n);var g=e.indexOf(u),S={element:d,fileInfo:u,index:g,isPreload:this.isPreLoadFile(u)},F={element:d,fileInfo:u,index:g,isPreload:this.isPreLoadFile(u)};this.trigger("rendering",S),this.trigger("fileListRendering",F),this.listParent.appendChild(d),this.fileList.push(d),this.truncateName(h);var U=this.flag;this.isPreLoadFile(u)&&(this.flag=!1,this.checkActionComplete(!0),this.flag=U)}else this.isFormUpload()?(this.uploadWrapper.classList.add("e-form-upload"),this.formCustomFileList(e,this.element.files)):this.createCustomfileList(e)},t.prototype.getSlicedName=function(e){var t;t=e.textContent,e.dataset.tail=t.slice(t.length-10)},t.prototype.setListToFileInfo=function(e,t){for(var s=0,i=e;s<i.length;s++){i[s].list=t}},t.prototype.truncateName=function(e){var t=e;("edge"!==this.browserName&&t.offsetWidth<t.scrollWidth||t.offsetWidth+1<t.scrollWidth)&&this.getSlicedName(t)},t.prototype.getFileType=function(e){var t,s=e.lastIndexOf(".");return s>=0&&(t=e.substring(s+1)),t||""},t.prototype.getFileNameOnly=function(e){var t=this.getFileType(e);return e.split("."+t)[0]},t.prototype.setInitialAttributes=function(){if(this.initialAttr.accept&&this.element.setAttribute("accept",this.initialAttr.accept),this.initialAttr.disabled&&this.element.setAttribute("disabled","disabled"),this.initialAttr.multiple){var e=document.createAttribute("multiple");this.element.setAttributeNode(e)}},t.prototype.filterfileList=function(e){for(var t=[],s=0;s<e.length;s++)this.getLiElement(e[s]).classList.contains(c)||t.push(e[s]);return t},t.prototype.updateStatus=function(e,t,s,i){if(void 0===i&&(i=!0),""!==t&&!sf.base.isNullOrUndefined(t)&&""!==s&&!sf.base.isNullOrUndefined(s))if(this.isBlazorSaveUrl)for(var a=0;a<this.filesData.length;a++)this.filesData[a].name===e.name&&(this.filesData[a].status=t,this.filesData[a].statusCode=s);else e.status=t,e.statusCode=s;if(i){var r=this.getLiElement(e);sf.base.isNullOrUndefined(r)||sf.base.isNullOrUndefined(r.querySelector("."+l))||""===t||sf.base.isNullOrUndefined(t)||(r.querySelector("."+l).textContent=t)}return e},t.prototype.getLiElement=function(e){for(var t,s=0;s<this.filesData.length;s++)(sf.base.isNullOrUndefined(this.filesData[s].id)||sf.base.isNullOrUndefined(e.id)?this.filesData[s].name===e.name:this.filesData[s].name===e.name&&this.filesData[s].id===e.id)&&(t=s);return this.fileList[t]},t.prototype.createProgressBar=function(e){var t=this.createElement("span",{className:p}),s=this.createElement("progressbar",{className:h,attrs:{value:"0",max:"100"}}),i=this.createElement("span",{className:"e-progress-inner-wrap"});s.setAttribute("style","width: 0%");var a=this.createElement("span",{className:"e-progress-bar-text"});a.textContent="0%",i.appendChild(s),t.appendChild(i),t.appendChild(a),e.querySelector(".e-file-container").appendChild(t)},t.prototype.updateProgressbar=function(e,t){if(!isNaN(Math.round(e.loaded/e.total*100))&&!sf.base.isNullOrUndefined(t.querySelector("."+h)))if(sf.base.isNullOrUndefined(this.progressInterval)||""===this.progressInterval)this.changeProgressValue(t,Math.round(e.loaded/e.total*100).toString()+"%");else{var s=Math.round(e.loaded/e.total*100)%parseInt(this.progressInterval,10);0!==s&&100!==s||this.changeProgressValue(t,Math.round(e.loaded/e.total*100).toString()+"%")}},t.prototype.changeProgressValue=function(e,t){e.querySelector("."+h).setAttribute("style","width:"+t),e.querySelector(".e-progress-bar-text").textContent=t},t.prototype.uploadInProgress=function(e,t,s,i){var a=this.getLiElement(t);if(!sf.base.isNullOrUndefined(a)||s){if(sf.base.isNullOrUndefined(a))this.cancelUploadingFile(t,e,i);else{"5"===t.statusCode&&this.cancelUploadingFile(t,e,i,a),a.querySelectorAll("."+p).length>0||!a.querySelector("."+l)||(a.querySelector("."+l).classList.add("e-upload-progress"),this.createProgressBar(a),this.updateProgressBarClasses(a,"e-upload-progress"),a.querySelector("."+l).classList.remove(f)),this.updateProgressbar(e,a);var r=a.querySelector("."+n);sf.base.isNullOrUndefined(r)||(r.classList.add(u,"e-upload-progress"),r.setAttribute("title",this.localizedTexts("abort")),r.classList.remove(n))}var o={e:e,operation:"upload",file:this.updateStatus(t,this.localizedTexts("inProgress"),"3")};this.trigger("progress",o)}},t.prototype.cancelUploadingFile=function(e,t,s,i){var a=this;if("5"===e.statusCode){var r={event:t,fileData:e,cancel:!1,customFormData:[]};this.trigger("canceling",r,(function(t){if(t.cancel){if(e.statusCode="3",!sf.base.isNullOrUndefined(i)){var r=i.querySelector("."+u);sf.base.isNullOrUndefined(r)||(sf.popups.hideSpinner(r),sf.base.detach(i.querySelector(".e-spinner-pane")))}}else{s.emitError=!1,s.httpRequest.abort();var l=new FormData;if("5"===e.statusCode){var n=a.element.getAttribute("name");l.append(n,e.name),l.append("cancel-uploading",e.name),a.updateFormData(l,t.customFormData);var o=new sf.base.Ajax(a.asyncSettings.removeUrl,"POST",!0,null);o.emitError=!1,o.onLoad=function(t){return a.removecanceledFile(t,e),{}},o.send(l)}}}))}},t.prototype.removecanceledFile=function(e,t){var s=this.getLiElement(t);if(!s.querySelector("."+d)&&!sf.base.isNullOrUndefined(s.querySelector("."+u))){this.updateStatus(t,this.localizedTexts("fileUploadCancel"),"5"),this.renderFailureState(e,t,s);var i=s.querySelector("."+n);sf.base.isNullOrUndefined(s)||(sf.popups.hideSpinner(i),sf.base.detach(s.querySelector(".e-spinner-pane")));var a={event:e,response:e&&e.currentTarget?this.getResponse(e):null,operation:"cancel",file:t};this.trigger("success",a)}},t.prototype.renderFailureState=function(e,t,s){var i=this;this.updateProgressBarClasses(s,f),this.removeProgressbar(s,"failure"),sf.base.isNullOrUndefined(s.querySelector(".e-file-status"))||s.querySelector(".e-file-status").classList.add(f);var a=s.querySelector("."+u);sf.base.isNullOrUndefined(a)||(a.classList.remove(u,"e-upload-progress"),a.classList.add(n),a.setAttribute("title",this.localizedTexts("remove")),this.pauseButton=this.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}}),a.parentElement.insertBefore(this.pauseButton,a),this.pauseButton.setAttribute("title",this.localizedTexts("retry")),s.querySelector("."+d).addEventListener("click",(function(e){i.reloadcanceledFile(e,t,s,!1)}),!1))},t.prototype.reloadcanceledFile=function(e,t,s,i){t.statusCode="1",t.status=this.localizedTexts("readyToUploadMessage"),i||(s.querySelector("."+l).classList.remove(f),sf.base.isNullOrUndefined(s.querySelector("."+d))||sf.base.detach(s.querySelector("."+d)),this.pauseButton=null),s.classList.add("e-restrict-retry"),this.upload([t])},t.prototype.uploadComplete=function(e,t,s){var i=e.target;if(4===i.readyState&&i.status>=200&&i.status<=299){var a=this.getLiElement(t);if(sf.base.isNullOrUndefined(a)&&(!s||sf.base.isNullOrUndefined(s)))return;if(!sf.base.isNullOrUndefined(a)){this.updateProgressBarClasses(a,c),this.removeProgressbar(a,"success");var r=a.querySelector("."+u);sf.base.isNullOrUndefined(r)||(r.classList.add(o),r.setAttribute("title",this.localizedTexts("delete")),r.classList.remove(u),r.classList.remove("e-upload-progress"))}this.raiseSuccessEvent(e,t)}else this.uploadFailed(e,t)},t.prototype.getResponse=function(e){var t=e.currentTarget;return{readyState:t.readyState,statusCode:t.status,statusText:t.statusText,headers:t.getAllResponseHeaders(),withCredentials:t.withCredentials}},t.prototype.serverRemoveIconBindEvent=function(){if(this.uploadWrapper&&this.isBlazorSaveUrl)for(var e=[].slice.call(this.uploadWrapper.querySelectorAll("ul li")),t=0;t<e.length;t++){var s=e[t]?e[t].querySelector(".e-icons"):null;s&&(sf.base.EventHandler.remove(s,"click",this.removeFiles),sf.base.EventHandler.add(s,"click",this.removeFiles,this))}},t.prototype.raiseSuccessEvent=function(e,t){var s=this,i=e&&e.currentTarget?this.getResponse(e):null,a=this.localizedTexts("uploadSuccessMessage"),r={e:e,response:i,operation:"upload",file:this.updateStatus(t,a,"2",!1),statusText:a};if(!this.isBlazorSaveUrl){var l=this.getLiElement(t);if(!sf.base.isNullOrUndefined(l)){var n=l.querySelector(".e-spinner-pane");sf.base.isNullOrUndefined(n)||(sf.popups.hideSpinner(l),sf.base.detach(n))}}this.trigger("success",r,(function(e){s.updateStatus(t,e.statusText,"2"),s.uploadedFilesData.push(t),s.isBlazorSaveUrl||s.trigger("change",{file:s.uploadedFilesData}),s.checkActionButtonStatus(),s.fileList.length>0&&(s.getLiElement(t).classList.contains("e-restrict-retry")?s.getLiElement(t).classList.remove("e-restrict-retry"):(s.uploadSequential(),s.checkActionComplete(!0)))}))},t.prototype.uploadFailed=function(e,t){var s=this,i=this.getLiElement(t),a=e&&e.currentTarget?this.getResponse(e):null,r=this.localizedTexts("uploadFailedMessage"),l={e:e,response:a,operation:"upload",file:this.updateStatus(t,r,"0",!1),statusText:r};sf.base.isNullOrUndefined(i)||this.renderFailureState(e,t,i),this.trigger("failure",l,(function(e){s.updateStatus(t,e.statusText,"0"),s.checkActionButtonStatus(),s.uploadSequential(),s.checkActionComplete(!0)}))},t.prototype.uploadSequential=function(){this.sequentialUpload&&(this.autoUpload?this.checkAutoUpload(this.filesData):this.uploadButtonClick())},t.prototype.checkActionComplete=function(e){e?++this.actionCompleteCount:--this.actionCompleteCount,this.raiseActionComplete()},t.prototype.raiseActionComplete=function(){if(this.filesData.length===this.actionCompleteCount&&this.flag){this.flag=!1;var e={fileData:[]};e.fileData=this.getSelectedFileStatus(this.selectedFiles),this.trigger("actionComplete",e)}},t.prototype.getSelectedFileStatus=function(e){for(var t=[],s=0,i=0;i<e.length;i++)for(var a=e[i],r=0;r<this.filesData.length;r++)this.filesData[r].name===a.name&&(t[s]=this.filesData[r],++s);return t},t.prototype.updateProgressBarClasses=function(e,t){var s=e.querySelector("."+h);sf.base.isNullOrUndefined(s)||s.classList.add(t)},t.prototype.removeProgressbar=function(e,t){var s=this;sf.base.isNullOrUndefined(e.querySelector("."+p))||(this.progressAnimation=new sf.base.Animation({duration:1250}),this.progressAnimation.animate(e.querySelector("."+p),{name:"FadeOut"}),this.progressAnimation.animate(e.querySelector(".e-progress-bar-text"),{name:"FadeOut"}),setTimeout((function(){s.animateProgressBar(e,t)}),750))},t.prototype.animateProgressBar=function(e,t){"success"===t?(e.classList.add(c),sf.base.isNullOrUndefined(e.querySelector("."+l))||(e.querySelector("."+l).classList.remove("e-upload-progress"),this.progressAnimation.animate(e.querySelector("."+l),{name:"FadeIn"}),e.querySelector("."+l).classList.add(c))):sf.base.isNullOrUndefined(e.querySelector("."+l))||(e.querySelector("."+l).classList.remove("e-upload-progress"),this.progressAnimation.animate(e.querySelector("."+l),{name:"FadeIn"}),e.querySelector("."+l).classList.add(f)),e.querySelector("."+p)&&sf.base.detach(e.querySelector("."+p))},t.prototype.setExtensions=function(e){""===e||sf.base.isNullOrUndefined(e)?this.element.removeAttribute("accept"):this.element.setAttribute("accept",e)},t.prototype.templateComplier=function(e){if(e)try{if(sf.base.selectAll(e,document).length)return sf.base.compile(sf.base.select(e,document).innerHTML.trim())}catch(t){return sf.base.compile(e)}},t.prototype.setRTL=function(){this.enableRtl?sf.base.addClass([this.uploadWrapper],"e-rtl"):sf.base.removeClass([this.uploadWrapper],"e-rtl")},t.prototype.localizedTexts=function(e){return this.l10n.setLocale(this.locale),this.l10n.getConstant(e)},t.prototype.setControlStatus=function(){this.enabled?(this.uploadWrapper.classList.contains("e-disabled")&&this.uploadWrapper.classList.remove("e-disabled"),!sf.base.isNullOrUndefined(this.browseButton)&&this.element.hasAttribute("disabled")&&(this.element.removeAttribute("disabled"),this.browseButton.removeAttribute("disabled")),!sf.base.isNullOrUndefined(this.clearButton)&&this.clearButton.hasAttribute("disabled")&&this.clearButton.removeAttribute("disabled"),!sf.base.isNullOrUndefined(this.uploadButton)&&this.uploadButton.hasAttribute("disabled")&&this.uploadButton.hasAttribute("disabled")):(this.uploadWrapper.classList.add("e-disabled"),this.element.setAttribute("disabled","disabled"),this.browseButton.setAttribute("disabled","disabled"),sf.base.isNullOrUndefined(this.clearButton)||this.clearButton.setAttribute("disabled","disabled"),sf.base.isNullOrUndefined(this.uploadButton)||this.uploadButton.setAttribute("disabled","disabled"))},t.prototype.checkHTMLAttributes=function(e){for(var t=0,s=e?sf.base.isNullOrUndefined(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["accept","multiple","disabled"];t<s.length;t++){var i=s[t];if(!sf.base.isNullOrUndefined(this.element.getAttribute(i)))switch(i){case"accept":(sf.base.isNullOrUndefined(this.uploaderOptions)||void 0===this.uploaderOptions.allowedExtensions||e)&&(this.setProperties({allowedExtensions:this.element.getAttribute("accept")},!e),this.initialAttr.accept=this.allowedExtensions);break;case"multiple":if(sf.base.isNullOrUndefined(this.uploaderOptions)||void 0===this.uploaderOptions.multiple||e){var a="multiple"===this.element.getAttribute(i)||""===this.element.getAttribute(i)||"true"===this.element.getAttribute(i);this.setProperties({multiple:a},!e),this.initialAttr.multiple=!0}break;case"disabled":if(sf.base.isNullOrUndefined(this.uploaderOptions)||void 0===this.uploaderOptions.enabled||e){var r="disabled"!==this.element.getAttribute(i)&&""!==this.element.getAttribute(i)&&"true"!==this.element.getAttribute(i);this.setProperties({enabled:r},!e),this.initialAttr.disabled=!0}}}},t.prototype.chunkUpload=function(e,t,s){var i=Math.min(this.asyncSettings.chunkSize,e.size),a={chunkIndex:0,blob:e.rawFile.slice(0,i),file:e,start:0,end:i,retryCount:0,request:null};this.sendRequest(e,a,t,s)},t.prototype.sendRequest=function(e,t,s,i){var a=this,r=new FormData,l=e.rawFile.slice(t.start,t.end);r.append("chunkFile",l,e.name),r.append(this.uploaderName,l,e.name),r.append("chunk-index",t.chunkIndex.toString()),r.append("chunkIndex",t.chunkIndex.toString());var n=Math.max(Math.ceil(e.size/this.asyncSettings.chunkSize),1);r.append("total-chunk",n.toString()),r.append("totalChunk",n.toString());var o=new sf.base.Ajax({url:this.asyncSettings.saveUrl,type:"POST",async:!0,contentType:null});o.emitError=!1,o.onLoad=function(e){return a.chunkUploadComplete(e,t,s),{}},o.onUploadProgress=function(e){return a.chunkUploadInProgress(e,t,s),{}};var u={fileData:e,customFormData:[],cancel:!1,chunkSize:0===this.asyncSettings.chunkSize?null:this.asyncSettings.chunkSize};o.beforeSend=function(s){u.currentRequest=o.httpRequest,u.currentChunkIndex=t.chunkIndex,sf.base.isBlazor()&&(a.currentRequestHeader&&a.updateCustomheader(o.httpRequest,a.currentRequestHeader),a.customFormDatas&&a.updateFormData(r,a.customFormDatas)),0===u.currentChunkIndex?a.trigger("uploading",u,(function(t){a.uploadingEventCallback(r,t,s,e)})):a.trigger("chunkUploading",u,(function(t){a.uploadingEventCallback(r,t,s,e)}))},o.onError=function(e){return a.chunkUploadFailed(e,t,s),{}},o.send(r),t.request=o},t.prototype.uploadingEventCallback=function(e,t,s,i){t.cancel?this.eventCancelByArgs(s,t,i):this.updateFormData(e,t.customFormData)},t.prototype.eventCancelByArgs=function(e,t,s){var i=this;if(e.cancel=!0,"5"!==t.fileData.statusCode){t.fileData.statusCode="5",t.fileData.status=this.localizedTexts("fileUploadCancel");var a=this.getLiElement(t.fileData);if(a){sf.base.isNullOrUndefined(a.querySelector("."+l))||(a.querySelector("."+l).innerHTML=this.localizedTexts("fileUploadCancel"),a.querySelector("."+l).classList.add(f)),this.pauseButton=this.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}});var r=a.querySelector("."+n);r&&r.parentElement.insertBefore(this.pauseButton,r),this.pauseButton.setAttribute("title",this.localizedTexts("retry")),this.pauseButton.addEventListener("click",(function(e){i.reloadcanceledFile(e,s,a)}),!1),this.checkActionButtonStatus()}}},t.prototype.checkChunkUpload=function(){return!(this.asyncSettings.chunkSize<=0||sf.base.isNullOrUndefined(this.asyncSettings.chunkSize))},t.prototype.chunkUploadComplete=function(e,t,s){var i,a=this,r=e.target;if(4===r.readyState&&r.status>=200&&r.status<300){var l=e&&e.currentTarget?this.getResponse(e):null,n=Math.max(Math.ceil(t.file.size/this.asyncSettings.chunkSize),1),o={event:e,file:t.file,chunkIndex:t.chunkIndex,totalChunk:n,chunkSize:this.asyncSettings.chunkSize,response:l};if(this.trigger("chunkSuccess",o),!sf.base.isNullOrUndefined(s)&&s||(i=this.getLiElement(t.file)),this.updateMetaData(t),t.end===t.file.size&&(t.file.statusCode="3"),"5"===t.file.statusCode){var d={event:e,fileData:t.file,cancel:!1,customFormData:[]};this.trigger("canceling",d,(function(e){if(e.cancel){t.file.statusCode="3";var l=i.querySelector("."+u);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(l)||(sf.popups.hideSpinner(l),sf.base.detach(i.querySelector(".e-spinner-pane"))),a.sendNextRequest(t)}else{t.request.emitError=!1,r.abort();var n=new FormData,o=a.element.getAttribute("name");n.append(o,t.file.name),n.append("cancel-uploading",t.file.name),n.append("cancelUploading",t.file.name),a.updateFormData(n,e.customFormData);var d=new sf.base.Ajax(a.asyncSettings.removeUrl,"POST",!0,null);d.emitError=!1,d.onLoad=function(e){return a.removeChunkFile(e,t,s),{}},d.send(n)}}))}else{if(n-1===t.chunkIndex&&n>t.chunkIndex){var p=this.pausedData.indexOf(t);return p>=0&&this.pausedData.splice(p,1),sf.base.isNullOrUndefined(this.template)&&(sf.base.isNullOrUndefined(s)||!s)&&i&&(i&&sf.base.detach(i.querySelector("."+m)),this.removeChunkProgressBar(t)),void this.raiseSuccessEvent(e,t.file)}this.sendNextRequest(t)}}else this.chunkUploadFailed(e,t)},t.prototype.sendNextRequest=function(e){e.start=e.end,e.end+=this.asyncSettings.chunkSize,e.end=Math.min(e.end,e.file.size),e.chunkIndex+=1,this.sendRequest(e.file,e)},t.prototype.removeChunkFile=function(e,t,s){if(sf.base.isNullOrUndefined(this.template)&&sf.base.isNullOrUndefined(s)&&!s){var i=this.getLiElement(t.file),a=i.querySelector("."+u),r=a;this.updateStatus(t.file,this.localizedTexts("fileUploadCancel"),"5"),this.updateProgressBarClasses(i,f),this.removeProgressbar(i,"failure"),a.classList.remove(u),a.classList.add(n),a.setAttribute("title",this.localizedTexts("remove"));var l=i.querySelector("."+m);l.classList.add(d),l.classList.remove(m),l.setAttribute("title",this.localizedTexts("retry")),sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(a)||(sf.popups.hideSpinner(r),sf.base.detach(i.querySelector(".e-spinner-pane")))}},t.prototype.pauseUpload=function(e,t,s){e.file.statusCode="4",e.file.status=this.localizedTexts("pause"),this.updateMetaData(e);var i={event:t||null,file:e.file,chunkIndex:e.chunkIndex,chunkCount:Math.round(e.file.size/this.asyncSettings.chunkSize),chunkSize:this.asyncSettings.chunkSize};this.abortUpload(e,s,i)},t.prototype.abortUpload=function(e,t,s){e.request.emitError=!1,e.request.httpRequest.abort();var i=this.getLiElement(e.file);if(sf.base.isNullOrUndefined(this.template)&&(sf.base.isNullOrUndefined(t)||!t)){var a=i.querySelector("."+m);a.classList.remove(m),a.classList.add("e-file-play-btn"),a.setAttribute("title",this.localizedTexts("resume")),a.nextElementSibling.classList.add(n),a.nextElementSibling.classList.remove(u),a.nextElementSibling.setAttribute("title",this.localizedTexts("remove"))}for(var r=0;r<this.pausedData.length;r++)this.pausedData[r].file.name===e.file.name&&this.pausedData.splice(r,1);this.pausedData.push(e),this.trigger("pausing",s)},t.prototype.resumeUpload=function(e,t,s){var i,a=this.getLiElement(e.file);sf.base.isNullOrUndefined(a)||(i=a.querySelector(".e-file-play-btn")),sf.base.isNullOrUndefined(i)||!sf.base.isNullOrUndefined(s)&&s||(i.classList.remove("e-file-play-btn"),i.classList.add(m),i.setAttribute("title",this.localizedTexts("pause")),i.nextElementSibling.classList.remove(n),i.nextElementSibling.classList.add(u),i.nextElementSibling.setAttribute("title",this.localizedTexts("abort"))),e.file.status=this.localizedTexts("inProgress"),e.file.statusCode="3",this.updateMetaData(e);var r={event:t||null,file:e.file,chunkIndex:e.chunkIndex,chunkCount:Math.round(e.file.size/this.asyncSettings.chunkSize),chunkSize:this.asyncSettings.chunkSize};this.trigger("resuming",r);for(var l=0;l<this.pausedData.length;l++)this.pausedData[l].end===this.pausedData[l].file.size?this.chunkUploadComplete(t,e,s):this.pausedData[l].file.name===e.file.name&&(this.pausedData[l].start=this.pausedData[l].end,this.pausedData[l].end=this.pausedData[l].end+this.asyncSettings.chunkSize,this.pausedData[l].end=Math.min(this.pausedData[l].end,this.pausedData[l].file.size),this.pausedData[l].chunkIndex=this.pausedData[l].chunkIndex+1,this.sendRequest(this.pausedData[l].file,this.pausedData[l],s))},t.prototype.updateMetaData=function(e){-1===this.uploadMetaData.indexOf(e)||this.uploadMetaData.splice(this.uploadMetaData.indexOf(e),1),this.uploadMetaData.push(e)},t.prototype.removeChunkProgressBar=function(e){var t=this.getLiElement(e.file);if(!sf.base.isNullOrUndefined(t)){this.updateProgressBarClasses(t,c),this.removeProgressbar(t,"success");var s=t.querySelector("."+u);sf.base.isNullOrUndefined(s)||(s.classList.add(o),s.setAttribute("title",this.localizedTexts("delete")),s.classList.remove(u,"e-upload-progress"))}},t.prototype.chunkUploadFailed=function(e,t,s){var i,a=this,r=Math.max(Math.ceil(t.file.size/this.asyncSettings.chunkSize),1);!sf.base.isNullOrUndefined(this.template)||!sf.base.isNullOrUndefined(s)&&s||(i=this.getLiElement(t.file));var l=e&&e.currentTarget?this.getResponse(e):null,p={event:e,file:t.file,chunkIndex:t.chunkIndex,totalChunk:r,chunkSize:this.asyncSettings.chunkSize,cancel:!1,response:l};this.trigger("chunkFailure",p,(function(r){if(!r.cancel)if(t.retryCount<a.asyncSettings.retryCount)setTimeout((function(){a.retryRequest(i,t,s)}),a.asyncSettings.retryAfterDelay);else{if(!sf.base.isNullOrUndefined(i)){var p=i.querySelector("."+m)?i.querySelector("."+m):i.querySelector(".e-file-play-btn");sf.base.isNullOrUndefined(p)||(p.classList.add(d),p.classList.remove(m,"e-file-play-btn")),a.updateProgressBarClasses(i,f),a.removeProgressbar(i,"failure"),i.querySelector(".e-icons").classList.remove("e-upload-progress");var h=i.querySelector("."+u)?i.querySelector("."+u):i.querySelector("."+n);h.classList.remove(u),sf.base.isNullOrUndefined(i.querySelector("."+m))||sf.base.detach(i.querySelector("."+m)),t.start>0?(h.classList.add(o),h.setAttribute("title",a.localizedTexts("delete"))):(h.classList.add(n),h.setAttribute("title",a.localizedTexts("remove")))}t.retryCount=0;var c=t.file,b=a.localizedTexts("uploadFailedMessage"),v={e:e,response:l,operation:"upload",file:a.updateStatus(c,b,"0",!1),statusText:b};a.trigger("failure",v,(function(e){a.updateStatus(c,e.statusText,"0"),a.uploadSequential(),a.checkActionComplete(!0)}))}}))},t.prototype.retryRequest=function(e,t,s){sf.base.isNullOrUndefined(this.template)&&(sf.base.isNullOrUndefined(s)||!s)&&e&&this.updateProgressBarClasses(e,f),t.retryCount+=1,this.sendRequest(t.file,t)},t.prototype.checkPausePlayAction=function(e){var t=e.target,s=e.target.parentElement,i=this.fileList.indexOf(s),a=this.filesData[i],r=this.getCurrentMetaData(a);t.classList.contains(m)?this.pauseUpload(r,e):t.classList.contains("e-file-play-btn")?this.resumeUpload(r,e):t.classList.contains(d)&&(r.file.status===this.localizedTexts("fileUploadCancel")?this.retryUpload(r,!1):this.retryUpload(r,!0))},t.prototype.retryUpload=function(e,t){t?(e.end=e.end+this.asyncSettings.chunkSize,e.start=e.start+this.asyncSettings.chunkSize,this.sendRequest(e.file,e)):(e.file.statusCode="1",e.file.status=this.localizedTexts("readyToUploadMessage"),this.chunkUpload(e.file)),this.getLiElement(e.file).classList.add("e-restrict-retry")},t.prototype.chunkUploadInProgress=function(e,t,s){var i=this;if("4"!==t.file.statusCode){"4"!==t.file.statusCode&&"5"!==t.file.statusCode&&(t.file.statusCode="3",t.file.status=this.localizedTexts("inProgress")),this.updateMetaData(t);var a=this.getLiElement(t.file);if(!sf.base.isNullOrUndefined(a)){var r=a.querySelector("."+d);if(sf.base.isNullOrUndefined(r)||(r.classList.add(m),r.setAttribute("title",this.localizedTexts("pause")),r.classList.remove(d)),!sf.base.isNullOrUndefined(a)){if(!(a.querySelectorAll("."+p).length>0)){var h=a.querySelector("."+l);sf.base.isNullOrUndefined(this.template)&&(h.classList.add("e-upload-progress"),h.classList.remove(f),this.createProgressBar(a),this.updateProgressBarClasses(a,"e-upload-progress"));var c=a.querySelector("."+n)?a.querySelector("."+n):a.querySelector("."+o);sf.base.isNullOrUndefined(c)||(c.classList.add(u),c.setAttribute("title",this.localizedTexts("abort")),c.classList.remove(n))}if(!isNaN(Math.round(e.loaded/e.total*100))&&sf.base.isNullOrUndefined(this.template)&&"4"!==t.file.statusCode){var b=t.chunkIndex*this.asyncSettings.chunkSize,v=e.loaded;v>this.asyncSettings.chunkSize&&(v=this.asyncSettings.chunkSize);var y=Math.min((b+v)/t.file.size*100,100);this.changeProgressValue(a,Math.round(y).toString()+"%")}0===t.chunkIndex&&this.checkActionButtonStatus()}if(sf.base.isNullOrUndefined(a.querySelector("."+m))&&sf.base.isNullOrUndefined(this.template)){this.pauseButton=this.createElement("span",{className:"e-icons e-file-pause-btn",attrs:{tabindex:this.btnTabIndex}}),"msie"===this.browserName&&this.pauseButton.classList.add("e-msie");var g=a.querySelector("."+u);g.parentElement.insertBefore(this.pauseButton,g),this.pauseButton.setAttribute("title",this.localizedTexts("pause")),this.pauseButton.addEventListener("click",(function(e){i.checkPausePlayAction(e)}),!1)}}}},t.prototype.bytesToSize=function(e){var t=-1;if(!e)return"0.0 KB";do{e/=1024,t++}while(e>99);return t>=2&&(e*=1024,t=1),Math.max(e,0).toFixed(1)+" "+["KB","MB"][t]},t.prototype.sortFileList=function(e){for(var t=e=e||this.sortFilesList,s=[],i=0;i<t.length;i++)s.push(t[i].name);for(var a=[],r=0,l=s.sort();r<l.length;r++){var n=l[r];for(i=0;i<t.length;i++)n===t[i].name&&a.push(t[i])}return a},t.prototype.destroy=function(){this.element.value=null,this.clearTemplate(),this.isBlazorSaveUrl||this.isBlazorTemplate||this.clearAll(),this.unWireEvents(),this.unBindDropEvents(),this.multiple&&this.element.removeAttribute("multiple"),this.enabled||this.element.removeAttribute("disabled"),this.element.removeAttribute("accept"),this.setInitialAttributes();for(var t=0,s=["aria-label","directory","webkitdirectory","tabindex"];t<s.length;t++){var i=s[t];this.element.removeAttribute(i)}this.isServerBlazor?this.uploadWrapper=null:(sf.base.isNullOrUndefined(this.uploadWrapper)||(this.uploadWrapper.parentElement.appendChild(this.element),sf.base.detach(this.uploadWrapper)),this.uploadWrapper=null,e.prototype.destroy.call(this))},t.prototype.upload=function(e,t){var s=this;if(e=e||this.filesData,this.sequentialUpload&&(this.isFirstFileOnSelection||t))this.sequenceUpload(e);else{var i=this.getFilesInArray(e);this.trigger("beforeUpload",{customFormData:[],currentRequest:null,cancel:!1},(function(e){e.cancel||(sf.base.isBlazor()&&(s.currentRequestHeader=e.currentRequest?e.currentRequest:s.currentRequestHeader,s.customFormDatas=e.customFormData&&e.customFormData.length>0?e.customFormData:s.customFormDatas),s.uploadFiles(i,t))}))}},t.prototype.getFilesInArray=function(e){var t=[];return e instanceof Array?t=e:t.push(e),t},t.prototype.serverReadFileBase64=function(e,t,s){var i=this;return new Promise((function(a,r){var l,n=i.fileStreams[e].rawFile;try{var o=new FileReader;o.onload=(l=o,function(){try{var e=l.result,t=e?e.split(";base64,")[1]:null;a(t)}catch(e){r(e)}}),o.readAsDataURL(n.slice(t,t+s))}catch(e){r(e)}}))},t.prototype.uploadFileCount=function(e){var t=this.filesData;return t&&0!==t.length?t.length:-1},t.prototype.getFileRead=function(e,t){var s=this.filesData;if(!s||0===s.length)return-1;var i=s[e],a=this.newFileRef++;return this.fileStreams[a]=i,a},t.prototype.getFileInfo=function(e,t){var s=this.filesData;return s&&0!==s.length&&s[e]?this.filesData[e]:null},t.prototype.uploadFiles=function(e,t){var s=this,i=[];if(""===this.asyncSettings.saveUrl||sf.base.isNullOrUndefined(this.asyncSettings.saveUrl))this.isServerBlazor&&this.interopAdaptor.invokeMethodAsync("GetFileDetails",e);else{if(!t||sf.base.isNullOrUndefined(t))if(this.multiple)i=this.filterfileList(e);else{var a=[];a.push(e[0]),i=this.filterfileList(a)}else i=e;for(var r=function(e){l.isServerBlazor&&!l.checkChunkUpload()?i[e]&&i[e].rawFile instanceof File&&l.getBase64(i[e].rawFile).then((function(a){s.base64String.push(a),s.uploadFilesRequest(i,e,t)})):l.uploadFilesRequest(i,e,t)},l=this,n=0;n<i.length;n++)r(n)}},t.prototype.uploadFilesRequest=function(e,t,s){var i,a=this,r=[],l=this.checkChunkUpload(),n=new sf.base.Ajax(this.asyncSettings.saveUrl,"POST",!0,null);n.emitError=!1,this.isServerBlazor&&(i=e.slice(0),r.push(i[t].rawFile));var o={fileData:this.isServerBlazor?i[t]:e[t],customFormData:[],cancel:!1},u=new FormData;if(n.beforeSend=function(s){o.currentRequest=n.httpRequest,sf.base.isBlazor()&&(o.fileData.rawFile=l?o.fileData.rawFile:a.base64String[t],a.currentRequestHeader&&a.updateCustomheader(n.httpRequest,a.currentRequestHeader),a.customFormDatas&&a.updateFormData(u,a.customFormDatas)),a.trigger("uploading",o,(function(i){a.isServerBlazor&&!l&&(e[t].rawFile=i.fileData.rawFile=r[t]),i.cancel&&a.eventCancelByArgs(s,i,e[t]),a.updateFormData(u,i.customFormData)}))},"1"===e[t].statusCode){var d=this.element.getAttribute("name");u.append(d,e[t].rawFile,e[t].name),l&&e[t].size>this.asyncSettings.chunkSize?this.chunkUpload(e[t],s,t):(n.onLoad=function(i){return o.cancel&&a.isServerBlazor||a.uploadComplete(i,e[t],s),{}},n.onUploadProgress=function(i){return o.cancel&&a.isServerBlazor||a.uploadInProgress(i,e[t],s,n),{}},n.onError=function(s){return a.uploadFailed(s,e[t]),{}},n.send(u))}},t.prototype.spliceFiles=function(e){for(var t=this.fileList[e],s=this.getFilesData(),i=+t.getAttribute("data-files-count"),a=0,r=0;r<e;r++)a+=+this.fileList[r].getAttribute("data-files-count");for(var l=a+i-1;l>=a;l--)s.splice(l,1)},t.prototype.remove=function(e,t,s,i,a){var r=this;sf.base.isNullOrUndefined(i)&&(i=!0);var l={event:a,cancel:!1,filesData:[],customFormData:[],postRawFile:i,currentRequest:null};this.trigger("beforeRemove",{cancel:!1,customFormData:[],currentRequest:null},(function(i){if(!i.cancel){sf.base.isBlazor()&&(r.currentRequestHeader=i.currentRequest,r.customFormDatas=i.customFormData);if(r.isFormUpload()&&!r.isBlazorSaveUrl)l.filesData=e,r.trigger("removing",l,(function(t){if(!t.cancel)for(var s=!1,i=void 0,a=0,l=r.getFilesInArray(e);a<l.length;a++){var n=l[a];if(s||(i=r.fileList.indexOf(n.list)),i>-1){var o=sf.base.isNullOrUndefined(n.input)?null:n.input;o&&sf.base.detach(o),r.spliceFiles(i),sf.base.detach(r.fileList[i]),r.fileList.splice(i,1),s=!0,i=-1}}}));else if(!r.isForm||!sf.base.isNullOrUndefined(r.asyncSettings.removeUrl)&&""!==r.asyncSettings.removeUrl||r.isBlazorSaveUrl){var o=[];(e=sf.base.isNullOrUndefined(e)?r.filesData:e)instanceof Array?o=e:o.push(e),l.filesData=o;for(var u=r.asyncSettings.removeUrl,d=""!==u&&!sf.base.isNullOrUndefined(u),p=function(e){r.filesData.indexOf(e);var i=r.uploadedFilesData.indexOf(e);("2"===e.statusCode||"4"===e.statusCode||"0"===e.statusCode&&-1!==i)&&d?r.removeUploadedFile(e,l,s,t):s?r.removeFilesData(e,t):r.trigger("removing",l,(function(s){s.cancel||r.removeFilesData(e,t)})),a&&!a.target.classList.contains(n)&&r.checkActionComplete(!1)},h=0,c=o;h<c.length;h++){p(c[h])}}else l.filesData=r.getFilesData(),r.trigger("removing",l,(function(e){e.cancel||r.clearAll()}))}}))},t.prototype.clearAll=function(){var e=this;if(sf.base.isNullOrUndefined(this.listParent)&&!this.isBlazorSaveUrl&&!this.isBlazorTemplate)return"msie"!==this.browserName&&(this.element.value=""),void(this.filesData=[]);var t={cancel:!1,filesData:this.filesData};this.trigger("clearing",t,(function(t){t.cancel||(e.clearData(),e.actionCompleteCount=0,e.count=-1)}))},t.prototype.getFilesData=function(e){if(this.isServerBlazor){for(var t=0;t<this.filesData.length;t++)this.filesData[t].rawFile=this.base64String[t];return this.filesData}return sf.base.isNullOrUndefined(e)?this.filesData:this.getSelectedFiles(e)},t.prototype.pause=function(e,t){e=e||this.filesData;var s=this.getFilesInArray(e);this.pauseUploading(s,t)},t.prototype.pauseUploading=function(e,t){for(var s=this.getFiles(e),i=0;i<s.length;i++)"3"===s[i].statusCode&&this.pauseUpload(this.getCurrentMetaData(s[i],null),null,t)},t.prototype.getFiles=function(e){var t=[];return sf.base.isNullOrUndefined(e)||e instanceof Array?t=e:t.push(e),t},t.prototype.resume=function(e,t){e=e||this.filesData;var s=this.getFilesInArray(e);this.resumeFiles(s,t)},t.prototype.resumeFiles=function(e,t){for(var s=this.getFiles(e),i=0;i<s.length;i++)"4"===s[i].statusCode&&this.resumeUpload(this.getCurrentMetaData(s[i],null),null,t)},t.prototype.retry=function(e,t,s){e=e||this.filesData;var i=this.getFilesInArray(e);this.retryFailedFiles(i,t,s)},t.prototype.retryFailedFiles=function(e,t,s){for(var i=this.getFiles(e),a=0;a<i.length;a++)if("5"===i[a].statusCode||"0"===i[a].statusCode)if(this.asyncSettings.chunkSize>0)this.retryUpload(this.getCurrentMetaData(i[a],null),t);else{var r=void 0;s||(r=this.fileList[this.filesData.indexOf(i[a])]),this.reloadcanceledFile(null,i[a],r,s)}},t.prototype.cancel=function(e){e=e||this.filesData;var t=this.getFilesInArray(e);this.cancelUpload(t)},t.prototype.cancelUpload=function(e){var t=this.getFiles(e);if(this.asyncSettings.chunkSize>0){for(var s=0;s<t.length;s++)if("3"===t[s].statusCode){var i=this.getCurrentMetaData(t[s],null);i.file.statusCode="5",i.file.status=this.localizedTexts("fileUploadCancel"),this.updateMetaData(i),this.showHideUploadSpinner(t[s])}}else for(s=0;s<t.length;s++)"3"===t[s].statusCode&&(t[s].statusCode="5",t[s].status=this.localizedTexts("fileUploadCancel"),this.showHideUploadSpinner(t[s]))},t.prototype.showHideUploadSpinner=function(e){var t=this.getLiElement(e);if(!sf.base.isNullOrUndefined(t)&&sf.base.isNullOrUndefined(this.template)){var s=t.querySelector("."+u);sf.popups.createSpinner({target:s,width:"20px"}),sf.popups.showSpinner(s)}},a([sf.base.Complex({saveUrl:"",removeUrl:""},g)],t.prototype,"asyncSettings",void 0),a([sf.base.Property(!1)],t.prototype,"sequentialUpload",void 0),a([sf.base.Property({})],t.prototype,"htmlAttributes",void 0),a([sf.base.Property("")],t.prototype,"cssClass",void 0),a([sf.base.Property(!0)],t.prototype,"enabled",void 0),a([sf.base.Property(null)],t.prototype,"template",void 0),a([sf.base.Property(!0)],t.prototype,"multiple",void 0),a([sf.base.Property(!0)],t.prototype,"autoUpload",void 0),a([sf.base.Complex({},y)],t.prototype,"buttons",void 0),a([sf.base.Property("")],t.prototype,"allowedExtensions",void 0),a([sf.base.Property(0)],t.prototype,"minFileSize",void 0),a([sf.base.Property(3e7)],t.prototype,"maxFileSize",void 0),a([sf.base.Property(null)],t.prototype,"dropArea",void 0),a([sf.base.Collection([{}],v)],t.prototype,"files",void 0),a([sf.base.Property(!0)],t.prototype,"showFileList",void 0),a([sf.base.Property(!1)],t.prototype,"directoryUpload",void 0),a([sf.base.Property("Default")],t.prototype,"dropEffect",void 0),a([sf.base.Event()],t.prototype,"created",void 0),a([sf.base.Event()],t.prototype,"actionComplete",void 0),a([sf.base.Event()],t.prototype,"rendering",void 0),a([sf.base.Event()],t.prototype,"beforeUpload",void 0),a([sf.base.Event()],t.prototype,"fileListRendering",void 0),a([sf.base.Event()],t.prototype,"selected",void 0),a([sf.base.Event()],t.prototype,"uploading",void 0),a([sf.base.Event()],t.prototype,"success",void 0),a([sf.base.Event()],t.prototype,"failure",void 0),a([sf.base.Event()],t.prototype,"removing",void 0),a([sf.base.Event()],t.prototype,"beforeRemove",void 0),a([sf.base.Event()],t.prototype,"clearing",void 0),a([sf.base.Event()],t.prototype,"progress",void 0),a([sf.base.Event()],t.prototype,"change",void 0),a([sf.base.Event()],t.prototype,"chunkSuccess",void 0),a([sf.base.Event()],t.prototype,"chunkFailure",void 0),a([sf.base.Event()],t.prototype,"chunkUploading",void 0),a([sf.base.Event()],t.prototype,"canceling",void 0),a([sf.base.Event()],t.prototype,"pausing",void 0),a([sf.base.Event()],t.prototype,"resuming",void 0),t=a([sf.base.NotifyPropertyChanges],t)}(sf.base.Component);return e.FilesProp=v,e.ButtonsProps=y,e.AsyncSettings=g,e.Uploader=S,e}({}))}});