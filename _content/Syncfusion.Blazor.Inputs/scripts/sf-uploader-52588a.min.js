!function(e){var t={};function s(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(i,a,function(t){return e[t]}.bind(null,a));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s="./bundles/sf-uploader.js")}({"./bundles/sf-uploader.js":function(e,t,s){"use strict";s.r(t);s("./modules/sf-uploader.js");s.p="_content/Syncfusion.Blazor.Inputs/scripts/"},"./modules/sf-uploader.js":function(e,t){function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Uploader=function(){"use strict";var e="e-upload-file-list",t="e-file-status",i="e-file-remove-btn",a="e-file-delete-btn",n="e-file-abort-btn",l="e-file-reload-btn",r="e-upload-progress-wrap",o="e-upload-progress-bar",u="e-upload-success",d="e-upload-fails",c="e-file-pause-btn",h=function(){function h(e,t,s){this.initialAttr={accept:null,multiple:!1,disabled:!1},this.uploadedFilesData=[],this.base64String=[],this.isForm=!1,this.allTypes=!1,this.pausedData=[],this.uploadMetaData=[],this.btnTabIndex="0",this.disableKeyboardNavigation=!1,this.count=-1,this.actionCompleteCount=0,this.flag=!0,this.selectedFiles=[],this.uploaderName="UploadFiles",this.fileStreams=[],this.newFileRef=0,this.isFirstFileOnSelection=!1,this.fileList=[],this.filesData=[],this.element=e,this.updateProperty(s),this.element.blazor__instance=this,this.dotNetRef=t}return h.prototype.initialize=function(){this.preRender(),this.render()},h.prototype.updateProperty=function(e){sf.base.extend(this,this,e)},h.prototype.reRenderFileList=function(){this.listParent&&(sf.base.detach(this.listParent),this.listParent=null,this.fileList=[],this.createFileList(this.filesData),this.actionButtons&&(this.removeActionButtons(),this.renderActionButtons(),this.checkActionButtonStatus()))},h.prototype.updateDropArea=function(){if(this.dropArea)this.setDropArea();else{this.dropZoneElement=null;var e=this.dropAreaWrapper.querySelector(".e-file-drop");e&&sf.base.remove(e)}},h.prototype.propertyChanges=function(e,t){this.updateProperty(e);for(var s=0,i=Object.keys(t);s<i.length;s++){switch(i[s]){case"AllowedExtensions":this.clearAll();break;case"EnableRtl":this.reRenderFileList();break;case"Buttons":this.buttons.browse=sf.base.isNullOrUndefined(this.buttons.browse)?"":this.buttons.browse,this.buttons.clear=sf.base.isNullOrUndefined(this.buttons.clear)?"":this.buttons.clear,this.buttons.upload=sf.base.isNullOrUndefined(this.buttons.upload)?"":this.buttons.upload,this.renderButtonTemplates();break;case"DropArea":this.unBindDropEvents(),this.updateDropArea();break;case"Files":this.renderPreLoadFiles();break;case"MinFileSize":case"MaxFileSize":case"AutoUpload":case"SequentialUpload":this.clearAll()}}},h.prototype.preRender=function(){this.isBlazorTemplate=""!==this.template&&!sf.base.isNullOrUndefined(this.template),this.isBlazorSaveUrl=""===this.asyncSettings.saveUrl||sf.base.isNullOrUndefined(this.asyncSettings.saveUrl),this.isBlazorSaveUrl&&this.sequentialUpload&&(this.sequentialUpload=!1),this.isBlazorSaveUrl||this.formRendered(),this.keyConfigs={enter:"enter"},this.browserName=sf.base.Browser.info.name,this.uploaderName=this.element.getAttribute("name")},h.prototype.formRendered=function(){var e=sf.base.closest(this.element,"form");if(!sf.base.isNullOrUndefined(e))for(;e&&e!==document.documentElement;e=e.parentElement)"FORM"===e.tagName&&(this.isForm=!0,this.formElement=e,e.setAttribute("enctype","multipart/form-data"),e.setAttribute("encoding","multipart/form-data"))},h.prototype.render=function(){this.dropAreaWrapper=sf.base.closest(this.element,".e-file-select-wrap"),this.uploadWrapper=sf.base.closest(this.element,".e-upload.e-control-wrapper"),this.browseButton=this.dropAreaWrapper.querySelector("button.e-upload-browse-btn"),this.setDropArea(),this.renderPreLoadFiles(),this.wireEvents()},h.prototype.wireEvents=function(){sf.base.EventHandler.add(this.browseButton,"click",this.browseButtonClick,this),sf.base.EventHandler.add(this.element,"change",this.onSelectFiles,this),sf.base.EventHandler.add(document,"click",this.removeFocus,this),this.keyboardModule=new sf.base.KeyboardEvents(this.uploadWrapper,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.isForm&&sf.base.EventHandler.add(this.formElement,"reset",this.resetForm,this)},h.prototype.renderPreLoadFiles=function(){if(this.files&&this.files.length){if(this.enablePersistence&&this.filesData.length)return void this.createFileList(this.filesData);if(sf.base.isNullOrUndefined(this.files[0].size))return;var e=[].slice.call(this.files),t=[];this.multiple||(this.clearData(),e=[e[0]]);for(var s=0,i=e;s<i.length;s++){var a=i[s],n={name:a.name+"."+a.type.split(".")[a.type.split(".").length-1],rawFile:"",size:a.size,status:this.localizedTexts("uploadSuccessMessage"),type:a.type,validationMessages:{minSize:"",maxSize:""},statusCode:"2"};t.push(n),this.filesData.push(n)}this.createFileList(t),this.autoUpload||!this.listParent||this.actionButtons||this.isForm&&!this.allowUpload()||!this.showFileList||this.renderActionButtons(),this.checkActionButtonStatus(),this.sequentialUpload&&(this.count=this.filesData.length-1)}},h.prototype.renderActionButtons=function(){this.element.setAttribute("tabindex","-1"),this.isBlazorSaveUrl||this.isBlazorTemplate||(this.actionButtons=sf.base.createElement("div",{className:"e-upload-actions"}),this.uploadButton=sf.base.createElement("button",{className:"e-file-upload-btn e-css e-btn e-flat e-primary",attrs:{type:"button",tabindex:this.btnTabIndex}}),this.clearButton=sf.base.createElement("button",{className:"e-file-clear-btn e-css e-btn e-flat",attrs:{type:"button",tabindex:this.btnTabIndex}}),this.actionButtons.appendChild(this.clearButton),this.actionButtons.appendChild(this.uploadButton),this.renderButtonTemplates(),this.uploadWrapper.appendChild(this.actionButtons),this.browseButton.blur(),this.uploadButton.focus(),this.wireActionButtonEvents())},h.prototype.setDropArea=function(){var e=this.dropAreaWrapper.querySelector(".e-file-drop");if(this.dropArea){this.dropZoneElement="string"!=typeof this.dropArea?this.dropArea:document.querySelector(this.dropArea);for(var t=this.element,s=!1;t.parentNode;)(t=t.parentNode)===this.dropZoneElement&&(s=!0);!s&&e&&sf.base.remove(e)}else sf.base.isNullOrUndefined(this.dropArea)&&(this.dropZoneElement=this.uploadWrapper);this.bindDropEvents()},h.prototype.serverActionButtonsEventBind=function(e){e&&!this.isForm&&(this.browseButton.blur(),this.actionButtons=e,this.uploadButton=this.actionButtons.querySelector(".e-file-upload-btn"),this.clearButton=this.actionButtons.querySelector(".e-file-clear-btn"),this.uploadButton.focus(),this.unwireActionButtonEvents(),this.wireActionButtonEvents(),this.checkActionButtonStatus())},h.prototype.serverUlElement=function(e){e&&(this.isBlazorSaveUrl||this.isBlazorTemplate)&&(this.listParent=e,this.fileList=[].slice.call(this.listParent.querySelectorAll("li")),this.serverRemoveIconBindEvent(),this.isForm||this.checkAutoUpload(this.filesData))},h.prototype.wireActionButtonEvents=function(){sf.base.EventHandler.add(this.uploadButton,"click",this.uploadButtonClick,this),sf.base.EventHandler.add(this.clearButton,"click",this.clearButtonClick,this)},h.prototype.unwireActionButtonEvents=function(){sf.base.EventHandler.remove(this.uploadButton,"click",this.uploadButtonClick),sf.base.EventHandler.remove(this.clearButton,"click",this.clearButtonClick)},h.prototype.checkActionButtonStatus=function(){if(this.actionButtons&&!this.isBlazorTemplate){var e=this.uploadWrapper.querySelectorAll(".e-validation-fails").length+this.uploadWrapper.querySelectorAll(".e-upload-fails:not(.e-upload-progress)").length+this.uploadWrapper.querySelectorAll("span."+u).length+this.uploadWrapper.querySelectorAll("span.e-upload-progress").length;e>0&&e===this.uploadWrapper.querySelectorAll("li").length?this.uploadButton.setAttribute("disabled","disabled"):this.uploadButton.removeAttribute("disabled")}},h.prototype.renderButtonTemplates=function(){if("string"==typeof this.buttons.browse?(this.browseButton.textContent="Browse..."===this.buttons.browse?this.localizedTexts("browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.textContent)):(this.browseButton.innerHTML="",this.browseButton.appendChild(this.buttons.browse)),this.uploadButton){var e;e=sf.base.isNullOrUndefined(this.buttons.upload)?"Upload":this.buttons.upload,this.buttons.upload=e,"string"==typeof this.buttons.upload?(this.uploadButton.textContent="Upload"===this.buttons.upload?this.localizedTexts("upload"):this.buttons.upload,this.uploadButton.setAttribute("title",this.uploadButton.textContent)):(this.uploadButton.innerHTML="",this.uploadButton.appendChild(this.buttons.upload))}if(this.clearButton){var t;t=sf.base.isNullOrUndefined(this.buttons.clear)?"Clear":this.buttons.clear,this.buttons.clear=t,"string"==typeof this.buttons.clear?(this.clearButton.textContent="Clear"===this.buttons.clear?this.localizedTexts("clear"):this.buttons.clear,this.clearButton.setAttribute("title",this.clearButton.textContent)):(this.clearButton.innerHTML="",this.clearButton.appendChild(this.buttons.clear))}},h.prototype.checkAutoUpload=function(e){this.autoUpload?(this.sequentialUpload?this.sequenceUpload(e):this.upload(e),this.removeActionButtons()):this.actionButtons||this.renderActionButtons(),this.checkActionButtonStatus()},h.prototype.removeActionButtons=function(){this.actionButtons&&(this.unwireActionButtonEvents(),this.isBlazorSaveUrl||this.isBlazorTemplate||sf.base.detach(this.actionButtons),this.actionButtons=null)},h.prototype.sequenceUpload=function(e){if(this.filesData.length-e.length==0||"1"!==this.filesData[this.filesData.length-e.length-1].statusCode){++this.count;var t=!this.showFileList;"object"===s(this.filesData[this.count])?(this.isFirstFileOnSelection=!1,this.upload(this.filesData[this.count],t),"0"===this.filesData[this.count].statusCode&&this.sequenceUpload(e)):--this.count}},h.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.browseButton,"click",this.browseButtonClick),sf.base.EventHandler.remove(this.element,"change",this.onSelectFiles),sf.base.EventHandler.remove(document,"click",this.removeFocus),this.isForm&&sf.base.EventHandler.remove(this.formElement,"reset",this.resetForm),this.keyboardModule&&this.keyboardModule.destroy()},h.prototype.resetForm=function(){this.clearAll()},h.prototype.keyActionHandler=function(e){var t=e.target;switch(e.action){case"enter":if(e.target===this.clearButton)this.clearButtonClick();else if(e.target===this.uploadButton)this.uploadButtonClick();else if(e.target===this.browseButton)this.browseButtonClick();else if(t.classList.contains(c)){(s=this.getCurrentMetaData(null,e)).file.statusCode="4",s.file.status=this.localizedTexts("pauseUpload"),this.abortUpload(s,!1)}else if(t.classList.contains("e-file-play-btn"))this.resumeUpload(this.getCurrentMetaData(null,e),e);else if(t.classList.contains(l)){var s=this.getCurrentMetaData(null,e);if(sf.base.isNullOrUndefined(s)){var i=e.target.parentElement,a=this.filesData[this.fileList.indexOf(i)];this.retry(a)}else s.file.statusCode="1",s.file.status=this.localizedTexts("readyToUploadMessage"),this.chunkUpload(s.file)}else this.removeFiles(e),t.classList.contains(n)||this.browseButton.focus();e.preventDefault(),e.stopPropagation()}},h.prototype.getCurrentMetaData=function(e,t){var s,i;if(sf.base.isNullOrUndefined(e)){var a=t.target.parentElement;s=this.filesData[this.fileList.indexOf(a)]}else s=e;for(var n=0;n<this.uploadMetaData.length;n++)if(this.uploadMetaData[n].file.name===s.name){i=this.uploadMetaData[n];break}return i},h.prototype.removeFocus=function(){this.uploadWrapper&&this.listParent&&this.listParent.querySelector(".e-clear-icon-focus")&&(document.activeElement.blur(),this.listParent.querySelector(".e-clear-icon-focus").classList.remove("e-clear-icon-focus"))},h.prototype.browseButtonClick=function(){this.element.click()},h.prototype.uploadButtonClick=function(){this.sequentialUpload?this.sequenceUpload(this.filesData):this.upload(this.filesData)},h.prototype.clearButtonClick=function(){this.clearAll(),this.sequentialUpload&&(this.count=-1),this.actionCompleteCount=0},h.prototype.bindDropEvents=function(){this.dropZoneElement&&(sf.base.EventHandler.add(this.dropZoneElement,"drop",this.dropElement,this),sf.base.EventHandler.add(this.dropZoneElement,"dragover",this.dragHover,this),sf.base.EventHandler.add(this.dropZoneElement,"dragleave",this.onDragLeave,this),sf.base.EventHandler.add(this.dropZoneElement,"paste",this.onPasteFile,this))},h.prototype.unBindDropEvents=function(){this.dropZoneElement&&(sf.base.EventHandler.remove(this.dropZoneElement,"drop",this.dropElement),sf.base.EventHandler.remove(this.dropZoneElement,"dragover",this.dragHover),sf.base.EventHandler.remove(this.dropZoneElement,"dragleave",this.onDragLeave))},h.prototype.onDragLeave=function(e){this.dropZoneElement.classList.remove("e-upload-drag-hover")},h.prototype.dragHover=function(e){this.enabled&&(this.dropZoneElement.classList.add("e-upload-drag-hover"),"Default"!==this.dropEffect&&(e.dataTransfer.dropEffect=this.dropEffect.toLowerCase()),e.preventDefault(),e.stopPropagation())},h.prototype.dropElement=function(e){this.dropZoneElement.classList.remove("e-upload-drag-hover"),this.onSelectFiles(e),e.preventDefault(),e.stopPropagation()},h.prototype.onPasteFile=function(e){var t=e.clipboardData.items;if(1===t.length){var s=[].slice.call(t)[0];"file"===s.kind&&s.type.match("^image/")&&this.renderSelectedFiles(e,[s.getAsFile()],!1,!0)}},h.prototype.getSelectedFiles=function(e){for(var t=[],s=this.fileList[e],i=this.getFilesData(),a=+s.getAttribute("data-files-count"),n=0,l=0;l<e;l++)n+=+this.fileList[l].getAttribute("data-files-count");for(var r=n;r<n+a;r++)t.push(i[r]);return t},h.prototype.removeFiles=function(e){if(this.enabled){var t=e.target.parentElement;this.isBlazorSaveUrl&&(this.fileList=[].slice.call(this.uploadWrapper.querySelectorAll("li")));var s=this.fileList.indexOf(t),i=this.fileList[s],a=this.isFormUpload(),l=a?this.getSelectedFiles(s):this.getFilesInArray(this.filesData[s]);if(!sf.base.isNullOrUndefined(l)){if(e.target.classList.contains(n)&&!a){if(l[0].statusCode="5",!sf.base.isNullOrUndefined(i)){var r=i.querySelector("."+n);sf.popups.createSpinner({target:r,width:"20px"}),sf.popups.showSpinner(r)}this.sequentialUpload&&this.uploadSequential(),i.classList.contains("e-restrict-retry")||this.checkActionComplete(!0)}else sf.base.closest(e.target,".e-spinner-pane")||this.remove(l,!1,!1,!0,e);this.element.value="",this.checkActionButtonStatus()}}},h.prototype.removeFilesData=function(e,t){var s;if(t)this.showFileList||(s=this.filesData.indexOf(e),this.filesData.splice(s,1));else{var i=this.getLiElement(e);sf.base.isNullOrUndefined(i)||(this.isBlazorSaveUrl||sf.base.detach(i),s=this.fileList.indexOf(i),this.fileList.splice(s,1),this.filesData.splice(s,1),this.isBlazorSaveUrl||0!==this.fileList.length||sf.base.isNullOrUndefined(this.listParent)?this.dotNetRef.invokeMethodAsync("RemoveFileData",s):(sf.base.detach(this.listParent),this.listParent=null,this.removeActionButtons(),this.sequentialUpload&&s<=this.count&&--this.count))}},h.prototype.removeUploadedFile=function(e,t,s,i){var a=this,n=e,l=new sf.base.Ajax(this.asyncSettings.removeUrl,"POST",!0,null);l.emitError=!1;var r=new FormData;l.beforeSend=function(i){t.currentRequest=l.httpRequest,a.currentRequestHeader&&a.updateCustomheader(l.httpRequest,a.currentRequestHeader),a.customFormDatas&&a.updateFormData(r,a.customFormDatas),!s&&a.removingEnabled?a.dotNetRef.invokeMethodAsync("RemovingEvent",t).then((function(t){t.cancel?i.cancel=!0:a.removingEventCallback(e)})):a.removingEventCallback(e)};var o=this.element.getAttribute("name");sf.base.isNullOrUndefined(n.rawFile)||""===n.rawFile?r.append(o,n.name):r.append(o,n.rawFile,n.name),l.onLoad=function(e){return a.removeCompleted(e,n,i),{}},l.onError=function(e){return a.removeFailed(e,n,i),{}},l.send(r)},h.prototype.removeCompleted=function(e,t,s){var i=e&&e.currentTarget?this.getResponse(e):null,a=e.target;if(4===a.readyState&&a.status>=200&&a.status<=299){var n={e:e,response:i,operation:"remove",file:this.updateStatus(t,this.localizedTexts("removedSuccessMessage"),"2")};this.successEnabled&&this.dotNetRef.invokeMethodAsync("SuccessEvent",n),this.removeFilesData(t,s);var l=this.uploadedFilesData.indexOf(t);this.uploadedFilesData.splice(l,1),this.changeEnabled&&this.dotNetRef.invokeMethodAsync("ChangeEvent",{files:this.uploadedFilesData})}else this.removeFailed(e,t,s)},h.prototype.removeFailed=function(e,s,i){var n={e:e,response:e&&e.currentTarget?this.getResponse(e):null,operation:"remove",file:this.updateStatus(s,this.localizedTexts("removedFailedMessage"),"0")};if(!i){var l=this.filesData.indexOf(s),r=this.fileList[l];if(r){r.classList.remove(u),r.classList.add(d);var o=r.querySelector("."+t);o&&(o.classList.remove(u),o.classList.add(d))}this.checkActionButtonStatus()}this.failuredEnabled&&this.dotNetRef.invokeMethodAsync("FailureEvent",n);var c=this.getLiElement(s);if(!sf.base.isNullOrUndefined(c)&&!sf.base.isNullOrUndefined(c.querySelector("."+a))){var h=c.querySelector("."+a);sf.popups.hideSpinner(h),sf.base.detach(c.querySelector(".e-spinner-pane"))}},h.prototype.removingEventCallback=function(e){var t=this.getLiElement(e);if(!(sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(t.querySelector("."+a))&&sf.base.isNullOrUndefined(t.querySelector("."+i)))){var s;s=t.querySelector("."+a)?t.querySelector("."+a):t.querySelector("."+i),sf.popups.createSpinner({target:s,width:"20px"}),sf.popups.showSpinner(s)}},h.prototype.updateFormData=function(e,t){if(t&&t.length>0&&t[0])for(var s=function(s){var i=t[s],a=Object.keys(i).map((function(e){return i[e]}));e.append(Object.keys(i)[0],a)},i=0;i<t.length;i++)s(i)},h.prototype.updateCustomheader=function(e,t){if(t.length>0&&t[0])for(var s=function(s){var i=t[s],a=Object.keys(i).map((function(e){return i[e]}));e.setRequestHeader(Object.keys(i)[0],a)},i=0;i<t.length;i++)s(i)},h.prototype.getFilesFromFolder=function(e){var t;if(this.filesEntries=[],t=this.multiple?e.dataTransfer.items:[e.dataTransfer.items[0]],this.checkDirectoryUpload(t))for(var s=function(s){var a=t[s].webkitGetAsEntry();if(a.isFile){var n=[];a.file((function(e){var t=a.fullPath;n.push({path:t,file:e})})),i.renderSelectedFiles(e,n,!0)}else a.isDirectory&&i.traverseFileTree(a,e)},i=this,a=0;a<t.length;a++)s(a)},h.prototype.checkDirectoryUpload=function(e){for(var t=0;e&&t<e.length;t++){if(e[t].webkitGetAsEntry().isDirectory)return!0}return!1},h.prototype.traverseFileTree=function(e,t){if(e.isFile)this.filesEntries.push(e);else if(e.isDirectory){var s=e.createReader();this.readFileFromDirectory(s,t)}},h.prototype.readFileFromDirectory=function(e,t){var s=this;e.readEntries((function(i){for(var a=0;a<i.length;a++)s.traverseFileTree(i[a]);s.pushFilesEntries(t),i.length&&s.readFileFromDirectory(e)}))},h.prototype.pushFilesEntries=function(e){for(var t=this,s=[],i=function(i){a.filesEntries[i].file((function(a){if(t.filesEntries.length){var n=t.filesEntries[i].fullPath;s.push({path:n,file:a}),i===t.filesEntries.length-1&&(t.filesEntries=[],t.renderSelectedFiles(e,s,!0))}}))},a=this,n=0;n<this.filesEntries.length;n++)i(n)},h.prototype.onSelectFiles=function(e){var t;if(this.enabled)if("drop"===e.type)if(this.directoryUpload)this.getFilesFromFolder(e);else{var s=this.sortFilesList=e.dataTransfer.files;"msie"!==this.browserName&&"edge"!==this.browserName&&(this.element.files=s),s.length>0&&(t=this.multiple?this.sortFileList(s):[s[0]],this.renderSelectedFiles(e,t))}else t=[].slice.call(e.target.files),this.renderSelectedFiles(e,t)},h.prototype.getBase64=function(e){return new Promise((function(t,s){var i=new FileReader;i.readAsDataURL(e),i.onload=function(){return t(i.result)},i.onerror=function(e){return s(e)}}))},h.prototype.renderSelectedFiles=function(e,t,s,i){var a=this;this.base64String=[];var n={event:e,cancel:!1,filesData:[],isModified:!1,modifiedFilesData:[],progressInterval:"",isCanceled:!1,currentRequest:null,customFormData:null,type:e.type};if(t.length<1)return n.isCanceled=!0,void(this.selectedEnabled&&this.dotNetRef.invokeMethodAsync("SelectedEvent",n));this.flag=!0;var l=[];this.multiple||(this.clearData(!0),t=[t[0]]);for(var r=0;r<t.length;r++){var o=s?t[r].file:t[r];this.updateInitialFileDetails(e,t,o,r,l,s,i)}n.filesData=l,this.allowedExtensions.indexOf("*")>-1&&(this.allTypes=!0),this.allTypes||(l=this.checkExtension(l)),this.selectedEnabled?this.dotNetRef.invokeMethodAsync("SelectedEvent",n).then((function(e){a._internalRenderSelect(e,l)})):this._internalRenderSelect(n,l)},h.prototype.updateInitialFileDetails=function(e,t,s,i,a,n,l){var r={name:n?t[i].path.substring(1,t[i].path.length):l?sf.base.getUniqueID(s.name.substring(0,s.name.lastIndexOf(".")))+"."+this.getFileType(s.name):this.directoryUpload?t[i].webkitRelativePath:s.name,rawFile:s,size:s.size,status:this.localizedTexts("readyToUploadMessage"),type:this.getFileType(s.name),validationMessages:this.validatedFileSize(s.size),statusCode:"1",id:sf.base.getUniqueID(s.name.substring(0,s.name.lastIndexOf(".")))+"."+this.getFileType(s.name)};l&&(r.fileSource="paste"),r.status=""!==r.validationMessages.minSize?this.localizedTexts("invalidMinFileSize"):""!==r.validationMessages.maxSize?this.localizedTexts("invalidMaxFileSize"):r.status,""===r.validationMessages.minSize&&""===r.validationMessages.maxSize||(r.statusCode="0"),a.push(r)},h.prototype._internalRenderSelect=function(e,t){if(!e.cancel){if(this.currentRequestHeader=e.currentRequest,this.customFormDatas=e.customFormData,this.selectedFiles=this.selectedFiles.concat(t),this.btnTabIndex=this.disableKeyboardNavigation?"-1":"0",this.showFileList){if(e.isModified&&e.modifiedFilesData.length>0){for(var s=0;s<e.modifiedFilesData.length;s++)for(var i=0;i<t.length;i++)e.modifiedFilesData[s].id===t[i].id&&(e.modifiedFilesData[s].rawFile=t[i].rawFile);var a=this.allTypes?e.modifiedFilesData:this.checkExtension(e.modifiedFilesData);this.updateSortedFileList(a),this.filesData=a,this.isForm&&!this.allowUpload()||this.checkAutoUpload(a)}else this.createFileList(t,!0),this.isBlazorSaveUrl||this.isBlazorTemplate||(this.filesData=this.filesData.concat(t)),this.isForm&&!this.allowUpload()||this.isBlazorSaveUrl||this.isBlazorTemplate||this.checkAutoUpload(t);sf.base.isNullOrUndefined(e.progressInterval)||""===e.progressInterval||(this.progressInterval=e.progressInterval)}else this.filesData=this.filesData.concat(t),this.isBlazorSaveUrl&&this.dotNetRef.invokeMethodAsync("UpdateServerFileData",this.filesData,this.isForm),this.autoUpload&&this.upload(this.filesData,!0);this.raiseActionComplete(),this.isFirstFileOnSelection=!0}},h.prototype.allowUpload=function(){var e=!1;return this.isForm&&!sf.base.isNullOrUndefined(this.asyncSettings.saveUrl)&&""!==this.asyncSettings.saveUrl&&(e=!0),e},h.prototype.isFormUpload=function(){var e=!1;return!this.isForm||!sf.base.isNullOrUndefined(this.asyncSettings.saveUrl)&&""!==this.asyncSettings.saveUrl||!sf.base.isNullOrUndefined(this.asyncSettings.removeUrl)&&""!==this.asyncSettings.removeUrl||(e=!0),e},h.prototype.clearData=function(e){sf.base.isNullOrUndefined(this.listParent)||this.isBlazorSaveUrl||this.isBlazorTemplate||(sf.base.detach(this.listParent),this.listParent=null),"msie"===this.browserName||e||(this.element.value=""),this.fileList=[],this.filesData=[],this.isBlazorSaveUrl||this.isBlazorTemplate?this.dotNetRef.invokeMethodAsync("ClearAllFile"):this.removeActionButtons()},h.prototype.updateSortedFileList=function(e){var t=sf.base.createElement("div",{id:"clonewrapper"}),s=-1;if(this.listParent){for(var i=0;i<this.listParent.querySelectorAll("li").length;i++){var a=this.listParent.querySelectorAll("li")[i];t.appendChild(a.cloneNode(!0))}for(var n=0,l=this.listParent.querySelectorAll("li");n<l.length;n++){var r=l[n];sf.base.detach(r)}this.removeActionButtons();var o=[].slice.call(t.childNodes);sf.base.detach(this.listParent),this.listParent=null,this.fileList=[],this.createParentUL();for(var u=0;u<e.length;u++){for(var d=0;d<this.filesData.length;d++)this.filesData[d].name===e[u].name&&(this.listParent.appendChild(o[d]),sf.base.EventHandler.add(o[d].querySelector(".e-icons"),"click",this.removeFiles,this),this.fileList.push(o[d]),s=u);s!==u&&this.createFileList([e[u]])}}else this.createFileList(e)},h.prototype.isBlank=function(e){return!e||/^\s*$/.test(e)},h.prototype.checkExtension=function(e){var t=e;if(!this.isBlank(this.allowedExtensions)){for(var s=[],i=0,a=this.allowedExtensions.split(",");i<a.length;i++){var n=a[i];s.push(n.trim().toLocaleLowerCase())}for(var l=0;l<e.length;l++)-1===s.indexOf(("."+e[l].type).toLocaleLowerCase())&&(e[l].status=this.localizedTexts("invalidFileType"),e[l].statusCode="0")}return t},h.prototype.validatedFileSize=function(e){var t="",s="";return e<this.minFileSize?t=this.localizedTexts("invalidMinFileSize"):e>this.maxFileSize?s=this.localizedTexts("invalidMaxFileSize"):(t="",s=""),{minSize:t,maxSize:s}},h.prototype.isPreLoadFile=function(e){var t=!1;if(this.files)for(var s=0;s<this.files.length;s++)if(this.files[s].name===e.name.slice(0,e.name.lastIndexOf("."))&&this.files[s].type===e.type){t=!0;break}return t},h.prototype.createParentUL=function(){sf.base.isNullOrUndefined(this.listParent)&&(this.listParent=sf.base.createElement("ul",{className:"e-upload-files"}),this.uploadWrapper.appendChild(this.listParent))},h.prototype.formFileList=function(s,a){var n=sf.base.createElement("li",{className:e});n.setAttribute("data-files-count",s.length+"");for(var l,r=sf.base.createElement("span",{className:"e-file-container"}),o=0,u=s;o<u.length;o++){var d=u[o],c=sf.base.createElement("span",{className:"e-file-name"});c.innerHTML=this.getFileNameOnly(d.name);var h=sf.base.createElement("span",{className:"e-file-type"});if(h.innerHTML="."+this.getFileType(d.name),this.enableRtl){var p=sf.base.createElement("span",{className:"e-rtl-container"});p.appendChild(h),p.appendChild(c),r.appendChild(p)}else r.appendChild(c),r.appendChild(h);this.truncateName(c),l=this.formValidateFileInfo(d,n)}n.appendChild(r),this.setListToFileInfo(s,n);var f=this.listParent.querySelectorAll("li").length,v=sf.base.createElement("span");if(n.classList.contains("e-file-invalid")?(v.classList.add(t),v.classList.add("e-file-invalid"),v.innerText=s.length>1?this.localizedTexts("invalidFileSelection"):l):(v.classList.add(s.length>1?"e-file-information":"e-file-size"),v.innerText=s.length>1?this.localizedTexts("totalFiles")+": "+s.length+" , "+this.localizedTexts("size")+": "+this.bytesToSize(this.getFileSize(s)):this.bytesToSize(s[0].size),this.createFormInput(s)),r.appendChild(v),sf.base.isNullOrUndefined(n.querySelector(".e-icons"))){var m=sf.base.createElement("span",{className:"e-icons",attrs:{tabindex:this.btnTabIndex}});"msie"===this.browserName&&m.classList.add("e-msie"),m.setAttribute("title",this.localizedTexts("remove")),n.appendChild(r),n.appendChild(m),sf.base.EventHandler.add(m,"click",this.removeFiles,this),m.classList.add(i)}var b={element:n,fileInfo:this.mergeFileInfo(s,n),index:f,isPreload:this.isPreLoadFile(this.mergeFileInfo(s,n))};this.fileListRenderEnabled&&this.dotNetRef.invokeMethodAsync("FileListRenderingEvent",b),this.listParent.appendChild(n),this.fileList.push(n)},h.prototype.formValidateFileInfo=function(e,t){var s=e.status,i=this.validatedFileSize(e.size);""===i.minSize&&""===i.maxSize||(this.addInvalidClass(t),s=""!==i.minSize?this.localizedTexts("invalidMinFileSize"):""!==i.maxSize?this.localizedTexts("invalidMaxFileSize"):s);var a=this.checkExtension(this.getFilesInArray(e))[0].status;return a===this.localizedTexts("invalidFileType")&&(this.addInvalidClass(t),s=a),s},h.prototype.addInvalidClass=function(e){e.classList.add("e-file-invalid")},h.prototype.createFormInput=function(e){var t=this.element.cloneNode(!0);t.classList.add("e-hidden-file-input");for(var s=0,i=e;s<i.length;s++){i[s].input=t}t.setAttribute("name",this.uploaderName),this.uploadWrapper.querySelector(".e-file-select").appendChild(t),"msie"!==this.browserName&&"edge"!==this.browserName&&(this.element.value="")},h.prototype.getFileSize=function(e){for(var t=0,s=0,i=e;s<i.length;s++){t+=i[s].size}return t},h.prototype.mergeFileInfo=function(e,t){for(var s={name:"",rawFile:"",size:0,status:"",type:"",validationMessages:{minSize:"",maxSize:""},statusCode:"1",list:t},i=[],a="",n=0,l=e;n<l.length;n++){var r=l[n];i.push(r.name),a=r.type}return s.name=i.join(", "),s.size=this.getFileSize(e),s.type=a,s.status=this.statusForFormUpload(e,t),s},h.prototype.statusForFormUpload=function(e,t){for(var s,i=!0,a=0,n=e;a<n.length;a++){var l=n[a];s=l.status;var r=this.validatedFileSize(l.size);""===r.minSize&&""===r.maxSize||(i=!1,s=""!==r.minSize?this.localizedTexts("invalidMinFileSize"):""!==r.maxSize?this.localizedTexts("invalidMaxFileSize"):s);var o=this.checkExtension(this.getFilesInArray(l))[0].status;o===this.localizedTexts("invalidFileType")&&(i=!1,s=o)}return i?s=this.localizedTexts("totalFiles")+": "+e.length+" , "+this.localizedTexts("size")+": "+this.bytesToSize(this.getFileSize(e)):(t.classList.add("e-file-invalid"),s=e.length>1?this.localizedTexts("invalidFileSelection"):s),s},h.prototype.createFileList=function(s,n){if(this.isBlazorSaveUrl||this.isBlazorTemplate){var l=n?this.filesData=this.filesData.concat(s):s;this.dotNetRef.invokeMethodAsync("CreateFileList",l,this.isForm)}else if(this.createParentUL(),this.isFormUpload())this.uploadWrapper.classList.add("e-form-upload"),this.formFileList(s,this.element.files);else for(var r=0,o=s;r<o.length;r++){var d=o[r],c=sf.base.createElement("li",{className:e,attrs:{"data-file-name":d.name,"data-files-count":"1"}}),h=sf.base.createElement("span",{className:"e-file-container"}),p=sf.base.createElement("span",{className:"e-file-name",attrs:{title:d.name}});p.innerHTML=this.getFileNameOnly(d.name);var f=sf.base.createElement("span",{className:"e-file-type"});if(f.innerHTML="."+this.getFileType(d.name),this.enableRtl){var v=sf.base.createElement("span",{className:"e-rtl-container"});v.appendChild(f),v.appendChild(p),h.appendChild(v)}else h.appendChild(p),h.appendChild(f);var m=sf.base.createElement("span",{className:"e-file-size"});m.innerHTML=this.bytesToSize(d.size),h.appendChild(m);var b=sf.base.createElement("span",{className:t});h.appendChild(b),b.innerHTML=d.status,c.appendChild(h);var y=sf.base.createElement("span",{className:" e-icons",attrs:{tabindex:this.btnTabIndex}});"msie"===this.browserName&&y.classList.add("e-msie"),y.setAttribute("title",this.localizedTexts("remove")),c.appendChild(y),sf.base.EventHandler.add(y,"click",this.removeFiles,this),"2"===d.statusCode?(b.classList.add(u),y.classList.add(a),y.setAttribute("title",this.localizedTexts("delete"))):"1"!==d.statusCode&&(b.classList.remove(u),b.classList.add("e-validation-fails")),this.autoUpload&&"1"===d.statusCode&&""!==this.asyncSettings.saveUrl&&(b.innerHTML=""),y.classList.contains(a)||y.classList.add(i);var g={element:c,fileInfo:d,index:s.indexOf(d),isPreload:this.isPreLoadFile(d)};this.fileListRenderEnabled&&this.dotNetRef.invokeMethodAsync("FileListRenderingEvent",g),this.listParent.appendChild(c),this.fileList.push(c),this.truncateName(p);var S=this.flag;this.isPreLoadFile(d)&&(this.flag=!1,this.checkActionComplete(!0),this.flag=S)}},h.prototype.getSlicedName=function(e){var t;t=e.textContent,e.dataset.tail=t.slice(t.length-10)},h.prototype.setListToFileInfo=function(e,t){for(var s=0,i=e;s<i.length;s++){i[s].list=t}},h.prototype.truncateName=function(e){var t=e;("edge"!==this.browserName&&t.offsetWidth<t.scrollWidth||t.offsetWidth+1<t.scrollWidth)&&this.getSlicedName(t)},h.prototype.getFileType=function(e){var t,s=e.lastIndexOf(".");return s>=0&&(t=e.substring(s+1)),t||""},h.prototype.getFileNameOnly=function(e){var t=this.getFileType(e);return e.split("."+t)[0]},h.prototype.setInitialAttributes=function(){if(this.initialAttr.accept&&this.element.setAttribute("accept",this.initialAttr.accept),this.initialAttr.disabled&&this.element.setAttribute("disabled","disabled"),this.initialAttr.multiple){var e=document.createAttribute("multiple");this.element.setAttributeNode(e)}},h.prototype.filterfileList=function(e){for(var t=[],s=0;s<e.length;s++)this.getLiElement(e[s]).classList.contains(u)||t.push(e[s]);return t},h.prototype.updateStatus=function(e,s,i,a){if(void 0===a&&(a=!0),""!==s&&!sf.base.isNullOrUndefined(s)&&""!==i&&!sf.base.isNullOrUndefined(i))if(this.isBlazorSaveUrl)for(var n=0;n<this.filesData.length;n++)this.filesData[n].name===e.name&&(this.filesData[n].status=s,this.filesData[n].statusCode=i);else e.status=s,e.statusCode=i;if(a){var l=this.getLiElement(e);sf.base.isNullOrUndefined(l)||sf.base.isNullOrUndefined(l.querySelector("."+t))||""===s||sf.base.isNullOrUndefined(s)||(l.querySelector("."+t).textContent=s)}return e},h.prototype.getLiElement=function(e){for(var t,s=0;s<this.filesData.length;s++)(sf.base.isNullOrUndefined(this.filesData[s].id)||sf.base.isNullOrUndefined(e.id)?this.filesData[s].name===e.name:this.filesData[s].name===e.name&&this.filesData[s].id===e.id)&&(t=s);return this.fileList[t]},h.prototype.createProgressBar=function(e){var t=sf.base.createElement("span",{className:r}),s=sf.base.createElement("progressbar",{className:o,attrs:{value:"0",max:"100"}}),i=sf.base.createElement("span",{className:"e-progress-inner-wrap"});s.setAttribute("style","width: 0%");var a=sf.base.createElement("span",{className:"e-progress-bar-text"});a.textContent="0%",i.appendChild(s),t.appendChild(i),t.appendChild(a),e.querySelector(".e-file-container").appendChild(t)},h.prototype.updateProgressbar=function(e,t){if(!isNaN(Math.round(e.loaded/e.total*100))&&!sf.base.isNullOrUndefined(t.querySelector("."+o)))if(sf.base.isNullOrUndefined(this.progressInterval)||""===this.progressInterval)this.changeProgressValue(t,Math.round(e.loaded/e.total*100).toString()+"%");else{var s=Math.round(e.loaded/e.total*100)%parseInt(this.progressInterval,10);0!==s&&100!==s||this.changeProgressValue(t,Math.round(e.loaded/e.total*100).toString()+"%")}},h.prototype.changeProgressValue=function(e,t){e.querySelector("."+o).setAttribute("style","width:"+t),e.querySelector(".e-progress-bar-text").textContent=t},h.prototype.uploadInProgress=function(e,s,a,l){var o=this.getLiElement(s);if(!sf.base.isNullOrUndefined(o)||a){if(sf.base.isNullOrUndefined(o))this.cancelUploadingFile(s,e,l);else{"5"===s.statusCode&&this.cancelUploadingFile(s,e,l,o),o.querySelectorAll("."+r).length>0||!o.querySelector("."+t)||(o.querySelector("."+t).classList.add("e-upload-progress"),this.createProgressBar(o),this.updateProgressBarClasses(o,"e-upload-progress"),o.querySelector("."+t).classList.remove(d)),this.updateProgressbar(e,o);var u=o.querySelector("."+i);sf.base.isNullOrUndefined(u)||(u.classList.add(n,"e-upload-progress"),u.setAttribute("title",this.localizedTexts("abort")),u.classList.remove(i))}var c={e:e,operation:"upload",file:this.updateStatus(s,this.localizedTexts("inProgress"),"3")};this.progressingEnabled&&this.dotNetRef.invokeMethodAsync("ProgressEvent",c)}},h.prototype.cancelEventCallback=function(e,t,s,i){var a=this;if(i.cancel){if(e.statusCode="3",!sf.base.isNullOrUndefined(s)){var l=s.querySelector("."+n);sf.base.isNullOrUndefined(l)||(sf.popups.hideSpinner(l),sf.base.detach(s.querySelector(".e-spinner-pane")))}}else{t.emitError=!1,t.httpRequest.abort();var r=new FormData;if("5"===e.statusCode){var o=this.element.getAttribute("name");r.append(o,e.name),r.append("cancel-uploading",e.name);var u=new sf.base.Ajax(this.asyncSettings.removeUrl,"POST",!0,null);u.emitError=!1,u.onLoad=function(t){return a.removecanceledFile(t,e),{}},u.send(r)}}},h.prototype.cancelUploadingFile=function(e,t,s,i){var a=this;if("5"===e.statusCode){var n={event:t,fileData:e,cancel:!1};this.cancelEnabled?this.dotNetRef.invokeMethodAsync("CancelingEvent",n).then((function(t){a.cancelEventCallback(e,s,i,t)})):this.cancelEventCallback(e,s,i,n)}},h.prototype.removecanceledFile=function(e,t){var s=this.getLiElement(t);if(!s.querySelector("."+l)&&!sf.base.isNullOrUndefined(s.querySelector("."+n))){this.updateStatus(t,this.localizedTexts("fileUploadCancel"),"5"),this.renderFailureState(e,t,s);var a=s.querySelector("."+i);sf.base.isNullOrUndefined(s)||(sf.popups.hideSpinner(a),sf.base.detach(s.querySelector(".e-spinner-pane")));var r={event:e,response:e&&e.currentTarget?this.getResponse(e):null,operation:"cancel",file:t};this.successEnabled&&this.dotNetRef.invokeMethodAsync("SuccessEvent",r)}},h.prototype.renderFailureState=function(e,t,s){var a=this;this.updateProgressBarClasses(s,d),this.removeProgressbar(s,"failure"),sf.base.isNullOrUndefined(s.querySelector(".e-file-status"))||s.querySelector(".e-file-status").classList.add(d);var r=s.querySelector("."+n);sf.base.isNullOrUndefined(r)||(r.classList.remove(n,"e-upload-progress"),r.classList.add(i),r.setAttribute("title",this.localizedTexts("remove")),this.pauseButton=sf.base.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}}),r.parentElement.insertBefore(this.pauseButton,r),this.pauseButton.setAttribute("title",this.localizedTexts("retry")),s.querySelector("."+l).addEventListener("click",(function(e){a.reloadcanceledFile(e,t,s,!1)}),!1))},h.prototype.reloadcanceledFile=function(e,s,i,a){s.statusCode="1",s.status=this.localizedTexts("readyToUploadMessage"),a||(i.querySelector("."+t).classList.remove(d),sf.base.isNullOrUndefined(i.querySelector("."+l))||sf.base.detach(i.querySelector("."+l)),this.pauseButton=null),i.classList.add("e-restrict-retry"),this.upload([s])},h.prototype.uploadComplete=function(e,t,s){var i=e.target;if(4===i.readyState&&i.status>=200&&i.status<=299){var l=this.getLiElement(t);if(sf.base.isNullOrUndefined(l)&&(!s||sf.base.isNullOrUndefined(s)))return;if(!sf.base.isNullOrUndefined(l)){this.updateProgressBarClasses(l,u),this.removeProgressbar(l,"success");var r=l.querySelector("."+n);sf.base.isNullOrUndefined(r)||(r.classList.add(a),r.setAttribute("title",this.localizedTexts("delete")),r.classList.remove(n),r.classList.remove("e-upload-progress"))}this.raiseSuccessEvent(e,t)}else this.uploadFailed(e,t)},h.prototype.getResponse=function(e){var t=e.currentTarget;return{readyState:t.readyState,statusCode:t.status,statusText:t.statusText,headers:t.getAllResponseHeaders(),withCredentials:t.withCredentials}},h.prototype.serverRemoveIconBindEvent=function(){if(this.uploadWrapper&&this.isBlazorSaveUrl)for(var e=[].slice.call(this.uploadWrapper.querySelectorAll("ul li")),t=0;t<e.length;t++){var s=e[t]?e[t].querySelector(".e-icons"):null;s&&(sf.base.EventHandler.remove(s,"click",this.removeFiles),sf.base.EventHandler.add(s,"click",this.removeFiles,this))}},h.prototype.raiseSuccessEvent=function(e,t){var s=this,i=e&&e.currentTarget?this.getResponse(e):null,a=this.localizedTexts("uploadSuccessMessage"),n={e:e,response:i,operation:"upload",file:this.updateStatus(t,a,"2",!1),statusText:a};if(!this.isBlazorSaveUrl){var l=this.getLiElement(t);if(!sf.base.isNullOrUndefined(l)){var r=l.querySelector(".e-spinner-pane");sf.base.isNullOrUndefined(r)||(sf.popups.hideSpinner(l),sf.base.detach(r))}}this.successEnabled?this.dotNetRef.invokeMethodAsync("SuccessEvent",n).then((function(e){s.successEventCallback(t,e)})):this.successEventCallback(t,n)},h.prototype.successEventCallback=function(e,t){this.updateStatus(e,t.statusText,"2"),this.uploadedFilesData.push(e),!this.isBlazorSaveUrl&&this.changeEnabled&&this.dotNetRef.invokeMethodAsync("ChangeEvent",{files:this.uploadedFilesData}),this.checkActionButtonStatus(),this.fileList.length>0&&(this.getLiElement(e).classList.contains("e-restrict-retry")?this.getLiElement(e).classList.remove("e-restrict-retry"):(this.uploadSequential(),this.checkActionComplete(!0)))},h.prototype.uploadFailed=function(e,t){var s=this,i=this.getLiElement(t),a=e&&e.currentTarget?this.getResponse(e):null,n=this.localizedTexts("uploadFailedMessage"),l={e:e,response:a,operation:"upload",file:this.updateStatus(t,n,"0",!1),statusText:n};sf.base.isNullOrUndefined(i)||this.renderFailureState(e,t,i),this.failuredEnabled?this.dotNetRef.invokeMethodAsync("FailureEvent",l).then((function(e){s.failureEventCallback(t,e)})):this.failureEventCallback(t,l)},h.prototype.failureEventCallback=function(e,t){this.updateStatus(e,t.statusText,"0"),this.checkActionButtonStatus(),this.uploadSequential(),this.checkActionComplete(!0)},h.prototype.uploadSequential=function(){this.sequentialUpload&&(this.autoUpload?this.checkAutoUpload(this.filesData):this.uploadButtonClick())},h.prototype.checkActionComplete=function(e){e?++this.actionCompleteCount:--this.actionCompleteCount,this.raiseActionComplete()},h.prototype.raiseActionComplete=function(){if(this.filesData.length===this.actionCompleteCount&&this.flag){this.flag=!1;var e={fileData:[]};e.fileData=this.getSelectedFileStatus(this.selectedFiles),this.actionCompleteEnabled&&this.dotNetRef.invokeMethodAsync("ActionCompleteEvent",e)}},h.prototype.getSelectedFileStatus=function(e){for(var t=[],s=0,i=0;i<e.length;i++)for(var a=e[i],n=0;n<this.filesData.length;n++)this.filesData[n].name===a.name&&(t[s]=this.filesData[n],++s);return t},h.prototype.updateProgressBarClasses=function(e,t){var s=e.querySelector("."+o);sf.base.isNullOrUndefined(s)||s.classList.add(t)},h.prototype.removeProgressbar=function(e,t){var s=this;sf.base.isNullOrUndefined(e.querySelector("."+r))||(this.progressAnimation=new sf.base.Animation({duration:1250}),this.progressAnimation.animate(e.querySelector("."+r),{name:"FadeOut"}),this.progressAnimation.animate(e.querySelector(".e-progress-bar-text"),{name:"FadeOut"}),setTimeout((function(){s.animateProgressBar(e,t)}),750))},h.prototype.animateProgressBar=function(e,s){"success"===s?(e.classList.add(u),sf.base.isNullOrUndefined(e.querySelector("."+t))||(e.querySelector("."+t).classList.remove("e-upload-progress"),this.progressAnimation.animate(e.querySelector("."+t),{name:"FadeIn"}),e.querySelector("."+t).classList.add(u))):sf.base.isNullOrUndefined(e.querySelector("."+t))||(e.querySelector("."+t).classList.remove("e-upload-progress"),this.progressAnimation.animate(e.querySelector("."+t),{name:"FadeIn"}),e.querySelector("."+t).classList.add(d)),e.querySelector("."+r)&&sf.base.detach(e.querySelector("."+r))},h.prototype.localizedTexts=function(e){return this.localeText[e]},h.prototype.chunkUpload=function(e,t,s){var i=Math.min(this.asyncSettings.chunkSize,e.size),a={chunkIndex:0,blob:e.rawFile.slice(0,i),file:e,start:0,end:i,retryCount:0,request:null};this.sendRequest(e,a,t,s)},h.prototype.sendRequest=function(e,t,s,i){var a=this,n=new FormData,l=e.rawFile.slice(t.start,t.end);n.append("chunkFile",l,e.name),n.append(this.uploaderName,l,e.name),n.append("chunk-index",t.chunkIndex.toString()),n.append("chunkIndex",t.chunkIndex.toString());var r=Math.max(Math.ceil(e.size/this.asyncSettings.chunkSize),1);n.append("total-chunk",r.toString()),n.append("totalChunk",r.toString());var o=new sf.base.Ajax({url:this.asyncSettings.saveUrl,type:"POST",async:!0,contentType:null});o.emitError=!1,o.onLoad=function(e){return a.chunkUploadComplete(e,t,s),{}},o.onUploadProgress=function(e){return a.chunkUploadInProgress(e,t,s),{}};var u={fileData:e,customFormData:[],cancel:!1,chunkSize:0===this.asyncSettings.chunkSize?null:this.asyncSettings.chunkSize};o.beforeSend=function(s){u.currentRequest=o.httpRequest,u.currentChunkIndex=t.chunkIndex,a.currentRequestHeader&&a.updateCustomheader(o.httpRequest,a.currentRequestHeader),a.customFormDatas&&a.updateFormData(n,a.customFormDatas),0===u.currentChunkIndex?a.uploadingEnabled?a.dotNetRef.invokeMethodAsync("UploadingEvent",u).then((function(t){a.uploadingEventCallback(n,t,s,e)})):a.uploadingEventCallback(n,u,s,e):a.chunkUploadingEnabled?a.dotNetRef.invokeMethodAsync("ChunkUploadingEvent",u).then((function(t){a.uploadingEventCallback(n,t,s,e)})):a.uploadingEventCallback(n,u,s,e)},o.onError=function(e){return a.chunkUploadFailed(e,t,s),{}},o.send(n),t.request=o},h.prototype.uploadingEventCallback=function(e,t,s,i){t.cancel?this.eventCancelByArgs(s,t,i):this.updateFormData(e,t.customFormData)},h.prototype.eventCancelByArgs=function(e,s,a){var n=this;if(e.cancel=!0,"5"!==s.fileData.statusCode){var l=this.getLiElement(s.fileData);l.querySelector("."+t).innerHTML=this.localizedTexts("fileUploadCancel"),l.querySelector("."+t).classList.add(d),s.fileData.statusCode="5",s.fileData.status=this.localizedTexts("fileUploadCancel"),this.pauseButton=sf.base.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}});var r=l.querySelector("."+i);r.parentElement.insertBefore(this.pauseButton,r),this.pauseButton.setAttribute("title",this.localizedTexts("retry")),this.pauseButton.addEventListener("click",(function(e){n.reloadcanceledFile(e,a,l)}),!1),this.checkActionButtonStatus()}},h.prototype.checkChunkUpload=function(){return!(this.asyncSettings.chunkSize<=0||sf.base.isNullOrUndefined(this.asyncSettings.chunkSize))},h.prototype.chunkUploadComplete=function(e,t,s){var i,a=this,n=e.target;if(4===n.readyState&&n.status>=200&&n.status<300){var l=e&&e.currentTarget?this.getResponse(e):null,r=Math.max(Math.ceil(t.file.size/this.asyncSettings.chunkSize),1),o={event:e,file:t.file,chunkIndex:t.chunkIndex,totalChunk:r,chunkSize:this.asyncSettings.chunkSize,response:l};if(this.chunkSuccessEnabled&&this.dotNetRef.invokeMethodAsync("ChunkSuccessEvent",o),!sf.base.isNullOrUndefined(s)&&s||(i=this.getLiElement(t.file)),this.updateMetaData(t),t.end===t.file.size&&(t.file.statusCode="3"),"5"===t.file.statusCode){var u={event:e,fileData:t.file,cancel:!1};this.cancelEnabled?this.dotNetRef.invokeMethodAsync("CancelingEvent",u).then((function(e){a.cancelingEventCallback(t,i,n,s,e)})):this.cancelingEventCallback(t,i,n,s,u)}else{if(r-1===t.chunkIndex&&r>t.chunkIndex){var d=this.pausedData.indexOf(t);return d>=0&&this.pausedData.splice(d,1),sf.base.isNullOrUndefined(this.template)&&(sf.base.isNullOrUndefined(s)||!s)&&i&&(i&&sf.base.detach(i.querySelector("."+c)),this.removeChunkProgressBar(t)),void this.raiseSuccessEvent(e,t.file)}this.sendNextRequest(t)}}else this.chunkUploadFailed(e,t)},h.prototype.cancelingEventCallback=function(e,t,s,i,a){var l=this;if(a.cancel){e.file.statusCode="3";var r=t.querySelector("."+n);sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(r)||(sf.popups.hideSpinner(r),sf.base.detach(t.querySelector(".e-spinner-pane"))),this.sendNextRequest(e)}else{e.request.emitError=!1,s.abort();var o=new FormData,u=this.element.getAttribute("name");o.append(u,e.file.name),o.append("cancel-uploading",e.file.name),o.append("cancelUploading",e.file.name);var d=new sf.base.Ajax(this.asyncSettings.removeUrl,"POST",!0,null);d.emitError=!1,d.onLoad=function(t){return l.removeChunkFile(t,e,i),{}},d.send(o)}},h.prototype.sendNextRequest=function(e){e.start=e.end,e.end+=this.asyncSettings.chunkSize,e.end=Math.min(e.end,e.file.size),e.chunkIndex+=1,this.sendRequest(e.file,e)},h.prototype.removeChunkFile=function(e,t,s){if(sf.base.isNullOrUndefined(this.template)&&sf.base.isNullOrUndefined(s)&&!s){var a=this.getLiElement(t.file),r=a.querySelector("."+n),o=r;this.updateStatus(t.file,this.localizedTexts("fileUploadCancel"),"5"),this.updateProgressBarClasses(a,d),this.removeProgressbar(a,"failure"),r.classList.remove(n),r.classList.add(i),r.setAttribute("title",this.localizedTexts("remove"));var u=a.querySelector("."+c);u.classList.add(l),u.classList.remove(c),u.setAttribute("title",this.localizedTexts("retry")),sf.base.isNullOrUndefined(a)||sf.base.isNullOrUndefined(r)||(sf.popups.hideSpinner(o),sf.base.detach(a.querySelector(".e-spinner-pane")))}},h.prototype.pauseUpload=function(e,t,s){e.file.statusCode="4",e.file.status=this.localizedTexts("pause"),this.updateMetaData(e);var i={event:t||null,file:e.file,chunkIndex:e.chunkIndex,chunkCount:Math.round(e.file.size/this.asyncSettings.chunkSize),chunkSize:this.asyncSettings.chunkSize};this.abortUpload(e,s,i)},h.prototype.abortUpload=function(e,t,s){e.request.emitError=!1,e.request.httpRequest.abort();var a=this.getLiElement(e.file);if(sf.base.isNullOrUndefined(this.template)&&(sf.base.isNullOrUndefined(t)||!t)){var l=a.querySelector("."+c);l.classList.remove(c),l.classList.add("e-file-play-btn"),l.setAttribute("title",this.localizedTexts("resume")),l.nextElementSibling.classList.add(i),l.nextElementSibling.classList.remove(n),l.nextElementSibling.setAttribute("title",this.localizedTexts("remove"))}for(var r=0;r<this.pausedData.length;r++)this.pausedData[r].file.name===e.file.name&&this.pausedData.splice(r,1);this.pausedData.push(e),this.pausedEnabled&&this.dotNetRef.invokeMethodAsync("PausingEvent",s)},h.prototype.resumeUpload=function(e,t,s){var a,l=this.getLiElement(e.file);sf.base.isNullOrUndefined(l)||(a=l.querySelector(".e-file-play-btn")),sf.base.isNullOrUndefined(a)||!sf.base.isNullOrUndefined(s)&&s||(a.classList.remove("e-file-play-btn"),a.classList.add(c),a.setAttribute("title",this.localizedTexts("pause")),a.nextElementSibling.classList.remove(i),a.nextElementSibling.classList.add(n),a.nextElementSibling.setAttribute("title",this.localizedTexts("abort"))),e.file.status=this.localizedTexts("inProgress"),e.file.statusCode="3",this.updateMetaData(e);var r={event:t||null,file:e.file,chunkIndex:e.chunkIndex,chunkCount:Math.round(e.file.size/this.asyncSettings.chunkSize),chunkSize:this.asyncSettings.chunkSize};this.resumeEnabled&&this.dotNetRef.invokeMethodAsync("ResumingEvent",r);for(var o=0;o<this.pausedData.length;o++)this.pausedData[o].end===this.pausedData[o].file.size?this.chunkUploadComplete(t,e,s):this.pausedData[o].file.name===e.file.name&&(this.pausedData[o].start=this.pausedData[o].end,this.pausedData[o].end=this.pausedData[o].end+this.asyncSettings.chunkSize,this.pausedData[o].end=Math.min(this.pausedData[o].end,this.pausedData[o].file.size),this.pausedData[o].chunkIndex=this.pausedData[o].chunkIndex+1,this.sendRequest(this.pausedData[o].file,this.pausedData[o],s))},h.prototype.updateMetaData=function(e){-1===this.uploadMetaData.indexOf(e)||this.uploadMetaData.splice(this.uploadMetaData.indexOf(e),1),this.uploadMetaData.push(e)},h.prototype.removeChunkProgressBar=function(e){var t=this.getLiElement(e.file);if(!sf.base.isNullOrUndefined(t)){this.updateProgressBarClasses(t,u),this.removeProgressbar(t,"success");var s=t.querySelector("."+n);sf.base.isNullOrUndefined(s)||(s.classList.add(a),s.setAttribute("title",this.localizedTexts("delete")),s.classList.remove(n,"e-upload-progress"))}},h.prototype.chunkUploadFailed=function(e,t,s){var i,a=this,n=Math.max(Math.ceil(t.file.size/this.asyncSettings.chunkSize),1);!sf.base.isNullOrUndefined(this.template)||!sf.base.isNullOrUndefined(s)&&s||(i=this.getLiElement(t.file));var l=e&&e.currentTarget?this.getResponse(e):null,r={event:e,file:t.file,chunkIndex:t.chunkIndex,totalChunk:n,chunkSize:this.asyncSettings.chunkSize,cancel:!1,response:l};this.chunkFailuredEnabled?this.dotNetRef.invokeMethodAsync("ChunkFailureEvent",r).then((function(n){a.chunkFailureCallback(e,t,i,l,s,n)})):this.chunkFailureCallback(e,t,i,l,s,r)},h.prototype.chunkFailureCallback=function(e,t,s,r,o,u){var h=this;if(!u.cancel)if(t.retryCount<this.asyncSettings.retryCount)setTimeout((function(){h.retryRequest(s,t,o)}),this.asyncSettings.retryAfterDelay);else{if(!sf.base.isNullOrUndefined(s)){var p=s.querySelector("."+c)?s.querySelector("."+c):s.querySelector(".e-file-play-btn");sf.base.isNullOrUndefined(p)||(p.classList.add(l),p.classList.remove(c,"e-file-play-btn")),this.updateProgressBarClasses(s,d),this.removeProgressbar(s,"failure"),s.querySelector(".e-icons").classList.remove("e-upload-progress");var f=s.querySelector("."+n)?s.querySelector("."+n):s.querySelector("."+i);f.classList.remove(n),sf.base.isNullOrUndefined(s.querySelector("."+c))||sf.base.detach(s.querySelector("."+c)),t.start>0?(f.classList.add(a),f.setAttribute("title",this.localizedTexts("delete"))):(f.classList.add(i),f.setAttribute("title",this.localizedTexts("remove")))}t.retryCount=0;var v=t.file,m=this.localizedTexts("uploadFailedMessage"),b={e:e,response:r,operation:"upload",file:this.updateStatus(v,m,"0",!1),statusText:m};this.failuredEnabled?this.dotNetRef.invokeMethodAsync("FailureEvent",b).then((function(e){h.failureCallback(v,e)})):this.failureCallback(v,b)}},h.prototype.failureCallback=function(e,t){this.updateStatus(e,t.statusText,"0"),this.uploadSequential(),this.checkActionComplete(!0)},h.prototype.retryRequest=function(e,t,s){sf.base.isNullOrUndefined(this.template)&&(sf.base.isNullOrUndefined(s)||!s)&&e&&this.updateProgressBarClasses(e,d),t.retryCount+=1,this.sendRequest(t.file,t)},h.prototype.checkPausePlayAction=function(e){var t=e.target,s=e.target.parentElement,i=this.fileList.indexOf(s),a=this.filesData[i],n=this.getCurrentMetaData(a);t.classList.contains(c)?this.pauseUpload(n,e):t.classList.contains("e-file-play-btn")?this.resumeUpload(n,e):t.classList.contains(l)&&(n.file.status===this.localizedTexts("fileUploadCancel")?this.retryUpload(n,!1):this.retryUpload(n,!0))},h.prototype.retryUpload=function(e,t){t?(e.end=e.end+this.asyncSettings.chunkSize,e.start=e.start+this.asyncSettings.chunkSize,this.sendRequest(e.file,e)):(e.file.statusCode="1",e.file.status=this.localizedTexts("readyToUploadMessage"),this.chunkUpload(e.file)),this.getLiElement(e.file).classList.add("e-restrict-retry")},h.prototype.chunkUploadInProgress=function(e,s,o){var u=this;if("4"!==s.file.statusCode){"4"!==s.file.statusCode&&"5"!==s.file.statusCode&&(s.file.statusCode="3",s.file.status=this.localizedTexts("inProgress")),this.updateMetaData(s);var h=this.getLiElement(s.file);if(!sf.base.isNullOrUndefined(h)){var p=h.querySelector("."+l);if(sf.base.isNullOrUndefined(p)||(p.classList.add(c),p.setAttribute("title",this.localizedTexts("pause")),p.classList.remove(l)),!sf.base.isNullOrUndefined(h)){if(!(h.querySelectorAll("."+r).length>0)){var f=h.querySelector("."+t);sf.base.isNullOrUndefined(this.template)&&(f.classList.add("e-upload-progress"),f.classList.remove(d),this.createProgressBar(h),this.updateProgressBarClasses(h,"e-upload-progress"));var v=h.querySelector("."+i)?h.querySelector("."+i):h.querySelector("."+a);sf.base.isNullOrUndefined(v)||(v.classList.add(n),v.setAttribute("title",this.localizedTexts("abort")),v.classList.remove(i))}if(!isNaN(Math.round(e.loaded/e.total*100))&&sf.base.isNullOrUndefined(this.template)&&"4"!==s.file.statusCode){var m=s.chunkIndex*this.asyncSettings.chunkSize,b=e.loaded;b>this.asyncSettings.chunkSize&&(b=this.asyncSettings.chunkSize);var y=Math.min((m+b)/s.file.size*100,100);this.changeProgressValue(h,Math.round(y).toString()+"%")}0===s.chunkIndex&&this.checkActionButtonStatus()}if(sf.base.isNullOrUndefined(h.querySelector("."+c))&&sf.base.isNullOrUndefined(this.template)){this.pauseButton=sf.base.createElement("span",{className:"e-icons e-file-pause-btn",attrs:{tabindex:this.btnTabIndex}}),"msie"===this.browserName&&this.pauseButton.classList.add("e-msie");var g=h.querySelector("."+n);g.parentElement.insertBefore(this.pauseButton,g),this.pauseButton.setAttribute("title",this.localizedTexts("pause")),this.pauseButton.addEventListener("click",(function(e){u.checkPausePlayAction(e)}),!1)}}}},h.prototype.bytesToSize=function(e){var t=-1;if(!e)return"0.0 KB";do{e/=1024,t++}while(e>99);return t>=2&&(e*=1024,t=1),Math.max(e,0).toFixed(1)+" "+["KB","MB"][t]},h.prototype.sortFileList=function(e){for(var t=e=e||this.sortFilesList,s=[],i=0;i<t.length;i++)s.push(t[i].name);for(var a=[],n=0,l=s.sort();n<l.length;n++){var r=l[n];for(i=0;i<t.length;i++)r===t[i].name&&a.push(t[i])}return a},h.prototype.destroy=function(){this.element.value=null,this.isBlazorSaveUrl||this.isBlazorTemplate||this.clearAll(),this.unWireEvents(),this.unBindDropEvents(),this.element.removeAttribute("accept"),this.setInitialAttributes();for(var e=0,t=["aria-label","directory","webkitdirectory","tabindex"];e<t.length;e++){var s=t[e];this.element.removeAttribute(s)}},h.prototype.upload=function(e,t){var s=this;if(e=e||this.filesData,this.sequentialUpload&&(this.isFirstFileOnSelection||t))this.sequenceUpload(e);else{var i=this.getFilesInArray(e),a={customFormData:[],currentRequest:null,cancel:!1,filesData:i};this.beforeUploadEnabled?this.dotNetRef.invokeMethodAsync("BeforeUploadEvent",a).then((function(e){s.beforeUploadCallback(i,t,e)})):this.beforeUploadCallback(i,t,a)}},h.prototype.beforeUploadCallback=function(e,t,s){s.cancel||(this.currentRequestHeader=s.currentRequest?s.currentRequest:this.currentRequestHeader,this.customFormDatas=s.customFormData&&s.customFormData.length>0?s.customFormData:this.customFormDatas,this.uploadFiles(e,t))},h.prototype.getFilesInArray=function(e){var t=[];return e instanceof Array?t=this.getFileListData(e):t.push(e),t},h.prototype.getFileListData=function(e){var t=[];if(!sf.base.isNullOrUndefined(this.filesData)&&!sf.base.isNullOrUndefined(e))for(var s=function(s){t.push(i.filesData.filter((function(t){return t.name===e[s].name}))[0])},i=this,a=0;a<e.length;a++)s(a);return sf.base.isNullOrUndefined(t)?[]:t},h.prototype.serverReadFileBase64=function(e,t,s){var i=this;return new Promise((function(a,n){var l,r=i.fileStreams[e].rawFile;try{var o=new FileReader;o.onload=(l=o,function(){try{var e=l.result,t=e?e.split(";base64,")[1]:null;a(t)}catch(e){n(e)}}),o.readAsDataURL(r.slice(t,t+s))}catch(e){n(e)}}))},h.prototype.uploadFileCount=function(e){var t=this.filesData;return t&&0!==t.length?t.length:-1},h.prototype.getFileRead=function(e,t){var s=this.filesData;if(!s||0===s.length)return-1;var i=s[e],a=this.newFileRef++;return this.fileStreams[a]=i,a},h.prototype.getFileInfo=function(e,t){var s=this.filesData;return s&&0!==s.length&&s[e]?this.filesData[e]:null},h.prototype.uploadFiles=function(e,t){var s=this,i=[];if(""===this.asyncSettings.saveUrl||sf.base.isNullOrUndefined(this.asyncSettings.saveUrl))this.dotNetRef.invokeMethodAsync("GetFileDetails",e);else{if(!t||sf.base.isNullOrUndefined(t))if(this.multiple)i=this.filterfileList(e);else{var a=[];a.push(e[0]),i=this.filterfileList(a)}else i=e;for(var n=function(e){l.checkChunkUpload()?l.uploadFilesRequest(i,e,t):i[e]&&i[e].rawFile instanceof File&&l.getBase64(i[e].rawFile).then((function(a){s.base64String.push(a),s.uploadFilesRequest(i,e,t)}))},l=this,r=0;r<i.length;r++)n(r)}},h.prototype.uploadFilesRequest=function(e,t,s){var i,a=this,n=[],l=this.checkChunkUpload(),r=new sf.base.Ajax(this.asyncSettings.saveUrl,"POST",!0,null);r.emitError=!1,i=e.slice(0),n.push(i[t].rawFile);var o={fileData:i[t],customFormData:[],cancel:!1},u=new FormData;if(r.beforeSend=function(s){o.currentRequest=r.httpRequest,o.fileData.rawFile=l?o.fileData.rawFile:a.base64String[t],a.currentRequestHeader&&a.updateCustomheader(r.httpRequest,a.currentRequestHeader),a.customFormDatas&&a.updateFormData(u,a.customFormDatas),a.uploadingEnabled?a.dotNetRef.invokeMethodAsync("UploadingEvent",o).then((function(i){o=i,a.uploadCallback(s,l,e,u,t,n,i)})):a.uploadCallback(s,l,e,u,t,n,o)},"1"===e[t].statusCode){var d=this.element.getAttribute("name");u.append(d,e[t].rawFile,e[t].name),l&&e[t].size>this.asyncSettings.chunkSize?this.chunkUpload(e[t],s,t):(r.onLoad=function(i){return o.cancel||a.uploadComplete(i,e[t],s),{}},r.onUploadProgress=function(i){return o.cancel||a.uploadInProgress(i,e[t],s,r),{}},r.onError=function(s){return a.uploadFailed(s,e[t]),{}},r.send(u))}},h.prototype.uploadCallback=function(e,t,s,i,a,n,l){t||(s[a].rawFile=l.fileData.rawFile=n[a]),l.cancel&&this.eventCancelByArgs(e,l,s[a]),this.updateFormData(i,l.customFormData)},h.prototype.spliceFiles=function(e){for(var t=this.fileList[e],s=this.getFilesData(),i=+t.getAttribute("data-files-count"),a=0,n=0;n<e;n++)a+=+this.fileList[n].getAttribute("data-files-count");for(var l=a+i-1;l>=a;l--)s.splice(l,1)},h.prototype.remove=function(e,t,s,i,a){var n=this;sf.base.isNullOrUndefined(i)&&(i=!0);var l={cancel:!1,customFormData:[],currentRequest:null,filesData:this.getFilesInArray(e)};this.beforeRemoveEnabled?this.dotNetRef.invokeMethodAsync("BeforeRemoveEvent",l).then((function(l){n.beforeRemoveCallback(e,t,s,i,a,l)})):this.beforeRemoveCallback(e,t,s,i,a,l)},h.prototype.beforeRemoveCallback=function(e,t,s,a,n,l){var r=this,o={event:n,cancel:!1,filesData:[],customFormData:[],postRawFile:a,currentRequest:null};if(!l.cancel){this.currentRequestHeader=l.currentRequest,this.customFormDatas=l.customFormData;if(this.isFormUpload()&&!this.isBlazorSaveUrl)o.filesData=e,this.dotNetRef.invokeMethodAsync("RemovingEvent",o).then((function(t){r.removeCallback(e,t)}));else if(!this.isForm||!sf.base.isNullOrUndefined(this.asyncSettings.removeUrl)&&""!==this.asyncSettings.removeUrl||this.isBlazorSaveUrl){var u=[];(e=sf.base.isNullOrUndefined(e)?this.filesData:e)instanceof Array?u=e:u.push(e),o.filesData=u;for(var d=this.asyncSettings.removeUrl,c=""!==d&&!sf.base.isNullOrUndefined(d),h=function(e){p.filesData.indexOf(e);var a=p.uploadedFilesData.indexOf(e);("2"===e.statusCode||"4"===e.statusCode||"0"===e.statusCode&&-1!==a)&&c?p.removeUploadedFile(e,o,s,t):!s&&p.removingEnabled?p.dotNetRef.invokeMethodAsync("RemovingEvent",o).then((function(s){s.cancel||r.removeFilesData(e,t)})):p.removeFilesData(e,t),n&&!n.target.classList.contains(i)&&p.checkActionComplete(!1)},p=this,f=0,v=u;f<v.length;f++){h(v[f])}}else o.filesData=this.getFilesData(),this.removingEnabled?this.dotNetRef.invokeMethodAsync("RemovingEvent",o).then((function(e){e.cancel||r.clearAll()})):this.clearAll()}},h.prototype.removeCallback=function(e,t){if(!t.cancel)for(var s=!1,i=void 0,a=0,n=this.getFilesInArray(e);a<n.length;a++){var l=n[a];if(s||(i=this.fileList.indexOf(l.list)),i>-1){var r=sf.base.isNullOrUndefined(l.input)?null:l.input;r&&sf.base.detach(r),this.spliceFiles(i),sf.base.detach(this.fileList[i]),this.fileList.splice(i,1),s=!0,i=-1}}},h.prototype.clearAll=function(){var e=this;if(sf.base.isNullOrUndefined(this.listParent)&&!this.isBlazorSaveUrl&&!this.isBlazorTemplate)return"msie"!==this.browserName&&(this.element.value=""),void(this.filesData=[]);var t={cancel:!1,filesData:this.filesData};this.clearEnabled?this.dotNetRef.invokeMethodAsync("ClearingEvent",t).then((function(t){t.cancel||(e.clearData(),e.actionCompleteCount=0,e.count=-1)})):(this.clearData(),this.actionCompleteCount=0,this.count=-1)},h.prototype.getFilesData=function(e){if(sf.base.isNullOrUndefined(e)){for(var t=0;t<this.filesData.length;t++)this.filesData[t].rawFile=this.base64String[t];return this.filesData}return this.getSelectedFiles(e)},h.prototype.pause=function(e,t){e=e||this.filesData;var s=this.getFilesInArray(e);this.pauseUploading(s,t)},h.prototype.pauseUploading=function(e,t){for(var s=this.getFiles(e),i=0;i<s.length;i++)"3"===s[i].statusCode&&this.pauseUpload(this.getCurrentMetaData(s[i],null),null,t)},h.prototype.getFiles=function(e){var t=[];return sf.base.isNullOrUndefined(e)||e instanceof Array?t=e:t.push(e),t},h.prototype.resume=function(e,t){e=e||this.filesData;var s=this.getFilesInArray(e);this.resumeFiles(s,t)},h.prototype.resumeFiles=function(e,t){for(var s=this.getFiles(e),i=0;i<s.length;i++)"4"===s[i].statusCode&&this.resumeUpload(this.getCurrentMetaData(s[i],null),null,t)},h.prototype.retry=function(e,t,s){e=e||this.filesData;var i=this.getFilesInArray(e);this.retryFailedFiles(i,t,s)},h.prototype.retryFailedFiles=function(e,t,s){for(var i=this.getFiles(e),a=0;a<i.length;a++)if("5"===i[a].statusCode||"0"===i[a].statusCode)if(this.asyncSettings.chunkSize>0)this.retryUpload(this.getCurrentMetaData(i[a],null),t);else{var n=void 0;s||(n=this.fileList[this.filesData.indexOf(i[a])]),this.reloadcanceledFile(null,i[a],n,s)}},h.prototype.cancel=function(e){e=e||this.filesData;var t=this.getFilesInArray(e);this.cancelUpload(t)},h.prototype.cancelUpload=function(e){var t=this.getFiles(e);if(this.asyncSettings.chunkSize>0){for(var s=0;s<t.length;s++)if("3"===t[s].statusCode){var i=this.getCurrentMetaData(t[s],null);i.file.statusCode="5",i.file.status=this.localizedTexts("fileUploadCancel"),this.updateMetaData(i),this.showHideUploadSpinner(t[s])}}else for(s=0;s<t.length;s++)"3"===t[s].statusCode&&(t[s].statusCode="5",t[s].status=this.localizedTexts("fileUploadCancel"),this.showHideUploadSpinner(t[s]))},h.prototype.showHideUploadSpinner=function(e){var t=this.getLiElement(e);if(!sf.base.isNullOrUndefined(t)&&sf.base.isNullOrUndefined(this.template)){var s=t.querySelector("."+n);sf.popups.createSpinner({target:s,width:"20px"}),sf.popups.showSpinner(s)}},h}();return{initialize:function(e,t,s){e&&new h(e,t,s),e&&e.blazor__instance&&e.blazor__instance.initialize()},uploadFileCount:function(e){return e&&e.blazor__instance?e.blazor__instance.uploadFileCount(e):0},getFileRead:function(e,t){return e&&e.blazor__instance?e.blazor__instance.getFileRead(t,e):0},getFileInfo:function(e,t){return e&&e.blazor__instance?e.blazor__instance.getFileInfo(t,e):null},serverReadFileBase64:function(e,t,s,i){return e&&e.blazor__instance?e.blazor__instance.serverReadFileBase64(t,s,i):null},raiseSuccessEvent:function(e,t){e&&e.blazor__instance&&e.blazor__instance.raiseSuccessEvent(null,t)},serverRemoveIconBindEvent:function(e){e&&e.blazor__instance&&e.blazor__instance.serverRemoveIconBindEvent()},serverFileListElement:function(e,t,s,i){e&&e.blazor__instance&&(e.blazor__instance.serverUlElement(t),i||e.blazor__instance.serverActionButtonsEventBind(s))},bytesToSize:function(e,t){return e&&e.blazor__instance?e.blazor__instance.bytesToSize(t):""},cancel:function(e,t){e&&e.blazor__instance&&e.blazor__instance.cancel(t)},clearAll:function(e){e&&e.blazor__instance&&e.blazor__instance.clearAll()},createFileList:function(e,t,s){e&&e.blazor__instance&&e.blazor__instance.createFileList(t,s)},getFilesData:function(e,t){return e&&e.blazor__instance?e.blazor__instance.getFilesData(t):null},pause:function(e,t,s){e&&e.blazor__instance&&e.blazor__instance.pause(t,s)},remove:function(e,t,s,i,a,n){e&&e.blazor__instance&&e.blazor__instance.remove(t,s,i,a,n)},resume:function(e,t,s){e&&e.blazor__instance&&e.blazor__instance.resume(t,s)},retry:function(e,t,s,i){e&&e.blazor__instance&&e.blazor__instance.retry(t,s,i)},sortFileList:function(e,t){return e&&e.blazor__instance?e.blazor__instance.sortFileList(t):null},upload:function(e,t,s){e&&e.blazor__instance&&e.blazor__instance.upload(t,s)},propertyChanges:function(e,t,s){e&&e.blazor__instance&&e.blazor__instance.propertyChanges(t,s)}}}()}});