!function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s="./bundles/listview.js")}({"./bundles/listview.js":function(e,t,i){"use strict";i.r(t);i("./modules/listview.js");i.p="_content/Syncfusion.Blazor.Lists/scripts/"},"./modules/listview.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sf=window.sf||{};sf.lists=sf.base.extend({},sf.lists,function(e){"use strict";var t,s=(t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,i)},function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}),n=function(e,t,s,n){var l,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,n);else for(var o=e.length-1;o>=0;o--)(l=e[o])&&(r=(a<3?l(r):a>3?l(t,s,r):l(t,s))||r);return a>3&&r&&Object.defineProperty(t,s,r),r},l={None:[],SlideLeft:["SlideRightOut","SlideLeftOut","SlideLeftIn","SlideRightIn"],SlideDown:["SlideTopOut","SlideBottomOut","SlideBottomIn","SlideTopIn"],Zoom:["FadeOut","FadeZoomOut","FadeZoomIn","FadeIn"],Fade:["FadeOut","FadeOut","FadeIn","FadeIn"]},a={None:[],SlideLeft:["SlideLeftOut","SlideRightOut","SlideRightIn","SlideLeftIn"],SlideDown:["SlideBottomOut","SlideTopOut","SlideTopIn","SlideBottomIn"],Zoom:["FadeZoomOut","FadeOut","FadeIn","FadeZoomIn"],Fade:["FadeOut","FadeOut","FadeIn","FadeIn"]},r={root:"e-listview",hover:"e-hover",selected:"e-active",focused:"e-focused",parentItem:"e-list-parent",listItem:"e-list-item",listIcon:"e-list-icon",textContent:"e-text-content",listItemText:"e-list-text",groupListItem:"e-list-group-item",hasChild:"e-has-child",view:"e-view",header:"e-list-header",headerText:"e-headertext",headerTemplateText:"e-headertemplate-text",text:"e-text",disable:"e-disabled",content:"e-content",icon:"e-icons",backIcon:"e-icon-back",checkboxWrapper:"e-checkbox-wrapper",checkbox:"e-checkbox",checked:"e-check",checklist:"e-checklist",checkboxIcon:"e-frame",checkboxRight:"e-checkbox-right",checkboxLeft:"e-checkbox-left",listviewCheckbox:"e-listview-checkbox",itemCheckList:"e-checklist",virtualElementContainer:"e-list-virtualcontainer"},o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),n([sf.base.Property("id")],t.prototype,"id",void 0),n([sf.base.Property("text")],t.prototype,"text",void 0),n([sf.base.Property("isChecked")],t.prototype,"isChecked",void 0),n([sf.base.Property("isVisible")],t.prototype,"isVisible",void 0),n([sf.base.Property("enabled")],t.prototype,"enabled",void 0),n([sf.base.Property("iconCss")],t.prototype,"iconCss",void 0),n([sf.base.Property("child")],t.prototype,"child",void 0),n([sf.base.Property("tooltip")],t.prototype,"tooltip",void 0),n([sf.base.Property("groupBy")],t.prototype,"groupBy",void 0),n([sf.base.Property("text")],t.prototype,"sortBy",void 0),n([sf.base.Property("htmlAttributes")],t.prototype,"htmlAttributes",void 0),n([sf.base.Property("tableName")],t.prototype,"tableName",void 0),t}(sf.base.ChildProperty),h=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.itemReRender=!1,s.previousSelectedItems=[],s.hiddenItems=[],s.enabledItems=[],s.disabledItems=[],s}return s(t,e),t.prototype.onPropertyChanged=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){switch(s[i]){case"htmlAttributes":this.setHTMLAttribute();break;case"cssClass":this.setCSSClass(t.cssClass);break;case"enable":this.setEnable();break;case"width":case"height":this.setSize();break;case"enableRtl":this.setEnableRTL();break;case"fields":this.listBaseOption.fields=this.fields.properties,this.enableVirtualization?this.isServerRendered&&sf.base.isBlazor()||this.virtualizationModule.reRenderUiVirtualization():(sf.base.isBlazor()&&this.isServerRendered&&!this.enableVirtualization&&(this.itemReRender=!0),this.reRender());break;case"headerTitle":this.curDSLevel.length||this.header(this.headerTitle,!1,"header");break;case"query":this.enableVirtualization?sf.base.isBlazor()&&this.isServerRendered||this.virtualizationModule.reRenderUiVirtualization():(sf.base.isBlazor()&&this.isServerRendered&&!this.enableVirtualization&&(this.itemReRender=!0),this.reRender());break;case"showHeader":this.header(this.headerTitle,!1,"header");break;case"enableVirtualization":sf.base.isNullOrUndefined(this.contentContainer)||sf.base.detach(this.contentContainer),this.refresh();break;case"showCheckBox":case"checkBoxPosition":sf.base.isBlazor()&&this.isServerRendered||(this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():this.setCheckbox());break;case"dataSource":this.enableVirtualization?this.isServerRendered&&sf.base.isBlazor()||this.virtualizationModule.reRenderUiVirtualization():(sf.base.isBlazor()&&this.isServerRendered&&!this.enableVirtualization&&(this.itemReRender=!0),this.reRender());break;case"sortOrder":case"showIcon":sf.base.isBlazor()&&this.isServerRendered?this.interopAdaptor.invokeMethodAsync("ItemSorting"):this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():(this.listBaseOption.showIcon=this.showIcon,this.curViewDS=this.getSubDS(),this.resetCurrentList())}}},t.prototype.setHTMLAttribute=function(){Object.keys(this.htmlAttributes).length&&sf.base.attributes(this.element,this.htmlAttributes)},t.prototype.setCSSClass=function(e){this.cssClass&&sf.base.addClass([this.element],this.cssClass.split(" ").filter((function(e){return e}))),e&&sf.base.removeClass([this.element],e.split(" ").filter((function(e){return e})))},t.prototype.setSize=function(){this.element.style.height=sf.base.formatUnit(this.height),this.element.style.width=sf.base.formatUnit(this.width),this.isWindow=!this.element.clientHeight},t.prototype.setEnable=function(){this.enableElement(this.element,this.enable)},t.prototype.setEnableRTL=function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},t.prototype.enableElement=function(e,t){t?e.classList.remove(r.disable):e.classList.add(r.disable)},t.prototype.header=function(e,t,i){if(sf.base.isBlazor()&&this.isServerRendered){var s={HeaderText:e,BackButton:t};this.interopAdaptor.invokeMethodAsync("HeaderTitle",s)}else if(void 0===this.headerEle&&this.showHeader){this.enableHtmlSanitizer&&this.setProperties({headerTitle:sf.base.SanitizeHtmlHelper.sanitize(this.headerTitle)},!0),this.headerEle=this.createElement("div",{className:r.header});var n=this.createElement("span",{className:r.headerText,innerHTML:this.headerTitle}),l=this.createElement("div",{className:r.text,innerHTML:n.outerHTML}),a=this.createElement("div",{className:r.icon+" "+r.backIcon+" e-but-back",attrs:{style:"display:none;"}});if(this.headerEle.appendChild(a),this.headerEle.appendChild(l),this.headerTemplate){var o=sf.base.compile(this.headerTemplate),h=this.createElement("div",{className:r.headerTemplateText}),c=o({},this,i,this.LISTVIEW_HEADERTEMPLATE_ID,null,null,this.headerEle);c&&sf.base.append(c,h),sf.base.append([h],this.headerEle),this.updateBlazorTemplates(!1,!0,!0),this.isReact&&this.renderReactTemplates()}this.headerTemplate&&this.headerTitle&&l.classList.add("header"),this.element.classList.add("e-has-header"),sf.base.prepend([this.headerEle],this.element)}else if(this.headerEle)if(this.showHeader){this.headerEle.style.display="";l=this.headerEle.querySelector("."+r.headerText),a=this.headerEle.querySelector("."+r.backIcon);this.enableHtmlSanitizer&&(e=sf.base.SanitizeHtmlHelper.sanitize(e)),l.innerHTML=e,this.headerTemplate&&t&&(l.parentElement.classList.remove("header"),this.headerEle.querySelector("."+r.headerTemplateText).classList.add("nested-header")),this.headerTemplate&&!t&&(l.parentElement.classList.add("header"),this.headerEle.querySelector("."+r.headerTemplateText).classList.remove("nested-header"),this.headerEle.querySelector("."+r.headerTemplateText).classList.add("header")),a.style.display=!0===t?"":"none"}else this.headerEle.style.display="none"},t.prototype.switchView=function(e,t,i){var s=this;if(e&&t){this.trigger("actionBegin",{startList:e,endList:t,isReverse:i});var n=e.style.position,r="hidden"!==this.element.style.overflow?this.element.style.overflow:"";e.style.position="absolute",e.classList.add("e-view");var o=void 0,h=this.animation.duration;if(this.animation.effect)o=this.enableRtl?a[this.animation.effect]:l[this.animation.effect];else{o=l.SlideLeft,i=this.enableRtl,h=0}this.element.style.overflow="hidden",this.aniObj.animate(e,{name:!0===i?o[0]:o[1],duration:h,timingFunction:this.animation.easing,end:function(t){e.style.display="none",s.element.style.overflow=r,e.style.position=n,e.classList.remove("e-view")}}),t.style.display="",this.aniObj.animate(t,{name:!0===i?o[2]:o[3],duration:h,timingFunction:this.animation.easing,end:function(){s.trigger("actionComplete")}}),this.curUL=t}},t.prototype.preRender=function(){if(this.template)try{document.querySelectorAll(this.template).length&&(this.template=document.querySelector(this.template).innerHTML.trim())}catch(e){sf.base.compile(this.template),this.isReact&&this.renderReactTemplates()}this.listBaseOption={template:this.template,headerTemplate:this.headerTemplate,groupTemplate:this.groupTemplate,expandCollapse:!0,listClass:"",ariaAttributes:{itemRole:"option",listRole:"presentation",itemText:"",groupItemRole:"group",wrapperRole:"presentation"},fields:this.fields.properties,sortOrder:this.sortOrder,showIcon:this.showIcon,itemCreated:this.renderCheckbox.bind(this),templateID:this.element.id+"Template",groupTemplateID:this.element.id+"GroupTemplate",enableHtmlSanitizer:this.enableHtmlSanitizer,removeBlazorID:!0},this.initialization()},t.prototype.updateLiElementHeight=function(){var e=this.element.querySelector("."+r.virtualElementContainer);e.children[0]&&(this.liElementHeight=e.children[0].getBoundingClientRect().height,this.interopAdaptor.invokeMethodAsync("LiElementHeight",this.liElementHeight))},t.prototype.initialization=function(){if(sf.base.isBlazor()&&this.isServerRendered&&this.enableVirtualization){var e=this.element.querySelector("."+r.virtualElementContainer);null!==e&&(""===this.height&&(this.interopAdaptor.invokeMethodAsync("SetComponentHeight",window.innerHeight),this.isWindow=!0,e.scrollIntoView()),-1!==this.height.toString().indexOf("%")&&this.interopAdaptor.invokeMethodAsync("SetContainerHeight",this.element.getBoundingClientRect().height.toString()),e.children[0]&&(this.liElementHeight=e.children[0].getBoundingClientRect().height,this.interopAdaptor.invokeMethodAsync("LiElementHeight",this.liElementHeight)))}this.curDSLevel=[],this.animateOptions={},this.curViewDS=[],this.currentLiElements=[],this.isNestedList=!1,this.selectedData=[],this.selectedId=[],this.LISTVIEW_TEMPLATE_ID=this.element.id+"Template",this.LISTVIEW_GROUPTEMPLATE_ID=this.element.id+"GroupTemplate",this.LISTVIEW_HEADERTEMPLATE_ID=this.element.id+"HeaderTemplate",this.aniObj=new sf.base.Animation(this.animateOptions),this.removeElement(this.curUL),this.removeElement(this.ulElement),this.removeElement(this.headerEle),this.removeElement(this.contentContainer),this.isReact&&this.clearTemplate(),this.curUL=this.ulElement=this.liCollection=this.headerEle=this.contentContainer=void 0},t.prototype.renderCheckbox=function(e){if(e.item.classList.contains(r.hasChild)&&(this.isNestedList=!0),this.showCheckBox&&this.isValidLI(e.item)){var t=void 0;(t=sf.buttons.createCheckBox(this.createElement,!1,{checked:!1,enableRtl:this.enableRtl,cssClass:r.listviewCheckbox})).setAttribute("role","checkbox");var i=t.querySelector("."+r.checkboxIcon);e.item.classList.add(r.itemCheckList),e.item.firstElementChild.classList.add(r.checkbox),"string"!=typeof this.dataSource[0]&&"number"!=typeof this.dataSource[0]?sf.lists.getFieldValues(e.curData,this.listBaseOption.fields)[this.listBaseOption.fields.isChecked]&&this.checkInternally(e,t):"string"!=typeof this.dataSource[0]&&"number"!=typeof this.dataSource[0]||-1===this.selectedData.indexOf(e.text)||this.checkInternally(e,t),t.setAttribute("aria-checked",i.classList.contains(r.checked)?"true":"false"),"Left"===this.checkBoxPosition?(t.classList.add(r.checkboxLeft),e.item.firstElementChild.classList.add(r.checkboxLeft),e.item.firstElementChild.insertBefore(t,e.item.firstElementChild.childNodes[0])):(t.classList.add(r.checkboxRight),e.item.firstElementChild.classList.add(r.checkboxRight),e.item.firstElementChild.appendChild(t)),this.currentLiElements.push(e.item),"Left"===this.checkBoxPosition?this.virtualCheckBox=e.item.firstElementChild.children[0]:this.virtualCheckBox=e.item.firstElementChild.lastElementChild}},t.prototype.checkInternally=function(e,t){e.item.classList.add(r.selected),e.item.setAttribute("aria-selected","true"),t.querySelector("."+r.checkboxIcon).classList.add(r.checked),t.setAttribute("aria-checked","true")},t.prototype.checkItem=function(e){this.toggleCheckBase(e,!0)},t.prototype.toggleCheckBase=function(e,t){if(this.showCheckBox){var i=e;if(e instanceof Object&&e.constructor!==HTMLLIElement&&(i=this.getLiFromObjOrElement(e)),!sf.base.isNullOrUndefined(i)){var s=i.querySelector("."+r.checkboxIcon);t?i.classList.add(r.selected):i.classList.remove(r.selected),i.setAttribute("aria-selected",t?"true":"false"),t?s.classList.add(r.checked):s.classList.remove(r.checked),s.parentElement.setAttribute("aria-checked",t?"true":"false")}this.setSelectedItemData(i)}},t.prototype.uncheckItem=function(e){this.toggleCheckBase(e,!1)},t.prototype.checkAllItems=function(){this.toggleAllCheckBase(!0)},t.prototype.uncheckAllItems=function(){this.toggleAllCheckBase(!1)},t.prototype.toggleAllCheckBase=function(e){if(this.showCheckBox){for(var t=0;t<this.liCollection.length;t++){var i=this.liCollection[t].querySelector("."+r.checkboxIcon);i&&(e?i.classList.contains(r.checked)||this.checkItem(this.liCollection[t]):i.classList.contains(r.checked)&&this.uncheckItem(this.liCollection[t]))}this.enableVirtualization&&this.virtualizationModule.checkedItem(e)}},t.prototype.setCheckbox=function(){if(this.showCheckBox)for(var e=Array.prototype.slice.call(this.element.querySelectorAll("."+r.listItem)),t={item:void 0,curData:void 0,dataSource:void 0,fields:void 0,options:void 0,text:""},i=0;i<e.length;i++){var s=e[i];t.item=s,t.curData=this.getItemData(s),s.querySelector("."+r.checkboxWrapper)&&this.removeElement(s.querySelector("."+r.checkboxWrapper)),this.renderCheckbox(t),t.item.classList.contains(r.selected)&&this.checkInternally(t,t.item.querySelector("."+r.checkboxWrapper))}else{for(e=Array.prototype.slice.call(this.element.querySelectorAll("."+r.itemCheckList)),i=0;i<e.length;i++){(s=e[i]).classList.remove(r.selected),s.firstElementChild.classList.remove(r.checkbox),this.removeElement(s.querySelector("."+r.checkboxWrapper))}this.selectedItems&&this.selectedItems.item.classList.add(r.selected)}},t.prototype.refreshItemHeight=function(){this.virtualizationModule.refreshItemHeight()},t.prototype.clickHandler=function(e){var t,i=e.target,s=i.classList;if(s.contains(r.backIcon)||s.contains(r.headerText))this.showCheckBox&&this.curDSLevel[this.curDSLevel.length-1]&&this.uncheckAllItems(),this.back();else{var n=sf.base.closest(i.parentNode,"."+r.listItem);if(null===n&&(n=i),this.removeFocus(),this.enable&&this.showCheckBox&&this.isValidLI(n))if(e.target.classList.contains(r.checkboxIcon)){if(n.classList.add(r.focused),sf.base.isNullOrUndefined(n.querySelector("."+r.checked))){var l={curData:void 0,dataSource:void 0,fields:void 0,options:void 0,text:void 0,item:n};this.checkInternally(l,l.item.querySelector("."+r.checkboxWrapper))}else this.uncheckItem(n),n.classList.add(r.focused);if(this.enableVirtualization&&this.virtualizationModule.setCheckboxLI(n,e),e){var a=this.selectEventData(n,e),o=n.querySelector("."+r.checkboxIcon);sf.base.merge(a,{isChecked:o.classList.contains(r.checked)}),this.trigger("select",a)}}else n.classList.contains(r.hasChild)?(this.removeHover(),this.removeSelect(),this.removeSelect(n),this.setSelectLI(n,e),n.classList.remove(r.selected)):this.setCheckboxLI(n,e);else this.setSelectLI(n,e);t=sf.base.closest(e.target,"li"),sf.base.isNullOrUndefined(t)||t.classList.contains("e-has-child")&&!e.target.parentElement.classList.contains("e-listview-checkbox")&&t.classList.add(r.disable)}if(sf.base.isBlazor()&&this.isServerRendered&&this.enableVirtualization){var h=this.element.querySelector("."+r.virtualElementContainer);if(h.querySelector(".e-active")){var c=h.querySelectorAll(".e-active");if(this.showCheckBox)for(var d=0;d<c.length;d++)this.previousSelectedItems.includes(c[d].getAttribute("data-uid"))||this.previousSelectedItems.push(c[d].getAttribute("data-uid"));else this.previousSelectedItems[0]=h.querySelector(".e-active").getAttribute("data-uid")}if(h.querySelector(".e-focused")){var u=h.querySelector(".e-focused");if(!u.classList.contains("e-active")){var m=u.getAttribute("data-uid");if(this.previousSelectedItems.includes(m)){var p=this.previousSelectedItems.slice(0,this.previousSelectedItems.indexOf(m)),f=this.previousSelectedItems.slice(this.previousSelectedItems.indexOf(m)+1,this.previousSelectedItems.length);this.previousSelectedItems=p.concat(f)}}}}},t.prototype.removeElement=function(e){return e&&e.parentNode&&e.parentNode.removeChild(e)},t.prototype.hoverHandler=function(e){var t=sf.base.closest(e.target.parentNode,"."+r.listItem);this.setHoverLI(t)},t.prototype.leaveHandler=function(e){this.removeHover()},t.prototype.homeKeyHandler=function(e,t){if(Object.keys(this.dataSource).length&&this.curUL){this.selectedItems&&this.selectedItems.item.setAttribute("aria-selected","false");var i=this.curUL.querySelectorAll("."+r.listItem),s=this.curUL.querySelector("."+r.focused)||this.curUL.querySelector("."+r.selected);s&&(s.classList.remove(r.focused),this.showCheckBox||s.classList.remove(r.selected));var n=t?i.length-1:0;i[n].classList.contains(r.hasChild)||this.showCheckBox?i[n].classList.add(r.focused):this.setSelectLI(i[n],e),i[n]?this.element.setAttribute("aria-activedescendant",i[n].id.toString()):this.element.removeAttribute("aria-activedescendant")}},t.prototype.onArrowKeyDown=function(e,t){var i,s;return!sf.base.isNullOrUndefined(this.curUL.querySelector("."+r.hasChild))||this.showCheckBox?(s=this.curUL.querySelector("."+r.focused)||this.curUL.querySelector("."+r.selected),i=sf.lists.ListBase.getSiblingLI(this.curUL.querySelectorAll("."+r.listItem),s,t),sf.base.isNullOrUndefined(i)||(s&&(s.classList.remove(r.focused),this.showCheckBox||s.classList.remove(r.selected)),i.classList.contains(r.hasChild)||this.showCheckBox?i.classList.add(r.focused):this.setSelectLI(i,e))):(s=this.curUL.querySelector("."+r.selected),i=sf.lists.ListBase.getSiblingLI(this.curUL.querySelectorAll("."+r.listItem),s,t),this.setSelectLI(i,e)),i?this.element.setAttribute("aria-activedescendant",i.id.toString()):this.element.removeAttribute("aria-activedescendant"),i},t.prototype.arrowKeyHandler=function(e,t){var i=this;if(e.preventDefault(),Object.keys(this.dataSource).length&&this.curUL){var s=this.onArrowKeyDown(e,t),n=this.element.getBoundingClientRect().top,l=this.element.getBoundingClientRect().height,a=this.curUL.querySelector("."+r.listItem).getBoundingClientRect(),o=void 0,h=void 0;if(this.fields.groupBy&&(h=this.curUL.querySelector("."+r.groupListItem).getBoundingClientRect()),s){var c=s.getBoundingClientRect().top,d=s.getBoundingClientRect().height;if(t)(o=this.isWindow?c:c-n)<0&&(this.isWindow?window.scroll(0,pageYOffset+o):this.element.scrollTop=this.element.scrollTop+o);else{var u=this.isWindow?window.innerHeight:l;(o=this.isWindow?c+d:c-n+d)>u&&(this.isWindow?window.scroll(0,pageYOffset+(o-u)):this.element.scrollTop=this.element.scrollTop+(o-u))}}else if(this.enableVirtualization&&t&&this.virtualizationModule.uiFirstIndex)this.onUIScrolled=function(){i.onArrowKeyDown(e,t),i.onUIScrolled=void 0},o=this.virtualizationModule.listItemHeight,this.isWindow?window.scroll(0,pageYOffset-o):this.element.scrollTop=this.element.scrollTop-o;else if(t)if(this.showHeader&&this.headerEle){var m=h?h.top:a.top,p=this.headerEle.getBoundingClientRect();o=p.top<0?p.height-m:0,this.isWindow?window.scroll(0,pageYOffset-o):this.element.scrollTop=0}else this.fields.groupBy&&(o=this.isWindow?h.top<0?h.top:0:n-a.top+h.height,this.isWindow?window.scroll(0,pageYOffset+o):this.element.scrollTop=this.element.scrollTop-o)}},t.prototype.enterKeyHandler=function(e){if(Object.keys(this.dataSource).length&&this.curUL){var t=!sf.base.isNullOrUndefined(this.curUL.querySelector("."+r.hasChild)),i=this.curUL.querySelector("."+r.focused);t&&i&&(i.classList.remove(r.focused),this.showCheckBox&&(this.removeSelect(),this.removeSelect(i),this.removeHover()),this.setSelectLI(i,e))}},t.prototype.spaceKeyHandler=function(e){if(this.enable&&this.showCheckBox&&Object.keys(this.dataSource).length&&this.curUL){var t=this.curUL.querySelector("."+r.focused);if(!sf.base.isNullOrUndefined(t)&&sf.base.isNullOrUndefined(t.querySelector("."+r.checked))){var i={curData:void 0,dataSource:void 0,fields:void 0,options:void 0,text:void 0,item:t};this.checkInternally(i,i.item.querySelector("."+r.checkboxWrapper))}else this.uncheckItem(t)}},t.prototype.keyActionHandler=function(e){switch(e.keyCode){case 36:this.homeKeyHandler(e);break;case 35:this.homeKeyHandler(e,!0);break;case 40:this.arrowKeyHandler(e);break;case 38:this.arrowKeyHandler(e,!0);break;case 13:this.enterKeyHandler(e);break;case 8:this.showCheckBox&&this.curDSLevel[this.curDSLevel.length-1]&&this.uncheckAllItems(),this.back();break;case 32:this.spaceKeyHandler(e)}},t.prototype.swipeActionHandler=function(e){"Right"===e.swipeDirection&&e.velocity>.5&&"touchend"===e.originalEvent.type&&(this.showCheckBox&&this.curDSLevel[this.curDSLevel.length-1]&&this.uncheckAllItems(),this.back())},t.prototype.focusout=function(){if(Object.keys(this.dataSource).length&&this.curUL){var e=this.curUL.querySelector("."+r.focused),t=this.curUL.querySelector("[aria-selected = true]");e&&(e.classList.remove(r.focused),t&&!this.showCheckBox&&t.classList.add(r.selected))}},t.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"keydown",this.keyActionHandler,this),sf.base.EventHandler.add(this.element,"click",this.clickHandler,this),sf.base.EventHandler.add(this.element,"mouseover",this.hoverHandler,this),sf.base.EventHandler.add(this.element,"mouseout",this.leaveHandler,this),sf.base.EventHandler.add(this.element,"focusout",this.focusout,this),this.touchModule=new sf.base.Touch(this.element,{swipe:this.swipeActionHandler.bind(this)})},t.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,"click",this.clickHandler),sf.base.EventHandler.remove(this.element,"mouseover",this.hoverHandler),sf.base.EventHandler.remove(this.element,"mouseout",this.leaveHandler),sf.base.EventHandler.remove(this.element,"mouseover",this.hoverHandler),sf.base.EventHandler.remove(this.element,"mouseout",this.leaveHandler),this.touchModule.destroy()},t.prototype.removeFocus=function(){for(var e=0,t=this.element.querySelectorAll("."+r.focused);e<t.length;e++){t[e].classList.remove(r.focused)}},t.prototype.removeHover=function(){var e=this.element.querySelector("."+r.hover);e&&e.classList.remove(r.hover)},t.prototype.removeSelect=function(e){if(sf.base.isNullOrUndefined(e))for(var t=0,i=this.element.querySelectorAll("."+r.selected);t<i.length;t++){var s=i[t];this.showCheckBox&&s.querySelector("."+r.checked)||(s.setAttribute("aria-selected","false"),s.classList.remove(r.selected))}else e.classList.remove(r.selected),e.setAttribute("aria-selected","false")},t.prototype.isValidLI=function(e){return e&&e.classList.contains(r.listItem)&&!e.classList.contains(r.groupListItem)&&!e.classList.contains(r.disable)},t.prototype.setCheckboxLI=function(e,t){if(this.isValidLI(e)&&this.enable&&this.showCheckBox){this.curUL.querySelector("."+r.focused)&&this.curUL.querySelector("."+r.focused).classList.remove(r.focused),e.classList.add(r.focused);var i=e.querySelector("."+r.checkboxWrapper),s=i.querySelector("."+r.checkboxIcon+"."+r.icon);this.removeHover(),s.classList.contains(r.checked)?(s.classList.remove(r.checked),e.classList.remove(r.selected),e.setAttribute("aria-selected","false")):(s.classList.add(r.checked),e.classList.add(r.selected),e.setAttribute("aria-selected","true")),i.setAttribute("aria-checked",s.classList.contains(r.checked)?"true":"false");var n=this.selectEventData(e,t);sf.base.merge(n,{isChecked:s.classList.contains(r.checked)}),this.enableVirtualization&&this.virtualizationModule.setCheckboxLI(e,t),this.trigger("select",n),this.setSelectedItemData(e),this.renderSubList(e)}},t.prototype.selectEventData=function(e,t){var i,s=this.getItemData(e),n=sf.lists.getFieldValues(s,this.listBaseOption.fields);i=!sf.base.isNullOrUndefined(s)&&"string"==typeof this.dataSource[0]||"number"==typeof this.dataSource[0]?{item:e,text:e&&e.innerText.trim(),data:this.dataSource}:{item:e,text:n&&n[this.listBaseOption.fields.text],data:s};var l={};return sf.base.merge(l,i),t&&sf.base.merge(l,{isInteracted:!0,event:t,index:this.curUL&&Array.prototype.indexOf.call(this.curUL.children,e)}),l},t.prototype.setSelectedItemData=function(e){var t=this.getItemData(e),i=sf.lists.getFieldValues(t,this.listBaseOption.fields);sf.base.isNullOrUndefined(t)||"string"!=typeof this.dataSource[0]&&"number"!=typeof this.dataSource[0]?this.selectedItems={item:e,text:i&&i[this.listBaseOption.fields.text],data:t}:this.selectedItems={item:e,text:e&&e.innerText.trim(),data:this.dataSource}},t.prototype.setSelectLI=function(e,t){if(this.isValidLI(e)&&!e.classList.contains(r.selected)&&this.enable){this.showCheckBox||this.removeSelect(),e.classList.add(r.selected),e.setAttribute("aria-selected","true"),this.removeHover(),this.setSelectedItemData(e),this.enableVirtualization&&this.virtualizationModule.setSelectLI(e,t);var i=this.selectEventData(e,t);this.trigger("select",i),this.selectedLI=e,this.renderSubList(e)}},t.prototype.setHoverLI=function(e){if(this.isValidLI(e)&&!e.classList.contains(r.hover)&&this.enable){var t=this.element.querySelectorAll("."+r.hover);t&&t.length&&sf.base.removeClass(t,r.hover),e.classList.contains(r.selected)&&!this.showCheckBox||e.classList.add(r.hover)}},t.prototype.getSubDS=function(){var e=this.curDSLevel;if(e.length){for(var t=this.localData,i=0,s=e;i<s.length;i++){var n=s[i],l={};l[this.fields.id]=n,this.curDSJSON=this.findItemFromDS(t,l);var a=sf.lists.getFieldValues(this.curDSJSON,this.listBaseOption.fields);t=this.curDSJSON?a[this.fields.child]:t}return t}return this.localData},t.prototype.getItemData=function(e){var t,i=this.dataSource instanceof sf.data.DataManager?this.localData:this.dataSource,s=this.getElementUID(e);return t=sf.base.isNullOrUndefined(this.element.querySelector("."+r.hasChild))&&this.fields.groupBy?this.curViewDS:i,this.findItemFromDS(t,s)},t.prototype.findItemFromDS=function(e,t,s){var n,l=this;return e&&e.length&&t?e.some((function(a){var r=sf.lists.getFieldValues(a,l.listBaseOption.fields);if(!t[l.fields.id]&&!t[l.fields.text]||t[l.fields.id]&&(!sf.base.isNullOrUndefined(r[l.fields.id])&&r[l.fields.id].toString())!==t[l.fields.id].toString()||t[l.fields.text]&&r[l.fields.text]!==t[l.fields.text])if("object"!==i(a)&&-1!==e.indexOf(a))n=s?e:a;else if(!sf.base.isNullOrUndefined(t[l.fields.id])&&sf.base.isNullOrUndefined(r[l.fields.id])){var o=l.element.querySelector('[data-uid="'+t[l.fields.id]+'"]');o&&o.innerText.trim()===r[l.fields.text]&&(n=a)}else r.hasOwnProperty(l.fields.child)&&r[l.fields.child].length&&(n=l.findItemFromDS(r[l.fields.child],t,s));else n=s?e:a;return!!n})):n=e,n},t.prototype.getQuery=function(){var e=[],t=this.query?this.query:new sf.data.Query;if(!this.query){for(var i=0,s=Object.keys(this.fields.properties);i<s.length;i++){var n=s[i];"tableName"!==n&&this.fields[n]&&this.fields[n]!==sf.lists.ListBase.defaultMappedFields[n]&&-1===e.indexOf(this.fields[n])&&e.push(this.fields[n])}t.select(e),this.fields.properties.hasOwnProperty("tableName")&&t.from(this.fields.tableName)}return t},t.prototype.setViewDataSource=function(e){void 0===e&&(e=this.localData),e&&this.fields.groupBy?"None"!==this.sortOrder?this.curViewDS=sf.lists.ListBase.groupDataSource(sf.lists.ListBase.getDataSource(e,sf.lists.ListBase.addSorting(this.sortOrder,this.fields.sortBy)),this.listBaseOption.fields,this.sortOrder):this.curViewDS=sf.lists.ListBase.groupDataSource(e,this.listBaseOption.fields,this.sortOrder):e&&"None"!==this.sortOrder?this.curViewDS=sf.lists.ListBase.getDataSource(e,sf.lists.ListBase.addSorting(this.sortOrder,this.fields.sortBy)):this.curViewDS=e},t.prototype.isInAnimation=function(){return this.curUL.classList.contains(".e-animate")},t.prototype.setLocalData=function(){var e=this;this.trigger("actionBegin");var t=this;if(this.dataSource instanceof sf.data.DataManager)this.dataSource.executeQuery(this.getQuery()).then((function(i){e.isDestroyed||(e.localData=i.result,e.isServerRendered&&sf.base.isBlazor()||(t.removeElement(t.contentContainer),e.isReact&&e.clearTemplate()),e.renderList(),e.trigger("actionComplete",i))})).catch((function(t){e.isDestroyed||e.trigger("actionFailure",t)}));else if(this.dataSource&&this.dataSource.length)this.localData=this.dataSource,this.renderList(),this.trigger("actionComplete",{data:this.localData});else{var i=this.element.querySelector("ul");i&&(sf.base.remove(i),this.setProperties({dataSource:sf.lists.ListBase.createJsonFromElement(i)},!0),this.localData=this.dataSource,this.renderList(),this.trigger("actionComplete",{data:this.localData}))}},t.prototype.reRender=function(){sf.base.isBlazor()&&this.isServerRendered&&!this.enableVirtualization||(this.resetBlazorTemplates(),this.removeElement(this.headerEle),this.removeElement(this.ulElement),this.removeElement(this.contentContainer),this.isReact&&this.clearTemplate(),-1===Object.keys(window).indexOf("ejsInterop")&&(this.element.innerHTML=""),this.headerEle=this.ulElement=this.liCollection=void 0,this.header()),this.setLocalData()},t.prototype.resetCurrentList=function(){this.resetBlazorTemplates(),this.setViewDataSource(this.curViewDS),this.contentContainer.innerHTML="",this.createList(),this.renderIntoDom(this.curUL)},t.prototype.setAttributes=function(e){for(var t=0;t<e.length;t++){var i=e[t];i.classList.contains("e-list-item")&&(i.setAttribute("id",this.element.id+"_"+i.getAttribute("data-uid")),i.setAttribute("aria-selected","false"),i.setAttribute("tabindex","-1"))}},t.prototype.createList=function(){this.currentLiElements=[],this.isNestedList=!1,this.ulElement=this.curUL=sf.lists.ListBase.createList(this.createElement,this.curViewDS,this.listBaseOption,null,this),this.liCollection=this.curUL.querySelectorAll("."+r.listItem),this.setAttributes(this.liCollection),this.updateBlazorTemplates(!0)},t.prototype.resetBlazorTemplates=function(){var e=sf.base.blazorTemplates;this.template&&(e[this.LISTVIEW_TEMPLATE_ID]=[],sf.base.resetBlazorTemplate(this.LISTVIEW_TEMPLATE_ID,"Template")),this.groupTemplate&&(e[this.LISTVIEW_GROUPTEMPLATE_ID]=[],sf.base.resetBlazorTemplate(this.LISTVIEW_GROUPTEMPLATE_ID,"GroupTemplate")),this.headerTemplate&&sf.base.resetBlazorTemplate(this.LISTVIEW_HEADERTEMPLATE_ID,"HeaderTemplate")},t.prototype.updateBlazorTemplates=function(e,t,i){void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===i&&(i=!1),this.template&&e&&!this.enableVirtualization&&sf.base.updateBlazorTemplate(this.LISTVIEW_TEMPLATE_ID,"Template",this,i),this.groupTemplate&&e&&!this.enableVirtualization&&sf.base.updateBlazorTemplate(this.LISTVIEW_GROUPTEMPLATE_ID,"GroupTemplate",this,i),this.headerTemplate&&t&&sf.base.updateBlazorTemplate(this.LISTVIEW_HEADERTEMPLATE_ID,"HeaderTemplate",this,i)},t.prototype.exceptionEvent=function(e){this.trigger("actionFailure",e)},t.prototype.UpdateCurrentUL=function(){this.ulElement=this.curUL=this.element.querySelector("."+r.parentItem),this.curUL&&(this.liCollection=this.curUL.querySelectorAll("."+r.listItem))},t.prototype.removeActiveClass=function(){var e=this;setTimeout((function(){for(var t=e.element.querySelector("."+r.virtualElementContainer),i=0;i<t.childElementCount;i++){var s=t.children[i],n=void 0,l=void 0;if(e.showCheckBox)if(e.previousSelectedItems.length>0)for(var a=0;a<e.previousSelectedItems.length;a++)s.getAttribute("data-uid")===e.previousSelectedItems[a]?(s.classList.add("e-active"),s.setAttribute("aria-selected","true"),s.querySelector(".e-frame.e-icons")&&s.querySelector(".e-frame.e-icons").classList.add("e-check"),n=i):n!==i&&(s.classList.remove("e-active"),s.removeAttribute("aria-selected"),s.querySelector(".e-check")&&s.querySelector(".e-check").classList.remove("e-check"));else s.classList.remove("e-active"),s.removeAttribute("aria-selected"),s.querySelector(".e-check")&&s.querySelector(".e-check").classList.remove("e-check");else s.getAttribute("data-uid")===e.previousSelectedItems[0]?(s.classList.add("e-active"),s.setAttribute("aria-selected","true")):(s.classList.remove("e-active"),s.removeAttribute("aria-selected"));if(e.hiddenItems.length>0)for(var o=0;o<e.hiddenItems.length;o++)s.getAttribute("data-uid")===e.previousSelectedItems[o]?(s.style.display="none",l=i):l!==i&&(s.style.display=null);if(e.enabledItems.length>0)for(var h=0;h<e.enabledItems.length;h++)s.getAttribute("data-uid")===e.enabledItems[h]&&s.classList.contains("e-disabled")&&s.classList.remove("e-disabled");if(e.disabledItems.length>0)for(var c=0;c<e.disabledItems.length;c++)s.getAttribute("data-uid")===e.disabledItems[c]&&(s.classList.contains("e-disabled")||s.classList.add("e-disabled"))}}),200)},t.prototype.renderingNestedList=function(){var e=sf.base.closest(this.liElement.parentNode,"."+r.parentItem),t=this.element.id,i=document.getElementById(t),s=i.getElementsByTagName("UL")[i.getElementsByTagName("UL").length-1];this.switchView(e,s),this.liElement=null},t.prototype.renderSubList=function(e){this.liElement=e;var t=e.getAttribute("data-uid");if(e.classList.contains(r.hasChild)&&t){var i=sf.base.closest(e.parentNode,"."+r.parentItem),s=this.element.querySelector("[pid='"+t+"']");if(this.curDSLevel.push(t),this.setViewDataSource(this.getSubDS()),!s){var n=this.curViewDS;if(sf.base.isBlazor()&&this.isServerRendered)this.interopAdaptor.invokeMethodAsync("ListChildDataSource",n);else{s=sf.lists.ListBase.createListFromJson(this.createElement,n,this.listBaseOption,this.curDSLevel.length,null,this),this.isReact&&this.renderReactTemplates();var l=s.querySelectorAll("."+r.listItem);this.setAttributes(l),s.setAttribute("pID",t),s.style.display="none",this.renderIntoDom(s),this.updateBlazorTemplates(!0)}}if(sf.base.isBlazor()&&this.isServerRendered&&!this.enableVirtualization||this.switchView(i,s,!1),this.liCollection=this.curUL.querySelectorAll("."+r.listItem),this.selectedItems){var a=sf.lists.getFieldValues(this.selectedItems.data,this.listBaseOption.fields);this.header(a[this.listBaseOption.fields.text],!0,"header")}this.selectedLI=void 0}},t.prototype.renderIntoDom=function(e){this.contentContainer.appendChild(e)},t.prototype.renderList=function(e){this.setViewDataSource(e),sf.base.isBlazor()&&this.isServerRendered&&!this.enableVirtualization||(this.enableVirtualization?(Object.keys(this.dataSource).length&&(sf.base.isBlazor()&&this.isServerRendered||!this.template&&!this.groupTemplate||this.virtualizationModule.isNgTemplate()||(this.listBaseOption.template=null,this.listBaseOption.groupTemplate=null,this.listBaseOption.itemCreated=this.virtualizationModule.createUIItem.bind(this.virtualizationModule))),this.virtualizationModule.uiVirtualization()):(this.createList(),this.contentContainer=this.createElement("div",{className:r.content}),this.element.appendChild(this.contentContainer),this.renderIntoDom(this.ulElement),this.isReact&&this.renderReactTemplates()))},t.prototype.getElementUID=function(e){var t={};return e instanceof Element?t[this.fields.id]=e.getAttribute("data-uid"):t=e,t},t.prototype.render=function(){sf.base.isBlazor()&&this.isServerRendered?this.initBlazor(!0):(this.element.classList.add(r.root),sf.base.attributes(this.element,{role:"list",tabindex:"0"}),this.setCSSClass(),this.setEnableRTL(),this.setEnable(),this.setSize(),this.wireEvents(),this.header(),this.setLocalData(),this.setHTMLAttribute(),this.isReact&&this.renderReactTemplates()),this.rippleFn=sf.base.rippleEffect(this.element,{selector:"."+r.listItem}),this.renderComplete()},t.prototype.initBlazor=function(e){null===e&&(e=!1),this.setLocalData(),this.setViewDataSource(this.localData),this.contentContainer=this.element.querySelector("."+r.content),e&&this.wireEvents()},t.prototype.destroy=function(){this.resetBlazorTemplates(),this.isReact&&this.clearTemplate(),this.unWireEvents();var t=[r.root,r.disable,"e-rtl","e-has-header","e-lib"].concat(this.cssClass.split(" ").filter((function(e){return e})));sf.base.removeClass([this.element],t),this.element.removeAttribute("role"),this.element.removeAttribute("tabindex"),this.curUL=this.ulElement=this.liCollection=this.headerEle=void 0,sf.base.isBlazor()&&this.isServerRendered?this.element.style.display="none":(this.element.innerHTML="",e.prototype.destroy.call(this))},t.prototype.back=function(){var e=this.curDSLevel[this.curDSLevel.length-1];if(void 0!==e&&!this.isInAnimation()){this.curDSLevel.pop(),this.setViewDataSource(this.getSubDS());var t=this.element.querySelector("[data-uid='"+e+"']"),i=this.curUL;t?t=sf.base.isBlazor()&&this.isServerRendered&&this.enableVirtualization?t.parentElement.parentElement.parentElement:t.parentElement:(this.createList(),this.renderIntoDom(this.ulElement),t=this.curUL);var s=sf.lists.getFieldValues(this.curDSJSON,this.listBaseOption.fields)[this.fields.text];this.switchView(i,t,!0),this.removeFocus();var n=this.element.querySelector("[data-uid='"+e+"']");n.classList.remove(r.disable),n.classList.add(r.focused),this.showCheckBox&&n.querySelector("."+r.checkboxIcon).classList.contains(r.checked)?n.setAttribute("aria-selected","true"):(n.classList.remove(r.selected),n.setAttribute("aria-selected","false")),this.liCollection=this.curUL.querySelectorAll("."+r.listItem),this.enableHtmlSanitizer&&this.setProperties({headerTitle:sf.base.SanitizeHtmlHelper.sanitize(this.headerTitle)},!0),this.header(this.curDSLevel.length?s:this.headerTitle,!!this.curDSLevel.length,"header")}},t.prototype.selectItem=function(e){this.enableVirtualization?this.virtualizationModule.selectItem(e):this.showCheckBox?this.setCheckboxLI(this.getLiFromObjOrElement(e)):sf.base.isNullOrUndefined(e)?this.removeSelect():this.setSelectLI(this.getLiFromObjOrElement(e))},t.prototype.getLiFromObjOrElement=function(e){var t,i=this.dataSource instanceof sf.data.DataManager?this.localData:this.dataSource;if(!sf.base.isNullOrUndefined(e))if("string"==typeof i[0]||"number"==typeof i[0])if(e instanceof Element){for(var s=e.getAttribute("data-uid").toString(),n=0;n<this.liCollection.length;n++)if(this.liCollection[n].getAttribute("data-uid").toString()===s){t=this.liCollection[n];break}}else Array.prototype.some.call(this.curUL.querySelectorAll("."+r.listItem),(function(i){return i.innerText.trim()===e.toString()&&(t=i,!0)}));else{var l=this.getItemData(e),a=sf.lists.getFieldValues(l,this.listBaseOption.fields);if(l&&(t=this.element.querySelector('[data-uid="'+a[this.fields.id]+'"]'),!this.enableVirtualization&&sf.base.isNullOrUndefined(t))){var o=this.element.querySelectorAll("."+r.listItem);for(n=0;n<o.length;n++)o[n].innerText.trim()===a[this.fields.text]&&(t=o[n])}}return t},t.prototype.selectMultipleItems=function(e){if(!sf.base.isNullOrUndefined(e))for(var t=0;t<e.length;t++)sf.base.isNullOrUndefined(e[t])||this.selectItem(e[t])},t.prototype.getParentId=function(){var e=[];if(this.isNestedList)for(var t=this.curDSLevel.length-1;t>=0;t--)e.push(this.curDSLevel[t]);return e},t.prototype.getSelectedItems=function(){var e,t=!1;this.selectedId=[];var i=this.dataSource instanceof sf.data.DataManager?this.localData:this.dataSource;if(this.enableVirtualization&&!t)e=this.virtualizationModule.getSelectedItems(),t=!0;else if(this.showCheckBox&&!t){var s=this.curUL.getElementsByClassName(r.selected),n=[],l=[];this.selectedId=[];for(var a=[],o=0;o<s.length;o++)if("string"==typeof i[0]||"number"==typeof i[0])n.push(s[o].innerText.trim());else{var h=this.getItemData(s[o]),c=sf.lists.getFieldValues(h,this.listBaseOption.fields);this.isNestedList?a.push({data:h,parentId:this.getParentId()}):l.push(h),c?(n.push(c[this.listBaseOption.fields.text]),this.selectedId.push(c[this.listBaseOption.fields.id])):(n.push(void 0),this.selectedId.push(void 0))}"string"!=typeof i[0]&&"number"!=typeof i[0]||t||(e={item:s,data:i,text:n},t=!0),this.isNestedList&&!t?(e={item:s,data:a,text:n},t=!0):t||(e={item:s,data:l,text:n},t=!0)}else if(!t){var d=this.element.getElementsByClassName(r.selected)[0];c=sf.lists.getFieldValues(this.getItemData(d),this.listBaseOption.fields);"string"!=typeof i[0]&&"number"!=typeof i[0]||t?t||(sf.base.isNullOrUndefined(c)||sf.base.isNullOrUndefined(d)?(e=void 0,t=!0):(this.selectedId.push(c[this.listBaseOption.fields.id]),e={text:c[this.listBaseOption.fields.text],item:d,data:this.getItemData(d)},t=!0)):(e=sf.base.isNullOrUndefined(d)?void 0:{item:d,data:i,text:d.innerText.trim()},t=!0)}return sf.base.isBlazor()?this.blazorGetSelectedItems(e):e},t.prototype.blazorGetSelectedItems=function(e){var t={data:[],index:[],parentId:[],text:[]};if(!sf.base.isNullOrUndefined(e)){if(!sf.base.isNullOrUndefined(e.data))if(this.showCheckBox&&this.isNestedList){for(var i=0;i<e.data.length;i++)t.data.push(e.data[i].data);sf.base.isNullOrUndefined(e.data[0])||sf.base.isNullOrUndefined(e.data[0].parentId)||(t.parentId=e.data[0].parentId)}else t.data=this.convertItemsToArray(e.data);sf.base.isNullOrUndefined(e.text)||(t.text=this.convertItemsToArray(e.text)),sf.base.isNullOrUndefined(e.index)||(t.index=this.convertItemsToArray(e.index))}return t},t.prototype.convertItemsToArray=function(e){return Array.isArray(e)?e.slice():[e]},t.prototype.findItem=function(e){return this.getItemData(e)},t.prototype.enableItem=function(e){this.setItemState(e,!0),this.enableVirtualization&&this.virtualizationModule.enableItem(e)},t.prototype.disableItem=function(e){this.setItemState(e,!1),this.enableVirtualization&&this.virtualizationModule.disableItem(e)},t.prototype.setItemState=function(e,t){var i=this.getItemData(e),s=sf.lists.getFieldValues(i,this.listBaseOption.fields);if(i){var n=this.element.querySelector('[data-uid="'+s[this.fields.id]+'"]');t?(n&&n.classList.remove(r.disable),delete i[this.fields.enabled]):t||(n&&n.classList.add(r.disable),i[this.fields.enabled]=!1)}},t.prototype.showItem=function(e){this.showHideItem(e,!1,""),this.enableVirtualization&&this.virtualizationModule.showItem(e)},t.prototype.hideItem=function(e){this.showHideItem(e,!0,"none"),this.enableVirtualization&&this.virtualizationModule.hideItem(e)},t.prototype.showHideItem=function(e,t,i){var s=this.getItemData(e),n=sf.lists.getFieldValues(s,this.listBaseOption.fields);if(s){var l=this.element.querySelector('[data-uid="'+n[this.fields.id]+'"]');l&&(l.style.display=i),t?s[this.fields.isVisible]=!1:delete s[this.fields.isVisible]}},t.prototype.addItem=function(e,t){void 0===t&&(t=void 0);var i=this.dataSource instanceof sf.data.DataManager?this.localData:this.dataSource;this.addItemInternally(e,t,i)},t.prototype.addItemInternally=function(e,t,i){if(e instanceof Array)if(this.enableVirtualization)this.virtualizationModule.addItem(e,t,i);else{var s=this.findItemFromDS(i,t),n=void 0;if(s)(n=sf.lists.getFieldValues(s,this.listBaseOption.fields)[this.fields.child])||(n=[]),n=n.concat(e);if(s instanceof Array){for(var l=0;l<e.length;l++){i.push(e[l]),this.setViewDataSource(i);var a=this.contentContainer?this.contentContainer.children[0]:null;this.contentContainer&&a?this.addItemIntoDom(e[l],a,this.curViewDS):this.reRender()}this.curUL&&this.updateBlazorTemplates(!0),this.liCollection=this.curUL.querySelectorAll("."+r.listItem)}else s&&(s[this.fields.child]=n,this.addItemInNestedList(s,e))}},t.prototype.addItemInNestedList=function(e,t){var i=e[this.fields.id],s=e[this.fields.child],n=this.element.querySelector("[pid='"+i+"']"),l=this.element.querySelector("[data-uid='"+i+"']"),a=n||(l?sf.base.closest(l,"ul"):null),o=n?s:[e],h=!1;if(!!l&&!l.classList.contains(r.hasChild)){var c=sf.lists.ListBase.createListItemFromJson(this.createElement,o,this.listBaseOption,null,null,this);this.setAttributes(c),a.insertBefore(c[0],l),sf.base.detach(l),h=!0}if(n&&t){for(var d=0;d<t.length;d++)o.push(t[d]),this.addItemIntoDom(t[d],a,o);h=!0}h&&this.updateBlazorTemplates(!0)},t.prototype.addItemIntoDom=function(e,t,i){var s=i.indexOf(e);this.addListItem(e,s,t,i);var n=i[s-1];n&&n.isHeader&&1===n.items.length&&this.addListItem(n,s-1,t,i)},t.prototype.addListItem=function(e,t,i,s){var n=this.getLiFromObjOrElement(s[t+1])||this.getLiFromObjOrElement(s[t+2])||null,l=sf.lists.ListBase.createListItemFromJson(this.createElement,[e],this.listBaseOption,null,null,this);this.setAttributes(l),this.template&&this.isReact&&this.renderReactTemplates(),i.insertBefore(l[0],n)},t.prototype.removeItem=function(e){var t=this.dataSource instanceof sf.data.DataManager?this.localData:this.dataSource;this.enableVirtualization?this.virtualizationModule.removeItem(e):(this.removeItemFromList(e,t),this.updateBlazorTemplates(!0))},t.prototype.removeItemFromList=function(e,t){var i,s=this,n=this.curViewDS,l=e instanceof Element?this.getElementUID(e):e;if(i=this.findItemFromDS(t,l,!0)){var a;a=this.findItemFromDS(i,l);var o=n.indexOf(a),h=this.getLiFromObjOrElement(e),c=void 0;this.validateNestedView(h),this.fields.groupBy&&this.curViewDS[o-1]&&n[o-1].isHeader&&1===n[o-1].items.length&&h&&h.previousElementSibling.classList.contains(r.groupListItem)&&(sf.base.isNullOrUndefined(h.nextElementSibling)||h.nextElementSibling&&h.nextElementSibling.classList.contains(r.groupListItem))&&(c=h.previousElementSibling),h&&sf.base.detach(h),c&&sf.base.detach(c);var d=i.length-1<=0?this.findParent(this.localData,this.fields.id,(function(e){return e===a[s.fields.id]}),null):null,u=i.indexOf(a);if(i.splice(u,1),this.setViewDataSource(t),d&&d.parent&&Array.isArray(d.parent[this.fields.child])&&d.parent[this.fields.child].length<=0){var m=this.getLiFromObjOrElement(d.parent);if(m){var p=sf.lists.ListBase.createListItemFromJson(this.createElement,[d.parent],this.listBaseOption,null,null,this);this.setAttributes(p),m.parentElement.insertBefore(p[0],m),m.parentElement.removeChild(m)}}i.length<=0&&this.back(),this.liCollection=Array.prototype.slice.call(this.element.querySelectorAll("."+r.listItem))}},t.prototype.validateNestedView=function(e){var t=e?e.getAttribute("data-uid").toString().toLowerCase():null;if(t&&this.curDSLevel&&this.curDSLevel.length>0)for(;this.curDSLevel.some((function(e){return e.toString().toLowerCase()===t}));)this.back()},t.prototype.removeMultipleItems=function(e){if(e.length){for(var t=0;t<e.length;t++)this.removeItem(e[t]);this.updateBlazorTemplates(!0)}},t.prototype.findParent=function(e,t,s,n){if(e.hasOwnProperty(t)&&!0===s(e[t]))return sf.base.extend({},e);for(var l=0;l<Object.keys(e).length;l++)if(e[Object.keys(e)[l]]&&"object"===i(e[Object.keys(e)[l]])){var a=this.findParent(e[Object.keys(e)[l]],t,s,e);if(null!=a)return a.parent||(a.parent=n),a}return null},t.prototype.getModuleName=function(){return"listview"},t.prototype.requiredModules=function(){var e=[];return this.enableVirtualization&&e.push({args:[this],member:"virtualization"}),e},t.prototype.getPersistData=function(){return this.addOnPersist(["cssClass","enableRtl","htmlAttributes","enable","fields","animation","headerTitle","sortOrder","showIcon","height","width","showCheckBox","checkBoxPosition"])},n([sf.base.Property("")],t.prototype,"cssClass",void 0),n([sf.base.Property(!1)],t.prototype,"enableVirtualization",void 0),n([sf.base.Property({})],t.prototype,"htmlAttributes",void 0),n([sf.base.Property(!0)],t.prototype,"enable",void 0),n([sf.base.Property([])],t.prototype,"dataSource",void 0),n([sf.base.Property()],t.prototype,"query",void 0),n([sf.base.Complex(sf.lists.ListBase.defaultMappedFields,o)],t.prototype,"fields",void 0),n([sf.base.Property({effect:"SlideLeft",duration:400,easing:"ease"})],t.prototype,"animation",void 0),n([sf.base.Property("None")],t.prototype,"sortOrder",void 0),n([sf.base.Property(!1)],t.prototype,"showIcon",void 0),n([sf.base.Property(!1)],t.prototype,"showCheckBox",void 0),n([sf.base.Property("Left")],t.prototype,"checkBoxPosition",void 0),n([sf.base.Property("")],t.prototype,"headerTitle",void 0),n([sf.base.Property(!1)],t.prototype,"showHeader",void 0),n([sf.base.Property(!1)],t.prototype,"enableHtmlSanitizer",void 0),n([sf.base.Property("")],t.prototype,"height",void 0),n([sf.base.Property("")],t.prototype,"width",void 0),n([sf.base.Property(null)],t.prototype,"template",void 0),n([sf.base.Property(null)],t.prototype,"headerTemplate",void 0),n([sf.base.Property(null)],t.prototype,"groupTemplate",void 0),n([sf.base.Event()],t.prototype,"select",void 0),n([sf.base.Event()],t.prototype,"actionBegin",void 0),n([sf.base.Event()],t.prototype,"actionComplete",void 0),n([sf.base.Event()],t.prototype,"actionFailure",void 0),t=n([sf.base.NotifyPropertyChanges],t)}(sf.base.Component),c=function(){function e(e){this.elementDifference=0,this.listViewInstance=e}return e.prototype.isNgTemplate=function(){return!sf.base.isNullOrUndefined(this.listViewInstance.templateRef)&&"string"!=typeof this.listViewInstance.templateRef},e.prototype.uiVirtualization=function(){this.wireScrollEvent(!1);var e=this.listViewInstance.curViewDS,t=e.slice(0,1);sf.base.isBlazor()||this.listViewInstance.isServerRendered||(this.listViewInstance.ulElement=this.listViewInstance.curUL=sf.lists.ListBase.createList(this.listViewInstance.createElement,t,this.listViewInstance.listBaseOption,null,this),this.listViewInstance.contentContainer=this.listViewInstance.createElement("div",{className:r.content}),this.listViewInstance.element.appendChild(this.listViewInstance.contentContainer),this.listViewInstance.contentContainer.appendChild(this.listViewInstance.ulElement)),this.listItemHeight=this.listViewInstance.ulElement.firstElementChild.getBoundingClientRect().height,this.expectedDomItemCount=this.ValidateItemCount(1e4),this.domItemCount=this.ValidateItemCount(Object.keys(this.listViewInstance.curViewDS).length),this.uiFirstIndex=0,this.uiLastIndex=this.domItemCount-1;var i=e.slice(1,this.domItemCount);if(sf.base.isBlazor()||this.listViewInstance.isServerRendered)this.listViewInstance.contentContainer=this.listViewInstance.element.querySelector(".e-content"),this.listViewInstance.liCollection=this.listViewInstance.curUL.querySelectorAll("li");else{var s=sf.lists.ListBase.createListItemFromJson(this.listViewInstance.createElement,i,this.listViewInstance.listBaseOption,null,null,this);sf.base.append(s,this.listViewInstance.ulElement),this.listViewInstance.liCollection=this.listViewInstance.curUL.querySelectorAll("li"),this.topElement=this.listViewInstance.createElement("div"),this.listViewInstance.ulElement.insertBefore(this.topElement,this.listViewInstance.ulElement.firstElementChild),this.bottomElement=this.listViewInstance.createElement("div"),this.listViewInstance.ulElement.insertBefore(this.bottomElement,null),this.totalHeight=Object.keys(e).length*this.listItemHeight-this.domItemCount*this.listItemHeight,this.topElement.style.height="0px",this.bottomElement.style.height=this.totalHeight+"px",this.topElementHeight=0,this.bottomElementHeight=this.totalHeight}this.listDiff=0,this.uiIndicesInitialization()},e.prototype.wireScrollEvent=function(e){e?(this.listViewInstance.isWindow?window.removeEventListener("scroll",this.onVirtualScroll):sf.base.EventHandler.remove(this.listViewInstance.element,"scroll",this.onVirtualUiScroll),this.listViewInstance.isWindow?window.removeEventListener("scroll",this.updateUl):sf.base.EventHandler.remove(this.listViewInstance.element,"scroll",this.updateUlContainer)):sf.base.isBlazor()&&this.listViewInstance.isServerRendered?this.listViewInstance.isWindow?(this.onVirtualScroll=sf.base.debounce(this.onVirtualUiScroll.bind(this),350),this.updateUl=this.updateUlContainer.bind(this),window.addEventListener("scroll",this.onVirtualScroll),window.addEventListener("scroll",this.updateUl)):(sf.base.EventHandler.add(this.listViewInstance.element,"scroll",sf.base.debounce(this.onVirtualUiScroll,350),this),sf.base.EventHandler.add(this.listViewInstance.element,"scroll",this.updateUlContainer,this)):this.listViewInstance.isWindow?(this.onVirtualScroll=this.onVirtualUiScroll.bind(this),window.addEventListener("scroll",this.onVirtualScroll)):sf.base.EventHandler.add(this.listViewInstance.element,"scroll",this.onVirtualUiScroll,this)},e.prototype.updateUlContainer=function(e){var t,i=this.listViewInstance.ulElement.querySelector("."+r.virtualElementContainer);sf.base.isNullOrUndefined(this.listViewInstance.liElementHeight)&&this.listViewInstance.updateLiElementHeight(),((t=this.listViewInstance.isWindow?Math.round(e.target.documentElement.scrollTop/this.listViewInstance.liElementHeight)-2:Math.round(e.target.scrollTop/this.listViewInstance.liElementHeight)-2)-1)*this.listViewInstance.liElementHeight<0?i.style.top="0px":i.style.top=t*this.listViewInstance.liElementHeight+"px"},e.prototype.ValidateItemCount=function(e){var t,i=parseFloat(sf.base.formatUnit(this.listViewInstance.height));return(t=this.listViewInstance.isWindow?Math.round(window.innerHeight/this.listItemHeight*3):"string"==typeof this.listViewInstance.height&&-1!==this.listViewInstance.height.indexOf("%")?Math.round(this.listViewInstance.element.getBoundingClientRect().height/this.listItemHeight*1.5):Math.round(i/this.listItemHeight*1.5))>e&&(t=e),t},e.prototype.uiIndicesInitialization=function(){this.uiIndices={activeIndices:[],disabledItemIndices:[],hiddenItemIndices:[]};for(var e=this.listViewInstance.curViewDS,t=0;t<e.length;t++)this.listViewInstance.showCheckBox&&e[t][this.listViewInstance.fields.isChecked]&&this.uiIndices.activeIndices.push(t),sf.base.isNullOrUndefined(e[t][this.listViewInstance.fields.enabled])||e[t][this.listViewInstance.fields.enabled]||this.uiIndices.disabledItemIndices.push(t);if(this.isNgTemplate())for(var i=this.listViewInstance.element.querySelectorAll("."+r.listItem),s=0;s<i.length;s++)i[s].context=this.listViewInstance.viewContainerRef.get(s).context},e.prototype.refreshItemHeight=function(){if(this.listViewInstance.curViewDS.length){var e=this.listViewInstance.curViewDS;sf.base.isBlazor()&&this.listViewInstance.isServerRendered?this.listViewInstance.ulElement.children[0].style.height=this.listViewInstance.liElementHeight*Object.keys(e).length+"px":(this.listItemHeight=this.topElement.nextSibling.getBoundingClientRect().height,this.totalHeight=Object.keys(e).length*this.listItemHeight-this.domItemCount*this.listItemHeight,this.bottomElementHeight=this.totalHeight,this.bottomElement.style.height=this.totalHeight+"px")}},e.prototype.getscrollerHeight=function(e){return this.listViewInstance.isWindow?pageYOffset-e<=0?0:pageYOffset-e:this.listViewInstance.element.scrollTop-e<=0?0:this.listViewInstance.element.scrollTop-e},e.prototype.onVirtualUiScroll=function(e){var t,i;i=this.listViewInstance.isWindow?this.listViewInstance.ulElement.getBoundingClientRect().top-document.documentElement.getBoundingClientRect().top:this.listViewInstance.headerEle?this.listViewInstance.headerEle.getBoundingClientRect().height:0,this.scrollPosition=sf.base.isNullOrUndefined(this.scrollPosition)?0:this.scrollPosition;var s=this.getscrollerHeight(i);if(this.topElementHeight=this.listItemHeight*Math.floor(s/this.listItemHeight),this.bottomElementHeight=this.totalHeight-this.topElementHeight,t=s<=this.totalHeight?[this.topElementHeight,this.bottomElementHeight]:[this.totalHeight,0],this.topElementHeight=t[0],this.bottomElementHeight=t[1],sf.base.isBlazor()&&this.listViewInstance.isServerRendered){var n=void 0;if(sf.base.isNullOrUndefined(this.listViewInstance.liElementHeight)&&this.listViewInstance.updateLiElementHeight(),(n=this.listViewInstance.isWindow?Math.round(document.documentElement.scrollTop/this.listViewInstance.liElementHeight):Math.round(e.target.scrollTop/this.listViewInstance.liElementHeight))-2-this.elementDifference>=3||n-2-this.elementDifference<=-1){var l={listDiff:n-2,selectedItems:this.listViewInstance.previousSelectedItems};this.listViewInstance.interopAdaptor.invokeMethodAsync("VirtalScrolling",l),this.listViewInstance.ulElement.querySelector(".e-focused")&&this.listViewInstance.ulElement.querySelector(".e-focused").classList.remove("e-focused"),this.elementDifference=n-2}}else{if(this.topElementHeight!==parseFloat(this.topElement.style.height))if(this.topElement.style.height=this.topElementHeight+"px",this.bottomElement.style.height=this.bottomElementHeight+"px",s>this.scrollPosition)(n=Math.round(this.topElementHeight/this.listItemHeight-this.listDiff))>this.expectedDomItemCount+5?this.onLongScroll(n,!0):this.onNormalScroll(n,!0);else(n=Math.round(this.listDiff-this.topElementHeight/this.listItemHeight))>this.expectedDomItemCount+5?this.onLongScroll(n,!1):this.onNormalScroll(n,!1);this.listDiff=Math.round(this.topElementHeight/this.listItemHeight),"function"==typeof this.listViewInstance.onUIScrolled&&this.listViewInstance.onUIScrolled()}this.scrollPosition=s},e.prototype.onLongScroll=function(e,t){for(var i=t?this.uiFirstIndex+e:this.uiFirstIndex-e,s=this.listViewInstance.ulElement.querySelectorAll("li"),n=0;n<s.length;n++)this.updateUI(s[n],i),i++;this.uiLastIndex=t?this.uiLastIndex+e:this.uiLastIndex-e,this.uiFirstIndex=t?this.uiFirstIndex+e:this.uiFirstIndex-e},e.prototype.onNormalScroll=function(e,t){if(t)for(var i=0;i<e;i++){var s=++this.uiLastIndex;this.updateUI(this.topElement.nextElementSibling,s,this.bottomElement),this.uiFirstIndex++}else for(i=0;i<e;i++){s=--this.uiFirstIndex;var n=this.topElement.nextSibling;this.updateUI(this.bottomElement.previousElementSibling,s,n),this.uiLastIndex--}},e.prototype.updateUiContent=function(e,t){var i=this.listViewInstance.curViewDS;if("string"==typeof this.listViewInstance.dataSource[0]||"number"==typeof this.listViewInstance.dataSource[0]?(e.dataset.uid=sf.lists.ListBase.generateId(),e.getElementsByClassName(r.listItemText)[0].innerHTML=this.listViewInstance.curViewDS[t].toString()):(e.dataset.uid=i[t][this.listViewInstance.fields.id]?i[t][this.listViewInstance.fields.id].toString():sf.lists.ListBase.generateId(),e.getElementsByClassName(r.listItemText)[0].innerHTML=i[t][this.listViewInstance.fields.text].toString()),this.listViewInstance.showIcon&&(e.querySelector("."+r.listIcon)&&sf.base.detach(e.querySelector("."+r.listIcon)),this.listViewInstance.curViewDS[t][this.listViewInstance.fields.iconCss])){var s=e.querySelector("."+r.textContent),n=this.listViewInstance.createElement("div",{className:r.listIcon+" "+this.listViewInstance.curViewDS[t][this.listViewInstance.fields.iconCss]});s.insertBefore(n,e.querySelector("."+r.listItemText))}if(this.listViewInstance.showCheckBox&&this.listViewInstance.fields.groupBy){this.checkListWrapper||(this.checkListWrapper=this.listViewInstance.curUL.querySelector("."+r.checkboxWrapper).cloneNode(!0));s=e.querySelector("."+r.textContent);this.listViewInstance.curViewDS[t].isHeader?e.querySelector("."+r.checkboxWrapper)&&(e.classList.remove(r.checklist),s.classList.remove(r.checkbox),sf.base.detach(e.querySelector("."+r.checkboxWrapper))):e.querySelector("."+r.checkboxWrapper)||(e.classList.add(r.checklist),s.classList.add(r.checkbox),s.insertBefore(this.checkListWrapper.cloneNode(!0),e.querySelector("."+r.listItemText)))}},e.prototype.changeElementAttributes=function(e,t){if(e.classList.remove(r.disable),this.uiIndices.disabledItemIndices.length&&-1!==this.uiIndices.disabledItemIndices.indexOf(t)&&e.classList.add(r.disable),e.style.display="",this.uiIndices.hiddenItemIndices.length&&-1!==this.uiIndices.hiddenItemIndices.indexOf(t)&&(e.style.display="none"),this.listViewInstance.showCheckBox){var i=e.querySelector("."+r.checkboxWrapper);e.classList.remove(r.selected),e.classList.remove(r.focused),i&&(i.removeAttribute("aria-checked"),i.firstElementChild.classList.remove(r.checked)),this.uiIndices.activeIndices.length&&-1!==this.uiIndices.activeIndices.indexOf(t)&&!this.listViewInstance.curUL.querySelector(r.selected)&&(e.classList.add(r.selected),i.firstElementChild.classList.add(r.checked),i.setAttribute("aria-checked","true"),this.activeIndex===t&&e.classList.add(r.focused))}else e.classList.remove(r.selected),e.removeAttribute("aria-selected"),sf.base.isNullOrUndefined(this.activeIndex)||this.activeIndex!==t||this.listViewInstance.curUL.querySelector(r.selected)||(e.classList.add(r.selected),e.setAttribute("aria-selected","true"));this.listViewInstance.fields.groupBy&&(this.listViewInstance.curViewDS[t].isHeader?e.classList.contains(r.listItem)&&(e.classList.remove(r.listItem),e.setAttribute("role","group"),e.classList.add(r.groupListItem)):e.classList.contains(r.groupListItem)&&(e.classList.remove(r.groupListItem),e.setAttribute("role","listitem"),e.classList.add(r.listItem)))},e.prototype.findDSAndIndexFromId=function(e,t){var i=this,s={};return t=this.listViewInstance.getElementUID(t),sf.base.isNullOrUndefined(t)||e.some((function(e,n){return!!(t[i.listViewInstance.fields.id]&&t[i.listViewInstance.fields.id].toString()===(e[i.listViewInstance.fields.id]&&e[i.listViewInstance.fields.id].toString())||t===e)&&(s.index=n,s.data=e,!0)})),s},e.prototype.getSelectedItems=function(){var e=this;if(!sf.base.isNullOrUndefined(this.activeIndex)||this.listViewInstance.showCheckBox&&this.uiIndices.activeIndices.length){var t=[],i=[];if("string"==typeof this.listViewInstance.dataSource[0]||"number"==typeof this.listViewInstance.dataSource[0]){var s=this.listViewInstance.curViewDS;if(this.listViewInstance.showCheckBox){for(var n=this.uiIndices.activeIndices,l=0;l<n.length;l++)t.push(s[n[l]]);return{text:t,data:t,index:this.uiIndices.activeIndices.map((function(t){return e.listViewInstance.dataSource.indexOf(s[t])}))}}return{text:s[this.activeIndex],data:s[this.activeIndex],index:this.listViewInstance.dataSource.indexOf(s[this.activeIndex])}}if(sf.base.isBlazor()&&this.listViewInstance.isServerRendered){var a=Math.round(this.listViewInstance.element.scrollTop/this.listViewInstance.liElementHeight)-2;a<0&&(a=0),this.activeIndex+=a}var r=this.listViewInstance.curViewDS,o=this.listViewInstance.fields.text;if(this.listViewInstance.showCheckBox){var h=this.uiIndices.activeIndices;for(l=0;l<h.length;l++)i.push(r[h[l]][o]),t.push(r[h[l]]);var c=this.listViewInstance.dataSource instanceof sf.data.DataManager?r:this.listViewInstance.dataSource;return{text:i,data:t,index:this.uiIndices.activeIndices.map((function(e){return c.indexOf(r[e])}))}}var d=this.listViewInstance.dataSource instanceof sf.data.DataManager?r:this.listViewInstance.dataSource;return{text:r[this.activeIndex][this.listViewInstance.fields.text],data:r[this.activeIndex],index:d.indexOf(r[this.activeIndex])}}},e.prototype.selectItem=function(e){var t=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,e);if(Object.keys(t).length){var i=this.activeIndex===t.index,s=void 0;if(this.activeIndex=t.index,this.listViewInstance.showCheckBox&&(-1===this.uiIndices.activeIndices.indexOf(t.index)?(s=!0,this.uiIndices.activeIndices.push(t.index)):(s=!1,this.uiIndices.activeIndices.splice(this.uiIndices.activeIndices.indexOf(t.index),1)),this.listViewInstance.curUL.querySelector("."+r.focused)&&this.listViewInstance.curUL.querySelector("."+r.focused).classList.remove(r.focused)),this.listViewInstance.getLiFromObjOrElement(e))this.listViewInstance.showCheckBox?this.listViewInstance.setCheckboxLI(this.listViewInstance.getLiFromObjOrElement(e)):this.listViewInstance.setSelectLI(this.listViewInstance.getLiFromObjOrElement(e));else{var n=void 0;if("string"==typeof this.listViewInstance.dataSource[0]||"number"==typeof this.listViewInstance.dataSource[0])n={text:this.listViewInstance.curViewDS[this.activeIndex],data:this.listViewInstance.curViewDS[this.activeIndex],index:this.activeIndex};else{var l=this.listViewInstance.curViewDS;n={text:l[this.activeIndex][this.listViewInstance.fields.text],data:l[this.activeIndex],index:this.activeIndex}}this.listViewInstance.showCheckBox?(n.isChecked=s,this.listViewInstance.trigger("select",n)):i||(this.listViewInstance.removeSelect(),this.listViewInstance.trigger("select",n))}}else sf.base.isNullOrUndefined(e)&&!this.listViewInstance.showCheckBox&&(this.listViewInstance.removeSelect(),this.activeIndex=void 0);if(sf.base.isBlazor()&&this.listViewInstance.isServerRendered){var a=t.data[this.listViewInstance.fields.id];if(this.listViewInstance.showCheckBox)if(this.listViewInstance.previousSelectedItems.includes(a)){var o=this.listViewInstance.previousSelectedItems.indexOf(a);o>-1&&this.listViewInstance.previousSelectedItems.splice(o,1)}else this.listViewInstance.previousSelectedItems.push(a);else this.listViewInstance.previousSelectedItems[0]=a;this.listViewInstance.removeActiveClass()}},e.prototype.enableItem=function(e){var t=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,e);if(sf.base.isBlazor()&&this.listViewInstance.isServerRendered){var i=t.data[this.listViewInstance.fields.id];if(this.listViewInstance.enabledItems.includes(i)||(this.listViewInstance.enabledItems.push(i),this.listViewInstance.removeActiveClass()),this.listViewInstance.disabledItems.includes(i)){var s=this.listViewInstance.disabledItems.indexOf(i);s>-1&&this.listViewInstance.disabledItems.splice(s,1)}}else Object.keys(t).length&&this.uiIndices.disabledItemIndices.splice(this.uiIndices.disabledItemIndices.indexOf(t.index),1)},e.prototype.disableItem=function(e){var t=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,e);if(sf.base.isBlazor()&&this.listViewInstance.isServerRendered){var i=t.data[this.listViewInstance.fields.id];if(this.listViewInstance.disabledItems.includes(i)||(this.listViewInstance.disabledItems.push(i),this.listViewInstance.removeActiveClass()),this.listViewInstance.enabledItems.includes(i)){var s=this.listViewInstance.enabledItems.indexOf(i);s>-1&&this.listViewInstance.enabledItems.splice(s,1)}}else Object.keys(t).length&&-1===this.uiIndices.disabledItemIndices.indexOf(t.index)&&this.uiIndices.disabledItemIndices.push(t.index)},e.prototype.showItem=function(e){var t=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,e);if(sf.base.isBlazor()&&this.listViewInstance.isServerRendered){var i=t.data[this.listViewInstance.fields.id];if(this.listViewInstance.hiddenItems.includes(i)){var s=this.listViewInstance.hiddenItems.indexOf(i);s>-1&&(this.listViewInstance.previousSelectedItems.splice(s,1),this.listViewInstance.removeActiveClass())}}else Object.keys(t).length&&this.uiIndices.hiddenItemIndices.splice(this.uiIndices.hiddenItemIndices.indexOf(t.index),1)},e.prototype.hideItem=function(e){var t=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,e);if(sf.base.isBlazor()&&this.listViewInstance.isServerRendered){var i=t.data[this.listViewInstance.fields.id];this.listViewInstance.hiddenItems.includes(i)||(this.listViewInstance.hiddenItems.push(i),this.listViewInstance.removeActiveClass())}else Object.keys(t).length&&-1===this.uiIndices.hiddenItemIndices.indexOf(t.index)&&this.uiIndices.hiddenItemIndices.push(t.index)},e.prototype.removeItem=function(e){var t,i=this.listViewInstance.curViewDS,s=this.findDSAndIndexFromId(i,e);sf.base.isBlazor()&&this.listViewInstance.isServerRendered&&void 0!==s.index&&this.listViewInstance.interopAdaptor.invokeMethodAsync("RemoveItemPosition",s.index),Object.keys(s).length&&(t=s.data,i[s.index-1]&&i[s.index-1].isHeader&&1===i[s.index-1].items.length?(this.removeUiItem(s.index-1),this.removeUiItem(s.index-1)):sf.base.isBlazor()&&this.listViewInstance.isServerRendered||this.removeUiItem(s.index));var n=this.listViewInstance.dataSource instanceof sf.data.DataManager?this.listViewInstance.localData:this.listViewInstance.dataSource,l=n.indexOf(t);-1!==l&&(n.splice(l,1),this.listViewInstance.setViewDataSource(n)),this.listViewInstance.liCollection=this.listViewInstance.curUL.querySelectorAll("li")},e.prototype.setCheckboxLI=function(e,t){sf.base.isBlazor()&&this.listViewInstance.isServerRendered&&(this.uiFirstIndex=Math.round(this.listViewInstance.element.scrollTop/36)-4,this.uiFirstIndex<0&&(this.uiFirstIndex=0));var i=Array.prototype.indexOf.call(this.listViewInstance.curUL.querySelectorAll("li"),e)+this.uiFirstIndex;this.activeIndex=Array.prototype.indexOf.call(this.listViewInstance.curUL.querySelectorAll("li"),e)+this.uiFirstIndex,e.classList.contains(r.selected)?-1===this.uiIndices.activeIndices.indexOf(i)&&this.uiIndices.activeIndices.push(i):this.uiIndices.activeIndices.splice(this.uiIndices.activeIndices.indexOf(i),1)},e.prototype.setSelectLI=function(e,t){this.activeIndex=Array.prototype.indexOf.call(this.listViewInstance.curUL.querySelectorAll("li"),e)+this.uiFirstIndex},e.prototype.checkedItem=function(e){if(e){this.uiIndices.activeIndices=[],this.activeIndex=void 0;for(var t=this.listViewInstance.curViewDS,i=0;i<t.length;i++)t[i].isHeader||this.uiIndices.activeIndices.push(i)}else this.activeIndex=void 0,this.uiIndices.activeIndices=[]},e.prototype.addUiItem=function(e){var t=this.listViewInstance.curViewDS;if(this.changeUiIndices(e,!0),this.activeIndex&&this.activeIndex>=e&&this.activeIndex++,this.listViewInstance.showCheckBox&&t[e][this.listViewInstance.fields.isChecked]&&this.uiIndices.activeIndices.push(e),parseFloat(this.bottomElement.style.height)||parseFloat(this.topElement.style.height)||(this.bottomElement.style.height=parseFloat(this.bottomElement.style.height)+this.listItemHeight+"px"),parseFloat(this.bottomElement.style.height)){var i=this.listViewInstance.curUL.lastElementChild.previousSibling;(s=this.listViewInstance.getLiFromObjOrElement(t[e+1])||this.listViewInstance.getLiFromObjOrElement(t[e+2]))&&(this.bottomElement.style.height=parseFloat(this.bottomElement.style.height)+this.listItemHeight+"px",this.updateUI(i,e,s))}else{i=this.listViewInstance.curUL.firstElementChild.nextSibling;var s=void 0;s=Object.keys(this.listViewInstance.curViewDS).length-1===e?this.listViewInstance.curUL.lastElementChild:this.listViewInstance.getLiFromObjOrElement(t[e+1])||this.listViewInstance.getLiFromObjOrElement(t[e+2]),this.topElement.style.height=parseFloat(this.topElement.style.height)+this.listItemHeight+"px",this.uiFirstIndex++,this.uiLastIndex++,s&&(this.updateUI(i,e,s),this.listViewInstance.isWindow?window.scrollTo(0,pageYOffset+this.listItemHeight):this.listViewInstance.element.scrollTop+=this.listItemHeight)}this.totalHeight+=this.listItemHeight,this.listDiff=Math.round(parseFloat(this.topElement.style.height)/this.listItemHeight)},e.prototype.removeUiItem=function(e){this.totalHeight-=this.listItemHeight;var t=this.listViewInstance.curViewDS[e],i=this.listViewInstance.getLiFromObjOrElement(t);if(this.listViewInstance.curViewDS.splice(e,1),this.activeIndex&&this.activeIndex>=e&&this.activeIndex--,i)if(this.domItemCount>Object.keys(this.listViewInstance.curViewDS).length)sf.base.detach(i),this.domItemCount--,this.uiLastIndex--,this.totalHeight=0;else{if(i.classList.contains(r.disable)&&(i.classList.remove(r.disable),this.uiIndices.disabledItemIndices.splice(this.uiIndices.disabledItemIndices.indexOf(e),1)),"none"===i.style.display&&(i.style.display="",this.uiIndices.hiddenItemIndices.splice(this.uiIndices.hiddenItemIndices.indexOf(e),1)),this.listViewInstance.showCheckBox&&i.classList.contains(r.selected)){this.listViewInstance.removeSelect(),this.uiIndices.activeIndices.splice(this.uiIndices.activeIndices.indexOf(e),1);var s=i.querySelector("."+r.checkboxWrapper);s.removeAttribute("aria-checked"),s.firstElementChild.classList.remove(r.checked),i.classList.contains(r.focused)&&(i.classList.remove(r.focused),this.activeIndex=void 0)}else i.classList.contains(r.selected)&&(this.listViewInstance.removeSelect(),this.activeIndex=void 0);parseFloat(this.bottomElement.style.height)||parseFloat(this.topElement.style.height)?parseFloat(this.bottomElement.style.height)?(this.bottomElement.style.height=parseFloat(this.bottomElement.style.height)-this.listItemHeight+"px",this.updateUI(i,this.uiLastIndex,this.bottomElement)):(this.topElement.style.height=parseFloat(this.topElement.style.height)-this.listItemHeight+"px",this.updateUI(i,this.uiFirstIndex-1,this.topElement.nextSibling),this.uiLastIndex--,this.uiFirstIndex--):this.updateUI(i,this.uiLastIndex,this.bottomElement)}this.changeUiIndices(e,!1),this.listDiff=Math.round(parseFloat(this.topElement.style.height)/this.listItemHeight)},e.prototype.changeUiIndices=function(e,t){for(var i=Object.keys(this.uiIndices),s=0;s<i.length;s++)this.uiIndices[i[s]]=this.uiIndices[i[s]].map((function(i){return i>=e?t?++i:--i:i}))},e.prototype.addItem=function(e,t,i){for(var s=0;s<e.length;s++){var n=e[s];if(i.push(n),this.listViewInstance.setViewDataSource(i),this.domItemCount)if(this.domItemCount<this.expectedDomItemCount){if(this.listViewInstance.findItemFromDS(i,t)instanceof Array){if(this.listViewInstance.ulElement){var l=this.listViewInstance.curViewDS.indexOf(n);this.createAndInjectNewItem(n,l),(a=this.listViewInstance.curViewDS[l-1])&&a.isHeader&&1===a.items.length&&(--l,this.createAndInjectNewItem(a,l))}this.listViewInstance.liCollection=this.listViewInstance.curUL.querySelectorAll("li")}}else{var a;l=this.listViewInstance.curViewDS.indexOf(n);this.addUiItem(l),(a=this.listViewInstance.curViewDS[l-1])&&a.isHeader&&1===a.items.length&&this.addUiItem(l-1)}else!this.listViewInstance.template&&!this.listViewInstance.groupTemplate||this.isNgTemplate()||(this.listViewInstance.listBaseOption.template=null,this.listViewInstance.listBaseOption.groupTemplate=null,this.listViewInstance.listBaseOption.itemCreated=this.createUIItem.bind(this)),this.uiVirtualization()}},e.prototype.createAndInjectNewItem=function(e,t){var i,s=sf.lists.ListBase.createListItemFromJson(this.listViewInstance.createElement,[e],this.listViewInstance.listBaseOption,null,null,this);i=Object.keys(this.listViewInstance.curViewDS).length-1===t?this.listViewInstance.curUL.lastElementChild:this.listViewInstance.getLiFromObjOrElement(this.listViewInstance.curViewDS[t+1])||this.listViewInstance.getLiFromObjOrElement(this.listViewInstance.curViewDS[t+2]),this.listViewInstance.ulElement.insertBefore(s[0],i),this.domItemCount++,this.bottomElementHeight<=0&&this.uiLastIndex++,this.refreshItemHeight()},e.prototype.createUIItem=function(e){var t=this.listViewInstance.template,i=this.listViewInstance.createElement("div"),s='<div class="e-text-content" role="presentation"> <span class="e-list-text"> ${'+this.listViewInstance.fields.text+"} </span></div>";if(this.listViewInstance.showCheckBox){if(this.listViewInstance.renderCheckbox(e),!sf.base.isNullOrUndefined(this.listViewInstance.virtualCheckBox)&&!sf.base.isNullOrUndefined(this.listViewInstance.virtualCheckBox.outerHTML)){var n=document.createElement("div");n.innerHTML=this.listViewInstance.template||s,n.children[0].classList.add("e-checkbox"),"Left"===this.listViewInstance.checkBoxPosition?n.children[0].classList.add("e-checkbox-left"):n.children[0].classList.add("e-checkbox-right"),"Left"===this.listViewInstance.checkBoxPosition?n.children[0].insertBefore(this.listViewInstance.virtualCheckBox,n.childNodes[0].children[0]):n.children[0].appendChild(this.listViewInstance.virtualCheckBox),this.listViewInstance.template=n.innerHTML}i.innerHTML=this.listViewInstance.template,this.listViewInstance.template=t}else i.innerHTML=this.listViewInstance.template||s;var l=i.getElementsByTagName("*"),a=this.listViewInstance.createElement("div");this.listViewInstance.fields.groupBy&&(a.innerHTML=this.listViewInstance.groupTemplate||s);var r=a.getElementsByTagName("*");e.curData.isHeader&&(this.headerData=e.curData),this.templateData=e.curData.isHeader?e.curData.items[0]:e.curData,e.item.innerHTML="",e.item.context={data:e.curData,nodes:{flatTemplateNodes:[],groupTemplateNodes:[]}};for(var o=0;o<l.length;o++)this.compileTemplate(l[o],e.item,!1);for(o=0;o<r.length;o++)this.compileTemplate(r[o],e.item,!0);e.item.context.template=e.curData.isHeader?i.firstElementChild:a.firstElementChild,e.item.context.type=e.curData.isHeader?"flatList":"groupList";var h=e.curData.isHeader?a:i;e.item.insertBefore(h.firstElementChild,null)},e.prototype.compileTemplate=function(e,t,i){this.textProperty(e,t,i),this.classProperty(e,t,i),this.attributeProperty(e,t,i)},e.prototype.onChange=function(e,t){t.context.data=e;var i=t.context.nodes.groupTemplateNodes,s=t.context.nodes.flatTemplateNodes;if(!sf.base.isNullOrUndefined(e.isHeader)&&e.isHeader&&"groupList"===t.context.type){var n=t.firstElementChild;sf.base.detach(t.firstElementChild),t.insertBefore(t.context.template,null),t.context.template=n,t.context.type="flatList";for(var l=0;l<i.length;l++)i[l].onChange(e)}else if(e.isHeader||"flatList"!==t.context.type)if(e.isHeader)for(l=0;l<i.length;l++)i[l].onChange(e);else for(l=0;l<s.length;l++)s[l].onChange(e);else{n=t.firstElementChild;sf.base.detach(t.firstElementChild),t.insertBefore(t.context.template,null),t.context.template=n,t.context.type="groupList";for(var l=0;l<s.length;l++)s[l].onChange(e)}},e.prototype.updateContextData=function(e,t,i){i?e.context.nodes.groupTemplateNodes.push(t):e.context.nodes.flatTemplateNodes.push(t)},e.prototype.classProperty=function(e,t,i){for(var s,n=new RegExp("\\${([^}]*)}","g"),l=[];null!==s;){var a=n.exec(e.className);l.push(a),null===(s=a)&&l.pop()}if(l&&l.length)for(var r=function(s){var n,a=l[s];n=-1!==a[1].indexOf("?")&&-1!==a[1].indexOf(":")?new Function("data","return "+a[1].replace(/\$/g,"data.")):new Function("data","return data."+a[1]);var r={};r.bindedvalue=n(i?o.headerData:o.templateData),r.onChange=function(t){r.bindedvalue&&sf.base.removeClass([e],r.bindedvalue.split(" ").filter((function(e){return e})));var i=n(t);i&&sf.base.addClass([e],i.split(" ").filter((function(e){return e}))),r.bindedvalue=i};for(var h=a[0].split(" "),c=0;c<h.length;c++)e.classList.remove(h[c]);r.bindedvalue&&sf.base.addClass([e],r.bindedvalue.split(" ").filter((function(e){return e}))),o.updateContextData(t,r,i)},o=this,h=0;h<l.length;h++)r(h)},e.prototype.attributeProperty=function(e,t,i){for(var s=[],n=0;n<e.attributes.length;n++)s.push(e.attributes[n].nodeName);-1!==s.indexOf("class")&&s.splice(s.indexOf("class"),1);var l=function(n){var l,r,o=s[n],h=new RegExp("\\${([^}]*)}","g").exec(o)||[],c=new RegExp("\\${([^}]*)}","g").exec(e.getAttribute(o))||[];if(h.length||c.length){h[1]&&(l=new Function("data","return data."+h[1])),c[1]&&(r=-1!==c[1].indexOf("?")&&-1!==c[1].indexOf(":")?new Function("data","return "+c[1].replace(/\$/g,"data.")):new Function("data","return data."+c[1]));var d={};d.bindedvalue=i?[void 0===h[1]?void 0:l(a.headerData),void 0===c[1]?void 0:r(a.headerData)]:[void 0===h[1]?void 0:l(a.templateData),void 0===c[1]?void 0:r(a.templateData)],d.attrName=void 0===d.bindedvalue[0]?o:d.bindedvalue[0],d.onChange=function(t){var i=void 0===d.bindedvalue[1]?e.getAttribute(d.attrName):r(t);e.removeAttribute(d.attrName),d.attrName=void 0===d.bindedvalue[0]?d.attrName:l(t),e.setAttribute(d.attrName,i),d.bindedvalue=[void 0===d.bindedvalue[0]?void 0:l(t),void 0===d.bindedvalue[1]?void 0:r(t)]};var u=void 0===d.bindedvalue[1]?e.getAttribute(o):d.bindedvalue[1];e.removeAttribute(o),e.setAttribute(d.attrName,u),a.updateContextData(t,d,i)}},a=this;for(n=0;n<s.length;n++)l(n)},e.prototype.textProperty=function(e,t,i){for(var s,n=new RegExp("\\${([^}]*)}","g"),l=[];null!==s;){var a=n.exec(e.innerText);l.push(a),null===(s=a)&&l.pop()}var r=Array.prototype.some.call(e.children,(function(e){return!!new RegExp("\\${([^}]*)}","g").exec(e.innerText)}));if(l&&l.length&&!r)for(var o=function(s){var n,a=l[s],r={};n=-1!==a[1].indexOf("?")&&-1!==a[1].indexOf(":")?new Function("data","return "+a[1].replace(/\$/g,"data.")):new Function("data","return data."+a[1]),r.bindedvalue=n(i?h.headerData:h.templateData),r.onChange=function(t){e.innerText=e.innerText.replace(r.bindedvalue,n(t)),r.bindedvalue=n(t)},e.innerText=e.innerText.replace(a[0],r.bindedvalue),h.updateContextData(t,r,i)},h=this,c=0;c<l.length;c++)o(c)},e.prototype.reRenderUiVirtualization=function(){this.wireScrollEvent(!0),this.listViewInstance.contentContainer&&sf.base.detach(this.listViewInstance.contentContainer),this.listViewInstance.preRender(),this.domItemCount=0,this.listViewInstance.header(),this.listViewInstance.setLocalData()},e.prototype.updateUI=function(e,t,i){var s=this.isNgTemplate()?this.onNgChange:this.onChange;if(this.listViewInstance.template||this.listViewInstance.groupTemplate){var n=this.listViewInstance.curViewDS[t];e.dataset.uid=n[this.listViewInstance.fields.id]?n[this.listViewInstance.fields.id].toString():sf.lists.ListBase.generateId(),s(n,e,this)}else this.updateUiContent(e,t);this.changeElementAttributes(e,t),i&&this.listViewInstance.ulElement.insertBefore(e,i)},e.prototype.onNgChange=function(e,t,i){for(var s=sf.base.compile(i.listViewInstance.template)(e);t.lastChild;)t.removeChild(t.lastChild);t.appendChild(s[0])},e.prototype.getModuleName=function(){return"virtualization"},e.prototype.destroy=function(){this.wireScrollEvent(!0)},e}();return h.Inject(c),e.classNames=r,e.FieldSettings=o,e.ListView=h,e.Virtualization=c,e}({}))}});